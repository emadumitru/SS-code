===
insert-tree
---
ImportDeclaration [926,947]
    QualifiedName: java.util.Set [933,946]
to
CompilationUnit [0,91971]
at 1
===
insert-tree
---
ImportDeclaration [949,997]
    QualifiedName: java.util.concurrent.CopyOnWriteArraySet [956,996]
to
CompilationUnit [0,91971]
at 2
===
insert-tree
---
ImportDeclaration [999,1048]
    QualifiedName: java.util.concurrent.atomic.AtomicBoolean [1006,1047]
to
CompilationUnit [0,91971]
at 3
===
insert-tree
---
ImportDeclaration [12119,12192]
    QualifiedName: org.neo4j.kernel.AvailabilityGuard.AvailabilityRequirement [12133,12191]
to
CompilationUnit [0,91971]
at 20
===
insert-tree
---
ImportDeclaration [12194,12267]
    QualifiedName: org.neo4j.kernel.AvailabilityGuard.availabilityRequirement [12208,12266]
to
CompilationUnit [0,91971]
at 21
===
insert-tree
---
ImportDeclaration [38129,38202]
    QualifiedName: org.neo4j.kernel.AvailabilityGuard.availabilityRequirement [38143,38201]
to
CompilationUnit [0,91971]
at 94
===
insert-tree
---
ImportDeclaration [48128,48201]
    QualifiedName: org.neo4j.kernel.AvailabilityGuard.AvailabilityRequirement [48142,48200]
to
CompilationUnit [0,91971]
at 109
===
insert-tree
---
ImportDeclaration [48203,48276]
    QualifiedName: org.neo4j.kernel.AvailabilityGuard.availabilityRequirement [48217,48275]
to
CompilationUnit [0,91971]
at 110
===
insert-tree
---
ImportDeclaration [75396,75469]
    QualifiedName: org.neo4j.kernel.AvailabilityGuard.AvailabilityRequirement [75410,75468]
to
CompilationUnit [0,91971]
at 155
===
insert-node
---
TypeDeclaration [1416,10857]
to
CompilationUnit [0,91971]
at 158
===
insert-node
---
Javadoc [1416,1878]
to
TypeDeclaration [1416,10857]
at 0
===
insert-node
---
Modifier: public [1880,1886]
to
TypeDeclaration [1416,10857]
at 1
===
insert-node
---
TYPE_DECLARATION_KIND: class [1887,1892]
to
TypeDeclaration [1416,10857]
at 2
===
insert-node
---
SimpleName: AvailabilityGuard [1893,1910]
to
TypeDeclaration [1416,10857]
at 3
===
insert-node
---
TypeDeclaration [1919,2092]
to
TypeDeclaration [1416,10857]
at 4
===
move-tree
---
TypeDeclaration [1910,2019]
    Modifier: public [1910,1916]
    TYPE_DECLARATION_KIND: interface [1917,1926]
    SimpleName: AvailabilityListener [1927,1947]
    MethodDeclaration [1964,1981]
        PrimitiveType: void [1964,1968]
        SimpleName: available [1969,1978]
    MethodDeclaration [1993,2012]
        PrimitiveType: void [1993,1997]
        SimpleName: unavailable [1998,2009]
to
TypeDeclaration [1416,10857]
at 5
===
move-tree
---
TypeDeclaration [2027,2408]
    Javadoc [2027,2317]
        TagElement [2039,2308]
            TextElement: Represents a description of why someone is denying access to the database, to help debugging. Components [2039,2143]
            TextElement: granting and revoking access should use the same denial reason for both method calls, as it is used to track [2152,2260]
            TextElement: who is blocking access to the database. [2269,2308]
    Modifier: public [2323,2329]
    TYPE_DECLARATION_KIND: interface [2330,2339]
    SimpleName: AvailabilityRequirement [2340,2363]
    MethodDeclaration [2380,2401]
        SimpleType [2380,2386]
            SimpleName: String [2380,2386]
        SimpleName: description [2387,2398]
to
TypeDeclaration [1416,10857]
at 6
===
insert-node
---
MethodDeclaration [2606,3738]
to
TypeDeclaration [1416,10857]
at 7
===
insert-node
---
FieldDeclaration [3746,3816]
to
TypeDeclaration [1416,10857]
at 8
===
insert-node
---
FieldDeclaration [3822,3916]
to
TypeDeclaration [1416,10857]
at 9
===
insert-tree
---
FieldDeclaration [3922,3990]
    Modifier: private [3922,3929]
    Modifier: final [3930,3935]
    SimpleType [3936,3949]
        SimpleName: AtomicBoolean [3936,3949]
    VariableDeclarationFragment [3950,3989]
        SimpleName: isShutdown [3950,3960]
        ClassInstanceCreation [3963,3989]
            SimpleType [3967,3980]
                SimpleName: AtomicBoolean [3967,3980]
            BooleanLiteral: false [3982,3987]
to
TypeDeclaration [1416,10857]
at 10
===
move-tree
---
FieldDeclaration [2751,2827]
    Modifier: private [2751,2758]
    ParameterizedType [2759,2789]
        SimpleType [2759,2767]
            SimpleName: Iterable [2759,2767]
        SimpleType [2768,2788]
            SimpleName: AvailabilityListener [2768,2788]
    VariableDeclarationFragment [2790,2826]
        SimpleName: listeners [2790,2799]
        MethodInvocation [2802,2826]
            METHOD_INVOCATION_RECEIVER [2802,2811]
                SimpleName: Listeners [2802,2811]
            SimpleName: newListeners [2812,2824]
to
TypeDeclaration [1416,10857]
at 11
===
move-tree
---
FieldDeclaration [2979,3005]
    Modifier: private [2979,2986]
    Modifier: final [2987,2992]
    SimpleType [2993,2998]
        SimpleName: Clock [2993,2998]
    VariableDeclarationFragment [2999,3004]
        SimpleName: clock [2999,3004]
to
TypeDeclaration [1416,10857]
at 12
===
move-tree
---
MethodDeclaration [3099,3259]
    Modifier: public [3099,3105]
    SimpleName: AvailabilityGuard [3106,3123]
    SingleVariableDeclaration [3125,3136]
        SimpleType [3125,3130]
            SimpleName: Clock [3125,3130]
        SimpleName: clock [3131,3136]
    SingleVariableDeclaration [3138,3156]
        PrimitiveType: int [3138,3141]
        SimpleName: conditionCount [3142,3156]
    Block [3164,3259]
        ExpressionStatement [3175,3194]
            Assignment [3175,3193]
                FieldAccess [3175,3185]
                    ThisExpression [3175,3179]
                    SimpleName: clock [3180,3185]
                ASSIGNMENT_OPERATOR: = [3186,3187]
                SimpleName: clock [3188,3193]
        ExpressionStatement [3204,3252]
            Assignment [3204,3251]
                SimpleName: available [3204,3213]
                ASSIGNMENT_OPERATOR: = [3214,3215]
                ClassInstanceCreation [3216,3251]
                    SimpleType [3220,3233]
                        SimpleName: AtomicInteger [3220,3233]
                    SimpleName: conditionCount [3235,3249]
to
TypeDeclaration [1416,10857]
at 13
===
move-tree
---
MethodDeclaration [4749,5182]
    Modifier: public [4749,4755]
    PrimitiveType: void [4756,4760]
    SimpleName: shutdown [4761,4769]
    Block [4777,5182]
        VariableDeclarationStatement [4788,4824]
            PrimitiveType: int [4788,4791]
            VariableDeclarationFragment [4792,4823]
                SimpleName: val [4792,4795]
                MethodInvocation [4798,4823]
                    METHOD_INVOCATION_RECEIVER [4798,4807]
                        SimpleName: available [4798,4807]
                    SimpleName: getAndSet [4808,4817]
                    METHOD_INVOCATION_ARGUMENTS [4819,4821]
                        PrefixExpression [4819,4821]
                            PREFIX_EXPRESSION_OPERATOR: - [4819,4820]
                            NumberLiteral: 1 [4820,4821]
        IfStatement [4834,5175]
            InfixExpression [4839,4847]
                SimpleName: val [4839,4842]
                INFIX_EXPRESSION_OPERATOR: == [4843,4845]
                NumberLiteral: 0 [4846,4847]
            Block [4859,5175]
                ExpressionStatement [4874,5164]
                    MethodInvocation [4874,5163]
                        SimpleName: notifyListeners [4874,4889]
                        METHOD_INVOCATION_ARGUMENTS [4891,5161]
                            SimpleName: listeners [4891,4900]
                            ClassInstanceCreation [4902,5161]
                                ParameterizedType [4906,4950]
                                    SimpleType [4906,4928]
                                        QualifiedName: Listeners.Notification [4906,4928]
                                    SimpleType [4929,4949]
                                        SimpleName: AvailabilityListener [4929,4949]
                                AnonymousClassDeclaration [4966,5161]
                                    MethodDeclaration [4985,5146]
                                        MarkerAnnotation [4985,4994]
                                            SimpleName: Override [4986,4994]
                                        Modifier: public [5012,5018]
                                        PrimitiveType: void [5019,5023]
                                        SimpleName: notify [5024,5030]
                                        SingleVariableDeclaration [5032,5061]
                                            SimpleType [5032,5052]
                                                SimpleName: AvailabilityListener [5032,5052]
                                            SimpleName: listener [5053,5061]
                                        Block [5081,5146]
                                            ExpressionStatement [5104,5127]
                                                MethodInvocation [5104,5126]
                                                    METHOD_INVOCATION_RECEIVER [5104,5112]
                                                        SimpleName: listener [5104,5112]
                                                    SimpleName: unavailable [5113,5124]
to
TypeDeclaration [1416,10857]
at 14
===
move-tree
---
MethodDeclaration [3988,4741]
    Modifier: public [3988,3994]
    PrimitiveType: void [3995,3999]
    SimpleName: grant [4000,4005]
    SingleVariableDeclaration [4007,4048]
        SimpleType [4007,4030]
            SimpleName: AvailabilityRequirement [4007,4030]
        SimpleName: requirementNowMet [4031,4048]
    Block [4056,4741]
        VariableDeclarationStatement [4067,4075]
            PrimitiveType: int [4067,4070]
            VariableDeclarationFragment [4071,4074]
                SimpleName: val [4071,4074]
        DoStatement [4085,4286]
            Block [4097,4234]
                ExpressionStatement [4112,4134]
                    Assignment [4112,4133]
                        SimpleName: val [4112,4115]
                        ASSIGNMENT_OPERATOR: = [4116,4117]
                        MethodInvocation [4118,4133]
                            METHOD_INVOCATION_RECEIVER [4118,4127]
                                SimpleName: available [4118,4127]
                            SimpleName: get [4128,4131]
                IfStatement [4150,4221]
                    InfixExpression [4155,4164]
                        SimpleName: val [4155,4158]
                        INFIX_EXPRESSION_OPERATOR: == [4159,4161]
                        PrefixExpression [4162,4164]
                            PREFIX_EXPRESSION_OPERATOR: - [4162,4163]
                            NumberLiteral: 1 [4163,4164]
                    Block [4180,4221]
                        ReturnStatement [4199,4206]
            PrefixExpression [4243,4283]
                PREFIX_EXPRESSION_OPERATOR: ! [4243,4244]
                MethodInvocation [4244,4283]
                    METHOD_INVOCATION_RECEIVER [4244,4253]
                        SimpleName: available [4244,4253]
                    SimpleName: compareAndSet [4254,4267]
                    METHOD_INVOCATION_ARGUMENTS [4269,4281]
                        SimpleName: val [4269,4272]
                        InfixExpression [4274,4281]
                            SimpleName: val [4274,4277]
                            INFIX_EXPRESSION_OPERATOR: - [4278,4279]
                            NumberLiteral: 1 [4280,4281]
        AssertStatement [4298,4326]
            InfixExpression [4305,4325]
                MethodInvocation [4305,4320]
                    METHOD_INVOCATION_RECEIVER [4305,4314]
                        SimpleName: available [4305,4314]
                    SimpleName: get [4315,4318]
                INFIX_EXPRESSION_OPERATOR: >= [4321,4323]
                NumberLiteral: 0 [4324,4325]
        ExpressionStatement [4336,4383]
            MethodInvocation [4336,4382]
                METHOD_INVOCATION_RECEIVER [4336,4354]
                    SimpleName: blockingComponents [4336,4354]
                SimpleName: remove [4355,4361]
                METHOD_INVOCATION_ARGUMENTS [4363,4380]
                    SimpleName: requirementNowMet [4363,4380]
        IfStatement [4395,4734]
            InfixExpression [4400,4408]
                SimpleName: val [4400,4403]
                INFIX_EXPRESSION_OPERATOR: == [4404,4406]
                NumberLiteral: 1 [4407,4408]
            Block [4420,4734]
                ExpressionStatement [4435,4723]
                    MethodInvocation [4435,4722]
                        SimpleName: notifyListeners [4435,4450]
                        METHOD_INVOCATION_ARGUMENTS [4452,4720]
                            SimpleName: listeners [4452,4461]
                            ClassInstanceCreation [4463,4720]
                                ParameterizedType [4467,4511]
                                    SimpleType [4467,4489]
                                        QualifiedName: Listeners.Notification [4467,4489]
                                    SimpleType [4490,4510]
                                        SimpleName: AvailabilityListener [4490,4510]
                                AnonymousClassDeclaration [4527,4720]
                                    MethodDeclaration [4546,4705]
                                        MarkerAnnotation [4546,4555]
                                            SimpleName: Override [4547,4555]
                                        Modifier: public [4573,4579]
                                        PrimitiveType: void [4580,4584]
                                        SimpleName: notify [4585,4591]
                                        SingleVariableDeclaration [4593,4622]
                                            SimpleType [4593,4613]
                                                SimpleName: AvailabilityListener [4593,4613]
                                            SimpleName: listener [4614,4622]
                                        Block [4642,4705]
                                            ExpressionStatement [4665,4686]
                                                MethodInvocation [4665,4685]
                                                    METHOD_INVOCATION_RECEIVER [4665,4673]
                                                        SimpleName: listener [4665,4673]
                                                    SimpleName: available [4674,4683]
to
TypeDeclaration [1416,10857]
at 15
===
move-tree
---
MethodDeclaration [3267,3980]
    Modifier: public [3267,3273]
    PrimitiveType: void [3274,3278]
    SimpleName: deny [3279,3283]
    SingleVariableDeclaration [3285,3326]
        SimpleType [3285,3308]
            SimpleName: AvailabilityRequirement [3285,3308]
        SimpleName: requirementNotMet [3309,3326]
    Block [3334,3980]
        VariableDeclarationStatement [3345,3353]
            PrimitiveType: int [3345,3348]
            VariableDeclarationFragment [3349,3352]
                SimpleName: val [3349,3352]
        DoStatement [3363,3564]
            Block [3375,3512]
                ExpressionStatement [3390,3412]
                    Assignment [3390,3411]
                        SimpleName: val [3390,3393]
                        ASSIGNMENT_OPERATOR: = [3394,3395]
                        MethodInvocation [3396,3411]
                            METHOD_INVOCATION_RECEIVER [3396,3405]
                                SimpleName: available [3396,3405]
                            SimpleName: get [3406,3409]
                IfStatement [3428,3499]
                    InfixExpression [3433,3442]
                        SimpleName: val [3433,3436]
                        INFIX_EXPRESSION_OPERATOR: == [3437,3439]
                        PrefixExpression [3440,3442]
                            PREFIX_EXPRESSION_OPERATOR: - [3440,3441]
                            NumberLiteral: 1 [3441,3442]
                    Block [3458,3499]
                        ReturnStatement [3477,3484]
            PrefixExpression [3521,3561]
                PREFIX_EXPRESSION_OPERATOR: ! [3521,3522]
                MethodInvocation [3522,3561]
                    METHOD_INVOCATION_RECEIVER [3522,3531]
                        SimpleName: available [3522,3531]
                    SimpleName: compareAndSet [3532,3545]
                    METHOD_INVOCATION_ARGUMENTS [3547,3559]
                        SimpleName: val [3547,3550]
                        InfixExpression [3552,3559]
                            SimpleName: val [3552,3555]
                            INFIX_EXPRESSION_OPERATOR: + [3556,3557]
                            NumberLiteral: 1 [3558,3559]
        ExpressionStatement [3576,3620]
            MethodInvocation [3576,3619]
                METHOD_INVOCATION_RECEIVER [3576,3594]
                    SimpleName: blockingComponents [3576,3594]
                SimpleName: add [3595,3598]
                METHOD_INVOCATION_ARGUMENTS [3600,3617]
                    SimpleName: requirementNotMet [3600,3617]
        IfStatement [3632,3973]
            InfixExpression [3637,3645]
                SimpleName: val [3637,3640]
                INFIX_EXPRESSION_OPERATOR: == [3641,3643]
                NumberLiteral: 0 [3644,3645]
            Block [3657,3973]
                ExpressionStatement [3672,3962]
                    MethodInvocation [3672,3961]
                        SimpleName: notifyListeners [3672,3687]
                        METHOD_INVOCATION_ARGUMENTS [3689,3959]
                            SimpleName: listeners [3689,3698]
                            ClassInstanceCreation [3700,3959]
                                ParameterizedType [3704,3748]
                                    SimpleType [3704,3726]
                                        QualifiedName: Listeners.Notification [3704,3726]
                                    SimpleType [3727,3747]
                                        SimpleName: AvailabilityListener [3727,3747]
                                AnonymousClassDeclaration [3764,3959]
                                    MethodDeclaration [3783,3944]
                                        MarkerAnnotation [3783,3792]
                                            SimpleName: Override [3784,3792]
                                        Modifier: public [3810,3816]
                                        PrimitiveType: void [3817,3821]
                                        SimpleName: notify [3822,3828]
                                        SingleVariableDeclaration [3830,3859]
                                            SimpleType [3830,3850]
                                                SimpleName: AvailabilityListener [3830,3850]
                                            SimpleName: listener [3851,3859]
                                        Block [3879,3944]
                                            ExpressionStatement [3902,3925]
                                                MethodInvocation [3902,3924]
                                                    METHOD_INVOCATION_RECEIVER [3902,3910]
                                                        SimpleName: listener [3902,3910]
                                                    SimpleName: unavailable [3911,3922]
to
TypeDeclaration [1416,10857]
at 16
===
insert-tree
---
EnumDeclaration [6638,6744]
    Modifier: private [6638,6645]
    Modifier: static [6646,6652]
    SimpleName: Availability [6658,6670]
    EnumConstantDeclaration [6687,6699]
        SimpleName: AVAILABLE [6687,6696]
    EnumConstantDeclaration [6707,6721]
        SimpleName: UNAVAILABLE [6707,6718]
    EnumConstantDeclaration [6729,6743]
        SimpleName: SHUTDOWN [6729,6737]
to
TypeDeclaration [1416,10857]
at 17
===
insert-tree
---
MethodDeclaration [6752,7056]
    Javadoc [6752,6950]
        TagElement [6764,6823]
            TextElement: Check if the database is available for transactions to use. [6764,6823]
        TagElement [6840,6941]
            TextElement:  true if there are no requirements waiting to be fulfilled and the guard has not been shutdown [6847,6941]
    Modifier: public [6956,6962]
    PrimitiveType: boolean [6963,6970]
    SimpleName: isAvailable [6971,6982]
    Block [6990,7056]
        ReturnStatement [7001,7049]
            InfixExpression [7008,7048]
                MethodInvocation [7008,7022]
                    SimpleName: availability [7008,7020]
                INFIX_EXPRESSION_OPERATOR: == [7023,7025]
                QualifiedName: Availability.AVAILABLE [7026,7048]
to
TypeDeclaration [1416,10857]
at 18
===
insert-node
---
MethodDeclaration [7064,7436]
to
TypeDeclaration [1416,10857]
at 19
===
insert-node
---
MethodDeclaration [7444,8294]
to
TypeDeclaration [1416,10857]
at 20
===
insert-node
---
MethodDeclaration [8302,8664]
to
TypeDeclaration [1416,10857]
at 21
===
insert-node
---
MethodDeclaration [8672,9386]
to
TypeDeclaration [1416,10857]
at 22
===
move-tree
---
MethodDeclaration [8267,8404]
    Modifier: public [8267,8273]
    PrimitiveType: void [8274,8278]
    SimpleName: addListener [8279,8290]
    SingleVariableDeclaration [8292,8321]
        SimpleType [8292,8312]
            SimpleName: AvailabilityListener [8292,8312]
        SimpleName: listener [8313,8321]
    Block [8329,8404]
        ExpressionStatement [8340,8397]
            Assignment [8340,8396]
                SimpleName: listeners [8340,8349]
                ASSIGNMENT_OPERATOR: = [8350,8351]
                MethodInvocation [8352,8396]
                    METHOD_INVOCATION_RECEIVER [8352,8361]
                        SimpleName: Listeners [8352,8361]
                    SimpleName: addListener [8362,8373]
                    METHOD_INVOCATION_ARGUMENTS [8375,8394]
                        SimpleName: listener [8375,8383]
                        SimpleName: listeners [8385,8394]
to
TypeDeclaration [1416,10857]
at 23
===
move-tree
---
MethodDeclaration [8412,8555]
    Modifier: public [8412,8418]
    PrimitiveType: void [8419,8423]
    SimpleName: removeListener [8424,8438]
    SingleVariableDeclaration [8440,8469]
        SimpleType [8440,8460]
            SimpleName: AvailabilityListener [8440,8460]
        SimpleName: listener [8461,8469]
    Block [8477,8555]
        ExpressionStatement [8488,8548]
            Assignment [8488,8547]
                SimpleName: listeners [8488,8497]
                ASSIGNMENT_OPERATOR: = [8498,8499]
                MethodInvocation [8500,8547]
                    METHOD_INVOCATION_RECEIVER [8500,8509]
                        SimpleName: Listeners [8500,8509]
                    SimpleName: removeListener [8510,8524]
                    METHOD_INVOCATION_ARGUMENTS [8526,8545]
                        SimpleName: listener [8526,8534]
                        SimpleName: listeners [8536,8545]
to
TypeDeclaration [1416,10857]
at 24
===
insert-node
---
MethodDeclaration [9980,10459]
to
TypeDeclaration [1416,10857]
at 25
===
move-tree
---
FieldDeclaration [9016,9350]
    Modifier: public [9016,9022]
    Modifier: static [9023,9029]
    Modifier: final [9030,9035]
    ParameterizedType [9036,9076]
        SimpleType [9036,9044]
            SimpleName: Function [9036,9044]
        SimpleType [9045,9068]
            SimpleName: AvailabilityRequirement [9045,9068]
        SimpleType [9069,9075]
            SimpleName: String [9069,9075]
    VariableDeclarationFragment [9077,9088]
        SimpleName: DESCRIPTION [9077,9088]
to
TypeDeclaration [1416,10857]
at 26
===
insert-node
---
FieldDeclaration [12603,12723]
to
TypeDeclaration [10615,13035]
at 5
===
insert-node
---
Modifier: public [19859,19865]
to
TypeDeclaration [17520,35146]
at 1
===
insert-node
---
TYPE_DECLARATION_KIND: class [19866,19871]
to
TypeDeclaration [17520,35146]
at 2
===
insert-node
---
SimpleName: GraphDatabaseFacade [19872,19891]
to
TypeDeclaration [17520,35146]
at 3
===
insert-node
---
MethodDeclaration [28224,28522]
to
TypeDeclaration [17520,35146]
at 41
===
insert-node
---
FieldDeclaration [38377,38499]
to
TypeDeclaration [36295,43716]
at 4
===
insert-node
---
MethodDeclaration [39779,40565]
to
TypeDeclaration [36295,43716]
at 8
===
insert-node
---
FieldDeclaration [48694,48835]
to
TypeDeclaration [45342,57216]
at 6
===
insert-node
---
TYPE_DECLARATION_KIND: class [62445,62450]
to
TypeDeclaration [58989,70242]
at 1
===
insert-node
---
SimpleName: SlaveLocksClient [62451,62467]
to
TypeDeclaration [58989,70242]
at 2
===
insert-node
---
Modifier: public [75632,75638]
to
TypeDeclaration [72507,91969]
at 0
===
insert-node
---
TYPE_DECLARATION_KIND: class [75639,75644]
to
TypeDeclaration [72507,91969]
at 1
===
insert-node
---
SimpleName: HighAvailabilityMemberStateMachineTest [75645,75683]
to
TypeDeclaration [72507,91969]
at 2
===
insert-node
---
TagElement [1424,1873]
to
Javadoc [1416,1878]
at 0
===
insert-node
---
Modifier: public [1919,1925]
to
TypeDeclaration [1919,2092]
at 0
===
insert-node
---
TYPE_DECLARATION_KIND: class [1926,1931]
to
TypeDeclaration [1919,2092]
at 1
===
insert-node
---
SimpleName: UnavailableException [1932,1952]
to
TypeDeclaration [1919,2092]
at 2
===
move-tree
---
SimpleType [8118,8127]
    SimpleName: Exception [8118,8127]
to
TypeDeclaration [1919,2092]
at 3
===
insert-node
---
MethodDeclaration [1987,2085]
to
TypeDeclaration [1919,2092]
at 4
===
insert-node
---
Modifier: public [2606,2612]
to
MethodDeclaration [2606,3738]
at 0
===
insert-node
---
Modifier: static [2613,2619]
to
MethodDeclaration [2606,3738]
at 1
===
move-tree
---
SimpleType [2430,2453]
    SimpleName: AvailabilityRequirement [2430,2453]
to
MethodDeclaration [2606,3738]
at 2
===
insert-node
---
SimpleName: availabilityRequirement [2644,2667]
to
MethodDeclaration [2606,3738]
at 3
===
move-tree
---
SingleVariableDeclaration [2479,2515]
    Modifier: final [2479,2484]
    SimpleType [2485,2491]
        SimpleName: String [2485,2491]
    SimpleName: descriptionWhenBlocking [2492,2515]
to
MethodDeclaration [2606,3738]
at 4
===
insert-node
---
Block [2713,3738]
to
MethodDeclaration [2606,3738]
at 5
===
insert-node
---
Modifier: private [3746,3753]
to
FieldDeclaration [3746,3816]
at 0
===
insert-node
---
Modifier: final [3754,3759]
to
FieldDeclaration [3746,3816]
at 1
===
move-tree
---
SimpleType [2849,2862]
    SimpleName: AtomicInteger [2849,2862]
to
FieldDeclaration [3746,3816]
at 2
===
insert-node
---
VariableDeclarationFragment [3774,3815]
to
FieldDeclaration [3746,3816]
at 3
===
insert-node
---
Modifier: private [3822,3829]
to
FieldDeclaration [3822,3916]
at 0
===
insert-node
---
Modifier: final [3830,3835]
to
FieldDeclaration [3822,3916]
at 1
===
move-tree
---
ParameterizedType [2893,2922]
    SimpleType [2893,2897]
        SimpleName: List [2893,2897]
    SimpleType [2898,2921]
        SimpleName: AvailabilityRequirement [2898,2921]
to
FieldDeclaration [3822,3916]
at 2
===
insert-tree
---
VariableDeclarationFragment [3865,3915]
    SimpleName: blockingRequirements [3865,3885]
    ClassInstanceCreation [3888,3915]
        ParameterizedType [3892,3913]
            SimpleType [3892,3911]
                SimpleName: CopyOnWriteArraySet [3892,3911]
to
FieldDeclaration [3822,3916]
at 3
===
insert-tree
---
Javadoc [4202,4371]
    TagElement [4214,4304]
        TextElement: Indicate a requirement that must be fulfilled before the database is considered available. [4214,4304]
    TagElement [4321,4362]
        SimpleName: requirement [4328,4339]
        TextElement:  the requirement object [4339,4362]
to
MethodDeclaration [4749,5182]
at 0
===
update-node
---
SimpleName: shutdown [4761,4769]
replace shutdown by require
===
move-tree
---
SingleVariableDeclaration [3285,3326]
    SimpleType [3285,3308]
        SimpleName: AvailabilityRequirement [3285,3308]
    SimpleName: requirementNotMet [3309,3326]
to
MethodDeclaration [4749,5182]
at 4
===
insert-node
---
Block [4441,5063]
to
MethodDeclaration [4749,5182]
at 5
===
insert-tree
---
Javadoc [5071,5197]
    TagElement [5083,5130]
        TextElement: Indicate that a requirement has been fulfilled. [5083,5130]
    TagElement [5147,5188]
        SimpleName: requirement [5154,5165]
        TextElement:  the requirement object [5165,5188]
to
MethodDeclaration [3988,4741]
at 0
===
update-node
---
SimpleName: grant [4000,4005]
replace grant by fulfill
===
insert-node
---
Block [5250,5873]
to
MethodDeclaration [3988,4741]
at 5
===
insert-tree
---
Javadoc [5881,6003]
    TagElement [5893,5994]
        TextElement: Shutdown the guard. After this method is invoked, the database will always be considered unavailable. [5893,5994]
to
MethodDeclaration [3267,3980]
at 0
===
update-node
---
SimpleName: deny [3279,3283]
replace deny by shutdown
===
insert-node
---
Block [6037,6630]
to
MethodDeclaration [3267,3980]
at 4
===
insert-tree
---
Javadoc [7064,7309]
    TagElement [7076,7135]
        TextElement: Check if the database is available for transactions to use. [7076,7135]
    TagElement [7152,7190]
        SimpleName: millis [7159,7165]
        TextElement:  to wait for availability [7165,7190]
    TagElement [7199,7300]
        TextElement:  true if there are no requirements waiting to be fulfilled and the guard has not been shutdown [7206,7300]
to
MethodDeclaration [7064,7436]
at 0
===
insert-node
---
Modifier: public [7315,7321]
to
MethodDeclaration [7064,7436]
at 1
===
insert-node
---
PrimitiveType: boolean [7322,7329]
to
MethodDeclaration [7064,7436]
at 2
===
insert-node
---
SimpleName: isAvailable [7330,7341]
to
MethodDeclaration [7064,7436]
at 3
===
move-tree
---
SingleVariableDeclaration [5911,5922]
    PrimitiveType: long [5911,5915]
    SimpleName: millis [5916,5922]
to
MethodDeclaration [7064,7436]
at 4
===
move-tree
---
Block [5930,5988]
    ReturnStatement [5941,5981]
        FieldAccess [5948,5980]
            MethodInvocation [5948,5970]
                SimpleName: availability [5948,5960]
                METHOD_INVOCATION_ARGUMENTS [5962,5968]
                    SimpleName: millis [5962,5968]
            SimpleName: available [5971,5980]
to
MethodDeclaration [7064,7436]
at 5
===
insert-tree
---
Javadoc [7444,7668]
    TagElement [7456,7494]
        TextElement: Await the database becoming available. [7456,7494]
    TagElement [7511,7549]
        SimpleName: millis [7518,7524]
        TextElement:  to wait for availability [7524,7549]
    TagElement [7558,7659]
        SimpleName: UnavailableException [7566,7586]
        TextElement:  thrown when the timeout has been exceeded or the guard has been shutdown [7586,7659]
to
MethodDeclaration [7444,8294]
at 0
===
insert-node
---
Modifier: public [7674,7680]
to
MethodDeclaration [7444,8294]
at 1
===
insert-node
---
PrimitiveType: void [7681,7685]
to
MethodDeclaration [7444,8294]
at 2
===
insert-node
---
SimpleName: await [7686,7691]
to
MethodDeclaration [7444,8294]
at 3
===
move-tree
---
SingleVariableDeclaration [7188,7199]
    PrimitiveType: long [7188,7192]
    SimpleName: millis [7193,7199]
to
MethodDeclaration [7444,8294]
at 4
===
insert-tree
---
SimpleType [7714,7734]
    SimpleName: UnavailableException [7714,7734]
to
MethodDeclaration [7444,8294]
at 5
===
insert-node
---
Block [7740,8294]
to
MethodDeclaration [7444,8294]
at 6
===
insert-node
---
Modifier: private [8302,8309]
to
MethodDeclaration [8302,8664]
at 0
===
insert-tree
---
SimpleType [8310,8322]
    SimpleName: Availability [8310,8322]
to
MethodDeclaration [8302,8664]
at 1
===
insert-node
---
SimpleName: availability [8323,8335]
to
MethodDeclaration [8302,8664]
at 2
===
insert-node
---
Block [8343,8664]
to
MethodDeclaration [8302,8664]
at 3
===
insert-node
---
Modifier: private [8672,8679]
to
MethodDeclaration [8672,9386]
at 0
===
move-tree
---
SimpleType [6004,6016]
    SimpleName: Availability [6004,6016]
to
MethodDeclaration [8672,9386]
at 1
===
insert-node
---
SimpleName: availability [8693,8705]
to
MethodDeclaration [8672,9386]
at 2
===
move-tree
---
SingleVariableDeclaration [6031,6042]
    PrimitiveType: long [6031,6035]
    SimpleName: millis [6036,6042]
to
MethodDeclaration [8672,9386]
at 3
===
insert-node
---
Block [8726,9386]
to
MethodDeclaration [8672,9386]
at 4
===
insert-tree
---
Javadoc [9394,9550]
    TagElement [9406,9449]
        TextElement: Add a listener for changes to availability. [9406,9449]
    TagElement [9466,9541]
        SimpleName: listener [9473,9481]
        TextElement:  the listener to receive callbacks when availability changes [9481,9541]
to
MethodDeclaration [8267,8404]
at 0
===
insert-tree
---
Javadoc [9701,9823]
    TagElement [9713,9759]
        TextElement: Remove a listener for changes to availability. [9713,9759]
    TagElement [9776,9814]
        SimpleName: listener [9783,9791]
        TextElement:  the listener to remove [9791,9814]
to
MethodDeclaration [8412,8555]
at 0
===
insert-tree
---
Javadoc [9980,10078]
    TagElement [9992,10069]
        TextElement:  a textual description of what components, if any, are blocking access [9999,10069]
to
MethodDeclaration [9980,10459]
at 0
===
insert-node
---
Modifier: public [10084,10090]
to
MethodDeclaration [9980,10459]
at 1
===
move-tree
---
SimpleType [8661,8667]
    SimpleName: String [8661,8667]
to
MethodDeclaration [9980,10459]
at 2
===
insert-node
---
SimpleName: describeWhoIsBlocking [10098,10119]
to
MethodDeclaration [9980,10459]
at 3
===
insert-node
---
Block [10127,10459]
to
MethodDeclaration [9980,10459]
at 4
===
insert-node
---
Modifier: private [12603,12610]
to
FieldDeclaration [12603,12723]
at 0
===
insert-node
---
Modifier: static [12611,12617]
to
FieldDeclaration [12603,12723]
at 1
===
insert-node
---
Modifier: final [12618,12623]
to
FieldDeclaration [12603,12723]
at 2
===
move-tree
---
SimpleType [4007,4030]
    SimpleName: AvailabilityRequirement [4007,4030]
to
FieldDeclaration [12603,12723]
at 3
===
insert-tree
---
VariableDeclarationFragment [12648,12722]
    SimpleName: AVAILABILITY_REQUIREMENT [12648,12672]
    MethodInvocation [12675,12722]
        SimpleName: availabilityRequirement [12675,12698]
        METHOD_INVOCATION_ARGUMENTS [12700,12720]
            StringLiteral: "Database available" [12700,12720]
to
FieldDeclaration [12603,12723]
at 4
===
insert-node
---
Modifier: private [28224,28231]
to
MethodDeclaration [28224,28522]
at 0
===
insert-node
---
PrimitiveType: void [28232,28236]
to
MethodDeclaration [28224,28522]
at 1
===
insert-node
---
SimpleName: checkAvailability [28237,28254]
to
MethodDeclaration [28224,28522]
at 2
===
insert-node
---
Block [28262,28522]
to
MethodDeclaration [28224,28522]
at 3
===
insert-node
---
Modifier: static [38257,38263]
to
FieldDeclaration [36338,36581]
at 1
===
insert-node
---
Modifier: private [38377,38384]
to
FieldDeclaration [38377,38499]
at 0
===
insert-node
---
Modifier: static [38385,38391]
to
FieldDeclaration [38377,38499]
at 1
===
insert-node
---
Modifier: final [38392,38397]
to
FieldDeclaration [38377,38499]
at 2
===
move-tree
---
SimpleType [10949,10990]
    QualifiedName: AvailabilityGuard.AvailabilityRequirement [10949,10990]
to
FieldDeclaration [38377,38499]
at 3
===
insert-tree
---
VariableDeclarationFragment [38440,38498]
    SimpleName: REQUIREMENT_2 [38440,38453]
    MethodInvocation [38456,38498]
        SimpleName: availabilityRequirement [38456,38479]
        METHOD_INVOCATION_ARGUMENTS [38481,38496]
            StringLiteral: "Requirement 2" [38481,38496]
to
FieldDeclaration [38377,38499]
at 4
===
move-tree
---
MarkerAnnotation [37024,37029]
    SimpleName: Test [37025,37029]
to
MethodDeclaration [36585,37016]
at 0
===
move-tree
---
SimpleType [37125,37134]
    SimpleName: Exception [37125,37134]
to
MethodDeclaration [36585,37016]
at 5
===
update-node
---
SimpleName: givenAccessGuardWith2ConditionsWhenGrantOnceAndAwaitThenTimeoutAndReturnFalse [37674,37751]
replace givenAccessGuardWith2ConditionsWhenGrantOnceAndAwaitThenTimeoutAndReturnFalse by givenAccessGuardWith2ConditionsWhenAwaitThenActuallyWaitGivenTimeout
===
move-tree
---
MarkerAnnotation [36585,36590]
    SimpleName: Test [36586,36590]
to
MethodDeclaration [39779,40565]
at 0
===
insert-node
---
Modifier: public [39790,39796]
to
MethodDeclaration [39779,40565]
at 1
===
insert-node
---
PrimitiveType: void [39797,39801]
to
MethodDeclaration [39779,40565]
at 2
===
insert-node
---
SimpleName: givenAccessGuardWith2ConditionsWhenGrantOnceAndAwaitThenTimeoutAndReturnFalse [39802,39879]
to
MethodDeclaration [39779,40565]
at 3
===
move-tree
---
SimpleType [36683,36692]
    SimpleName: Exception [36683,36692]
to
MethodDeclaration [39779,40565]
at 4
===
insert-node
---
Block [39904,40565]
to
MethodDeclaration [39779,40565]
at 5
===
update-node
---
SimpleName: givenAccessGuardWith2ConditionsWhenGrantTwiceAndAwaitThenTrue [38359,38420]
replace givenAccessGuardWith2ConditionsWhenGrantTwiceAndAwaitThenTrue by givenAccessGuardWith2ConditionsWhenGrantEachAndAwaitThenTrue
===
insert-node
---
Modifier: public [48694,48700]
to
FieldDeclaration [48694,48835]
at 0
===
insert-node
---
Modifier: static [48701,48707]
to
FieldDeclaration [48694,48835]
at 1
===
insert-node
---
Modifier: final [48708,48713]
to
FieldDeclaration [48694,48835]
at 2
===
move-tree
---
SimpleType [45758,45799]
    QualifiedName: AvailabilityGuard.AvailabilityRequirement [45758,45799]
to
FieldDeclaration [48694,48835]
at 3
===
insert-tree
---
VariableDeclarationFragment [48738,48834]
    SimpleName: AVAILABILITY_REQUIREMENT [48738,48762]
    MethodInvocation [48765,48834]
        SimpleName: availabilityRequirement [48765,48788]
        METHOD_INVOCATION_ARGUMENTS [48790,48832]
            StringLiteral: "High Availability member state not ready" [48790,48832]
to
FieldDeclaration [48694,48835]
at 4
===
insert-node
---
TextElement: The availability guard ensures that the database will only take calls when it is in an ok state. [1424,1520]
to
TagElement [1424,1873]
at 0
===
insert-node
---
TextElement: It tracks a set of requirements (added via  [1525,1568]
to
TagElement [1424,1873]
at 1
===
insert-node
---
TagElement [1568,1600]
to
TagElement [1424,1873]
at 2
===
insert-node
---
TextElement: ) that must all be marked [1600,1625]
to
TagElement [1424,1873]
at 3
===
insert-node
---
TextElement: as fulfilled (using  [1630,1650]
to
TagElement [1424,1873]
at 4
===
insert-tree
---
TagElement [1650,1674]
    MethodRef [1657,1673]
        SimpleName: fulfill [1658,1665]
        MethodRefParameter [1666,1672]
            SimpleType [1666,1672]
                SimpleName: Object [1666,1672]
to
TagElement [1424,1873]
at 5
===
insert-node
---
TextElement: ) before the database is considered available again. [1674,1726]
to
TagElement [1424,1873]
at 6
===
insert-node
---
TextElement: Consumers determine if it is ok to call the database using  [1731,1790]
to
TagElement [1424,1873]
at 7
===
insert-tree
---
TagElement [1790,1812]
    MethodRef [1797,1811]
        SimpleName: isAvailable [1798,1809]
to
TagElement [1424,1873]
at 8
===
insert-node
---
TextElement: , [1812,1813]
to
TagElement [1424,1873]
at 9
===
insert-node
---
TextElement: or await availability using  [1818,1846]
to
TagElement [1424,1873]
at 10
===
move-tree
---
TagElement [1573,1599]
    MethodRef [1580,1598]
        SimpleName: isAvailable [1581,1592]
        MethodRefParameter [1593,1597]
            PrimitiveType: long [1593,1597]
to
TagElement [1424,1873]
at 11
===
insert-node
---
TextElement: . [1872,1873]
to
TagElement [1424,1873]
at 12
===
insert-node
---
Modifier: public [1987,1993]
to
MethodDeclaration [1987,2085]
at 0
===
insert-node
---
SimpleName: UnavailableException [1994,2014]
to
MethodDeclaration [1987,2085]
at 1
===
insert-node
---
SingleVariableDeclaration [2016,2030]
to
MethodDeclaration [1987,2085]
at 2
===
insert-tree
---
Block [2042,2085]
    SuperConstructorInvocation [2057,2074]
        SimpleName: message [2064,2071]
to
MethodDeclaration [1987,2085]
at 3
===
insert-node
---
ReturnStatement [2724,3731]
to
Block [2713,3738]
at 0
===
insert-node
---
SimpleName: requirementCount [3774,3790]
to
VariableDeclarationFragment [3774,3815]
at 0
===
move-tree
---
ClassInstanceCreation [3216,3251]
    SimpleType [3220,3233]
        SimpleName: AtomicInteger [3220,3233]
    SimpleName: conditionCount [3235,3249]
to
VariableDeclarationFragment [3774,3815]
at 1
===
update-node
---
SimpleName: requirementNotMet [3309,3326]
replace requirementNotMet by requirement
===
insert-node
---
IfStatement [4452,4542]
to
Block [4441,5063]
at 0
===
insert-node
---
SynchronizedStatement [4554,5056]
to
Block [4441,5063]
at 1
===
insert-tree
---
SimpleType [5224,5230]
    SimpleName: Object [5224,5230]
to
SingleVariableDeclaration [4007,4048]
at 0
===
update-node
---
SimpleName: requirementNowMet [4031,4048]
replace requirementNowMet by requirement
===
insert-node
---
IfStatement [5261,5354]
to
Block [5250,5873]
at 0
===
insert-node
---
SynchronizedStatement [5366,5866]
to
Block [5250,5873]
at 1
===
insert-node
---
SynchronizedStatement [6048,6623]
to
Block [6037,6630]
at 0
===
move-tree
---
VariableDeclarationStatement [7270,7321]
    SimpleType [7270,7282]
        SimpleName: Availability [7270,7282]
    VariableDeclarationFragment [7283,7320]
        SimpleName: availability [7283,7295]
        MethodInvocation [7298,7320]
            SimpleName: availability [7298,7310]
            METHOD_INVOCATION_ARGUMENTS [7312,7318]
                SimpleName: millis [7312,7318]
to
Block [7740,8294]
at 0
===
insert-tree
---
IfStatement [7812,7900]
    InfixExpression [7817,7855]
        SimpleName: availability [7817,7829]
        INFIX_EXPRESSION_OPERATOR: == [7830,7832]
        QualifiedName: Availability.AVAILABLE [7833,7855]
    Block [7867,7900]
        ReturnStatement [7882,7889]
to
Block [7740,8294]
at 1
===
move-tree
---
VariableDeclarationStatement [7456,7789]
    SimpleType [7456,7462]
        SimpleName: String [7456,7462]
    VariableDeclarationFragment [7463,7788]
        SimpleName: description [7463,7474]
        ConditionalExpression [7477,7788]
            QualifiedName: availability.temporarily [7477,7501]
            InfixExpression [7529,7709]
                StringLiteral: "Timeout waiting for database to become available and allow new transactions. Waited " [7529,7615]
                INFIX_EXPRESSION_OPERATOR: + [7616,7617]
                MethodInvocation [7651,7676]
                    METHOD_INVOCATION_RECEIVER [7651,7657]
                        SimpleName: Format [7651,7657]
                    SimpleName: duration [7658,7666]
                    METHOD_INVOCATION_ARGUMENTS [7668,7674]
                        SimpleName: millis [7668,7674]
                StringLiteral: ". " [7679,7683]
                MethodInvocation [7686,7709]
                    SimpleName: describeWhoIsBlocking [7686,7707]
            StringLiteral: "Database not available because it's shutting down" [7737,7788]
to
Block [7740,8294]
at 2
===
insert-tree
---
ThrowStatement [8241,8287]
    ClassInstanceCreation [8247,8286]
        SimpleType [8251,8271]
            SimpleName: UnavailableException [8251,8271]
        SimpleName: description [8273,8284]
to
Block [7740,8294]
at 3
===
insert-tree
---
IfStatement [8354,8442]
    MethodInvocation [8359,8375]
        METHOD_INVOCATION_RECEIVER [8359,8369]
            SimpleName: isShutdown [8359,8369]
        SimpleName: get [8370,8373]
    Block [8387,8442]
        ReturnStatement [8402,8431]
            QualifiedName: Availability.SHUTDOWN [8409,8430]
to
Block [8343,8664]
at 0
===
insert-tree
---
VariableDeclarationStatement [8454,8489]
    PrimitiveType: int [8454,8457]
    VariableDeclarationFragment [8458,8488]
        SimpleName: count [8458,8463]
        MethodInvocation [8466,8488]
            METHOD_INVOCATION_RECEIVER [8466,8482]
                SimpleName: requirementCount [8466,8482]
            SimpleName: get [8483,8486]
to
Block [8343,8664]
at 1
===
insert-node
---
IfStatement [8499,8582]
to
Block [8343,8664]
at 2
===
insert-tree
---
AssertStatement [8594,8613]
    ParenthesizedExpression [8601,8612]
        InfixExpression [8602,8611]
            SimpleName: count [8602,8607]
            INFIX_EXPRESSION_OPERATOR: > [8608,8609]
            NumberLiteral: 0 [8610,8611]
to
Block [8343,8664]
at 3
===
move-tree
---
ReturnStatement [6234,6266]
    QualifiedName: Availability.UNAVAILABLE [6241,6265]
to
Block [8343,8664]
at 4
===
insert-tree
---
VariableDeclarationStatement [8737,8780]
    SimpleType [8737,8749]
        SimpleName: Availability [8737,8749]
    VariableDeclarationFragment [8750,8779]
        SimpleName: availability [8750,8762]
        MethodInvocation [8765,8779]
            SimpleName: availability [8765,8777]
to
Block [8726,9386]
at 0
===
insert-tree
---
IfStatement [8790,8893]
    InfixExpression [8795,8835]
        SimpleName: availability [8795,8807]
        INFIX_EXPRESSION_OPERATOR: != [8808,8810]
        QualifiedName: Availability.UNAVAILABLE [8811,8835]
    Block [8847,8893]
        ReturnStatement [8862,8882]
            SimpleName: availability [8869,8881]
to
Block [8726,9386]
at 1
===
insert-node
---
VariableDeclarationStatement [8905,8955]
to
Block [8726,9386]
at 2
===
insert-node
---
DoStatement [8965,9347]
to
Block [8726,9386]
at 3
===
insert-tree
---
ReturnStatement [9359,9379]
    SimpleName: availability [9366,9378]
to
Block [8726,9386]
at 4
===
insert-node
---
IfStatement [10138,10410]
to
Block [10127,10459]
at 0
===
move-tree
---
ReturnStatement [8969,9001]
    StringLiteral: "No blocking components" [8976,9000]
to
Block [10127,10459]
at 1
===
insert-node
---
TryStatement [28273,28515]
to
Block [28262,28522]
at 0
===
update-node
---
SimpleName: REQUIREMENT [36394,36405]
replace REQUIREMENT by REQUIREMENT_1
===
insert-tree
---
MethodInvocation [38328,38370]
    SimpleName: availabilityRequirement [38328,38351]
    METHOD_INVOCATION_ARGUMENTS [38353,38368]
        StringLiteral: "Requirement 1" [38353,38368]
to
VariableDeclarationFragment [36394,36405]
at 1
===
move-tree
---
VariableDeclarationStatement [37169,37217]
    SimpleType [37169,37181]
        SimpleName: TickingClock [37169,37181]
    VariableDeclarationFragment [37182,37216]
        SimpleName: clock [37182,37187]
        ClassInstanceCreation [37190,37216]
            SimpleType [37194,37206]
                SimpleName: TickingClock [37194,37206]
            NumberLiteral: 0 [37208,37209]
            NumberLiteral: 100 [37211,37214]
to
Block [36698,37016]
at 0
===
move-tree
---
VariableDeclarationStatement [37227,37299]
    SimpleType [37227,37244]
        SimpleName: AvailabilityGuard [37227,37244]
    VariableDeclarationFragment [37245,37298]
        SimpleName: availabilityGuard [37245,37262]
        ClassInstanceCreation [37265,37298]
            SimpleType [37269,37286]
                SimpleName: AvailabilityGuard [37269,37286]
            SimpleName: clock [37288,37293]
            NumberLiteral: 2 [37295,37296]
to
Block [36698,37016]
at 1
===
insert-tree
---
ExpressionStatement [38786,38829]
    MethodInvocation [38786,38828]
        METHOD_INVOCATION_RECEIVER [38786,38803]
            SimpleName: availabilityGuard [38786,38803]
        SimpleName: require [38804,38811]
        METHOD_INVOCATION_ARGUMENTS [38813,38826]
            SimpleName: REQUIREMENT_1 [38813,38826]
to
Block [36698,37016]
at 2
===
insert-tree
---
ExpressionStatement [38839,38882]
    MethodInvocation [38839,38881]
        METHOD_INVOCATION_RECEIVER [38839,38856]
            SimpleName: availabilityGuard [38839,38856]
        SimpleName: require [38857,38864]
        METHOD_INVOCATION_ARGUMENTS [38866,38879]
            SimpleName: REQUIREMENT_2 [38866,38879]
to
Block [36698,37016]
at 3
===
move-tree
---
ExpressionStatement [37546,37585]
    MethodInvocation [37546,37584]
        SimpleName: assertThat [37546,37556]
        METHOD_INVOCATION_ARGUMENTS [37558,37582]
            SimpleName: result [37558,37564]
            MethodInvocation [37566,37582]
                SimpleName: equalTo [37566,37573]
                METHOD_INVOCATION_ARGUMENTS [37575,37580]
                    BooleanLiteral: false [37575,37580]
to
Block [36698,37016]
at 7
===
insert-tree
---
ExpressionStatement [39331,39374]
    MethodInvocation [39331,39373]
        METHOD_INVOCATION_RECEIVER [39331,39348]
            SimpleName: availabilityGuard [39331,39348]
        SimpleName: require [39349,39356]
        METHOD_INVOCATION_ARGUMENTS [39358,39371]
            SimpleName: REQUIREMENT_1 [39358,39371]
to
Block [37776,38328]
at 2
===
move-tree
---
VariableDeclarationStatement [37328,37367]
    PrimitiveType: long [37328,37332]
    VariableDeclarationFragment [37333,37366]
        SimpleName: start [37333,37338]
        MethodInvocation [37341,37366]
            METHOD_INVOCATION_RECEIVER [37341,37346]
                SimpleName: clock [37341,37346]
            SimpleName: currentTimeMillis [37347,37364]
to
Block [37776,38328]
at 5
===
move-tree
---
VariableDeclarationStatement [36727,36775]
    SimpleType [36727,36739]
        SimpleName: TickingClock [36727,36739]
    VariableDeclarationFragment [36740,36774]
        SimpleName: clock [36740,36745]
        ClassInstanceCreation [36748,36774]
            SimpleType [36752,36764]
                SimpleName: TickingClock [36752,36764]
            NumberLiteral: 0 [36766,36767]
            NumberLiteral: 100 [36769,36772]
to
Block [39904,40565]
at 0
===
move-tree
---
VariableDeclarationStatement [38532,38604]
    SimpleType [38532,38549]
        SimpleName: AvailabilityGuard [38532,38549]
    VariableDeclarationFragment [38550,38603]
        SimpleName: availabilityGuard [38550,38567]
        ClassInstanceCreation [38570,38603]
            SimpleType [38574,38591]
                SimpleName: AvailabilityGuard [38574,38591]
            SimpleName: clock [38593,38598]
            NumberLiteral: 2 [38600,38601]
to
Block [39904,40565]
at 1
===
insert-node
---
ExpressionStatement [40070,40113]
to
Block [39904,40565]
at 2
===
insert-node
---
ExpressionStatement [40123,40166]
to
Block [39904,40565]
at 3
===
move-tree
---
VariableDeclarationStatement [37964,38003]
    PrimitiveType: long [37964,37968]
    VariableDeclarationFragment [37969,38002]
        SimpleName: start [37969,37974]
        MethodInvocation [37977,38002]
            METHOD_INVOCATION_RECEIVER [37977,37982]
                SimpleName: clock [37977,37982]
            SimpleName: currentTimeMillis [37983,38000]
to
Block [39904,40565]
at 4
===
insert-tree
---
ExpressionStatement [40244,40287]
    MethodInvocation [40244,40286]
        METHOD_INVOCATION_RECEIVER [40244,40261]
            SimpleName: availabilityGuard [40244,40261]
        SimpleName: fulfill [40262,40269]
        METHOD_INVOCATION_ARGUMENTS [40271,40284]
            SimpleName: REQUIREMENT_1 [40271,40284]
to
Block [39904,40565]
at 5
===
move-tree
---
VariableDeclarationStatement [37377,37432]
    PrimitiveType: boolean [37377,37384]
    VariableDeclarationFragment [37385,37431]
        SimpleName: result [37385,37391]
        MethodInvocation [37394,37431]
            METHOD_INVOCATION_RECEIVER [37394,37411]
                SimpleName: availabilityGuard [37394,37411]
            SimpleName: isAvailable [37412,37423]
            METHOD_INVOCATION_ARGUMENTS [37425,37429]
                NumberLiteral: 1000 [37425,37429]
to
Block [39904,40565]
at 6
===
move-tree
---
VariableDeclarationStatement [37442,37479]
    PrimitiveType: long [37442,37446]
    VariableDeclarationFragment [37447,37478]
        SimpleName: end [37447,37450]
        MethodInvocation [37453,37478]
            METHOD_INVOCATION_RECEIVER [37453,37458]
                SimpleName: clock [37453,37458]
            SimpleName: currentTimeMillis [37459,37476]
to
Block [39904,40565]
at 7
===
move-tree
---
VariableDeclarationStatement [37508,37536]
    PrimitiveType: long [37508,37512]
    VariableDeclarationFragment [37513,37535]
        SimpleName: waitTime [37513,37521]
        InfixExpression [37524,37535]
            SimpleName: end [37524,37527]
            INFIX_EXPRESSION_OPERATOR: - [37528,37529]
            SimpleName: start [37530,37535]
to
Block [39904,40565]
at 8
===
move-tree
---
ExpressionStatement [36970,37009]
    MethodInvocation [36970,37008]
        SimpleName: assertThat [36970,36980]
        METHOD_INVOCATION_ARGUMENTS [36982,37006]
            SimpleName: result [36982,36988]
            MethodInvocation [36990,37006]
                SimpleName: equalTo [36990,36997]
                METHOD_INVOCATION_ARGUMENTS [36999,37004]
                    BooleanLiteral: false [36999,37004]
to
Block [39904,40565]
at 9
===
move-tree
---
ExpressionStatement [37595,37636]
    MethodInvocation [37595,37635]
        SimpleName: assertThat [37595,37605]
        METHOD_INVOCATION_ARGUMENTS [37607,37633]
            SimpleName: waitTime [37607,37615]
            MethodInvocation [37617,37633]
                SimpleName: equalTo [37617,37624]
                METHOD_INVOCATION_ARGUMENTS [37626,37631]
                    NumberLiteral: 1200L [37626,37631]
to
Block [39904,40565]
at 10
===
move-tree
---
VariableDeclarationStatement [36785,36857]
    SimpleType [36785,36802]
        SimpleName: AvailabilityGuard [36785,36802]
    VariableDeclarationFragment [36803,36856]
        SimpleName: availabilityGuard [36803,36820]
        ClassInstanceCreation [36823,36856]
            SimpleType [36827,36844]
                SimpleName: AvailabilityGuard [36827,36844]
            SimpleName: clock [36846,36851]
            NumberLiteral: 2 [36853,36854]
to
Block [38445,39044]
at 1
===
insert-tree
---
ExpressionStatement [40972,41015]
    MethodInvocation [40972,41014]
        METHOD_INVOCATION_RECEIVER [40972,40989]
            SimpleName: availabilityGuard [40972,40989]
        SimpleName: fulfill [40990,40997]
        METHOD_INVOCATION_ARGUMENTS [40999,41012]
            SimpleName: REQUIREMENT_1 [40999,41012]
to
Block [38445,39044]
at 4
===
insert-tree
---
ExpressionStatement [41025,41068]
    MethodInvocation [41025,41067]
        METHOD_INVOCATION_RECEIVER [41025,41042]
            SimpleName: availabilityGuard [41025,41042]
        SimpleName: fulfill [41043,41050]
        METHOD_INVOCATION_ARGUMENTS [41052,41065]
            SimpleName: REQUIREMENT_2 [41052,41065]
to
Block [38445,39044]
at 5
===
insert-node
---
ExpressionStatement [41897,41940]
to
Block [39202,39847]
at 5
===
insert-tree
---
ExpressionStatement [41950,41993]
    MethodInvocation [41950,41992]
        METHOD_INVOCATION_RECEIVER [41950,41967]
            SimpleName: availabilityGuard [41950,41967]
        SimpleName: require [41968,41975]
        METHOD_INVOCATION_ARGUMENTS [41977,41990]
            SimpleName: REQUIREMENT_2 [41977,41990]
to
Block [39202,39847]
at 6
===
insert-node
---
ExpressionStatement [42651,42694]
to
Block [40006,40765]
at 2
===
insert-tree
---
ExpressionStatement [42704,42747]
    MethodInvocation [42704,42746]
        METHOD_INVOCATION_RECEIVER [42704,42721]
            SimpleName: availabilityGuard [42704,42721]
        SimpleName: require [42722,42729]
        METHOD_INVOCATION_ARGUMENTS [42731,42744]
            SimpleName: REQUIREMENT_2 [42731,42744]
to
Block [40006,40765]
at 3
===
insert-tree
---
ExpressionStatement [43638,43681]
    MethodInvocation [43638,43680]
        METHOD_INVOCATION_RECEIVER [43638,43655]
            SimpleName: availabilityGuard [43638,43655]
        SimpleName: require [43656,43663]
        METHOD_INVOCATION_ARGUMENTS [43665,43678]
            SimpleName: REQUIREMENT_1 [43665,43678]
to
Block [40878,41680]
at 2
===
insert-tree
---
ExpressionStatement [44618,44661]
    MethodInvocation [44618,44660]
        METHOD_INVOCATION_RECEIVER [44618,44635]
            SimpleName: availabilityGuard [44618,44635]
        SimpleName: require [44636,44643]
        METHOD_INVOCATION_ARGUMENTS [44645,44658]
            SimpleName: REQUIREMENT_1 [44645,44658]
to
Block [41800,42648]
at 2
===
insert-tree
---
ExpressionStatement [45651,45694]
    MethodInvocation [45651,45693]
        METHOD_INVOCATION_RECEIVER [45651,45668]
            SimpleName: availabilityGuard [45651,45668]
        SimpleName: require [45669,45676]
        METHOD_INVOCATION_ARGUMENTS [45678,45691]
            SimpleName: REQUIREMENT_1 [45678,45691]
to
Block [42768,43198]
at 2
===
insert-node
---
SimpleName: AvailabilityRequirement [48714,48737]
to
SimpleType [45758,45799]
at 0
===
insert-node
---
TryStatement [71752,71991]
to
Block [68835,69622]
at 0
===
insert-node
---
MethodRef [1575,1599]
to
TagElement [1568,1600]
at 0
===
move-tree
---
SimpleType [48838,48844]
    SimpleName: String [48838,48844]
to
SingleVariableDeclaration [2016,2030]
at 0
===
insert-node
---
SimpleName: message [2023,2030]
to
SingleVariableDeclaration [2016,2030]
at 1
===
insert-node
---
ClassInstanceCreation [2731,3730]
to
ReturnStatement [2724,3731]
at 0
===
insert-node
---
NumberLiteral: 0 [3812,3813]
to
ClassInstanceCreation [3216,3251]
at 1
===
update-node
---
SimpleName: List [2893,2897]
replace List by Set
===
insert-node
---
PrefixExpression [4457,4497]
to
IfStatement [4452,4542]
at 0
===
move-tree
---
Block [3458,3499]
    ReturnStatement [3477,3484]
to
IfStatement [4452,4542]
at 1
===
insert-node
---
SimpleName: requirementCount [4569,4585]
to
SynchronizedStatement [4554,5056]
at 0
===
move-tree
---
Block [4777,5182]
    VariableDeclarationStatement [4788,4824]
        PrimitiveType: int [4788,4791]
        VariableDeclarationFragment [4792,4823]
            SimpleName: val [4792,4795]
            MethodInvocation [4798,4823]
                METHOD_INVOCATION_RECEIVER [4798,4807]
                    SimpleName: available [4798,4807]
                SimpleName: getAndSet [4808,4817]
                METHOD_INVOCATION_ARGUMENTS [4819,4821]
                    PrefixExpression [4819,4821]
                        PREFIX_EXPRESSION_OPERATOR: - [4819,4820]
                        NumberLiteral: 1 [4820,4821]
    IfStatement [4834,5175]
        InfixExpression [4839,4847]
            SimpleName: val [4839,4842]
            INFIX_EXPRESSION_OPERATOR: == [4843,4845]
            NumberLiteral: 0 [4846,4847]
        Block [4859,5175]
            ExpressionStatement [4874,5164]
                MethodInvocation [4874,5163]
                    SimpleName: notifyListeners [4874,4889]
                    METHOD_INVOCATION_ARGUMENTS [4891,5161]
                        SimpleName: listeners [4891,4900]
                        ClassInstanceCreation [4902,5161]
                            ParameterizedType [4906,4950]
                                SimpleType [4906,4928]
                                    QualifiedName: Listeners.Notification [4906,4928]
                                SimpleType [4929,4949]
                                    SimpleName: AvailabilityListener [4929,4949]
                            AnonymousClassDeclaration [4966,5161]
                                MethodDeclaration [4985,5146]
                                    MarkerAnnotation [4985,4994]
                                        SimpleName: Override [4986,4994]
                                    Modifier: public [5012,5018]
                                    PrimitiveType: void [5019,5023]
                                    SimpleName: notify [5024,5030]
                                    SingleVariableDeclaration [5032,5061]
                                        SimpleType [5032,5052]
                                            SimpleName: AvailabilityListener [5032,5052]
                                        SimpleName: listener [5053,5061]
                                    Block [5081,5146]
                                        ExpressionStatement [5104,5127]
                                            MethodInvocation [5104,5126]
                                                METHOD_INVOCATION_RECEIVER [5104,5112]
                                                    SimpleName: listener [5104,5112]
                                                SimpleName: unavailable [5113,5124]
to
SynchronizedStatement [4554,5056]
at 1
===
insert-node
---
PrefixExpression [5266,5309]
to
IfStatement [5261,5354]
at 0
===
insert-tree
---
Block [5321,5354]
    ReturnStatement [5336,5343]
to
IfStatement [5261,5354]
at 1
===
insert-node
---
SimpleName: requirementCount [5381,5397]
to
SynchronizedStatement [5366,5866]
at 0
===
move-tree
---
Block [4056,4741]
    VariableDeclarationStatement [4067,4075]
        PrimitiveType: int [4067,4070]
        VariableDeclarationFragment [4071,4074]
            SimpleName: val [4071,4074]
    DoStatement [4085,4286]
        Block [4097,4234]
            ExpressionStatement [4112,4134]
                Assignment [4112,4133]
                    SimpleName: val [4112,4115]
                    ASSIGNMENT_OPERATOR: = [4116,4117]
                    MethodInvocation [4118,4133]
                        METHOD_INVOCATION_RECEIVER [4118,4127]
                            SimpleName: available [4118,4127]
                        SimpleName: get [4128,4131]
            IfStatement [4150,4221]
                InfixExpression [4155,4164]
                    SimpleName: val [4155,4158]
                    INFIX_EXPRESSION_OPERATOR: == [4159,4161]
                    PrefixExpression [4162,4164]
                        PREFIX_EXPRESSION_OPERATOR: - [4162,4163]
                        NumberLiteral: 1 [4163,4164]
                Block [4180,4221]
                    ReturnStatement [4199,4206]
        PrefixExpression [4243,4283]
            PREFIX_EXPRESSION_OPERATOR: ! [4243,4244]
            MethodInvocation [4244,4283]
                METHOD_INVOCATION_RECEIVER [4244,4253]
                    SimpleName: available [4244,4253]
                SimpleName: compareAndSet [4254,4267]
                METHOD_INVOCATION_ARGUMENTS [4269,4281]
                    SimpleName: val [4269,4272]
                    InfixExpression [4274,4281]
                        SimpleName: val [4274,4277]
                        INFIX_EXPRESSION_OPERATOR: - [4278,4279]
                        NumberLiteral: 1 [4280,4281]
    AssertStatement [4298,4326]
        InfixExpression [4305,4325]
            MethodInvocation [4305,4320]
                METHOD_INVOCATION_RECEIVER [4305,4314]
                    SimpleName: available [4305,4314]
                SimpleName: get [4315,4318]
            INFIX_EXPRESSION_OPERATOR: >= [4321,4323]
            NumberLiteral: 0 [4324,4325]
    ExpressionStatement [4336,4383]
        MethodInvocation [4336,4382]
            METHOD_INVOCATION_RECEIVER [4336,4354]
                SimpleName: blockingComponents [4336,4354]
            SimpleName: remove [4355,4361]
            METHOD_INVOCATION_ARGUMENTS [4363,4380]
                SimpleName: requirementNowMet [4363,4380]
    IfStatement [4395,4734]
        InfixExpression [4400,4408]
            SimpleName: val [4400,4403]
            INFIX_EXPRESSION_OPERATOR: == [4404,4406]
            NumberLiteral: 1 [4407,4408]
        Block [4420,4734]
            ExpressionStatement [4435,4723]
                MethodInvocation [4435,4722]
                    SimpleName: notifyListeners [4435,4450]
                    METHOD_INVOCATION_ARGUMENTS [4452,4720]
                        SimpleName: listeners [4452,4461]
                        ClassInstanceCreation [4463,4720]
                            ParameterizedType [4467,4511]
                                SimpleType [4467,4489]
                                    QualifiedName: Listeners.Notification [4467,4489]
                                SimpleType [4490,4510]
                                    SimpleName: AvailabilityListener [4490,4510]
                            AnonymousClassDeclaration [4527,4720]
                                MethodDeclaration [4546,4705]
                                    MarkerAnnotation [4546,4555]
                                        SimpleName: Override [4547,4555]
                                    Modifier: public [4573,4579]
                                    PrimitiveType: void [4580,4584]
                                    SimpleName: notify [4585,4591]
                                    SingleVariableDeclaration [4593,4622]
                                        SimpleType [4593,4613]
                                            SimpleName: AvailabilityListener [4593,4613]
                                        SimpleName: listener [4614,4622]
                                    Block [4642,4705]
                                        ExpressionStatement [4665,4686]
                                            MethodInvocation [4665,4685]
                                                METHOD_INVOCATION_RECEIVER [4665,4673]
                                                    SimpleName: listener [4665,4673]
                                                SimpleName: available [4674,4683]
to
SynchronizedStatement [5366,5866]
at 1
===
insert-node
---
SimpleName: requirementCount [6063,6079]
to
SynchronizedStatement [6048,6623]
at 0
===
move-tree
---
Block [3334,3980]
    VariableDeclarationStatement [3345,3353]
        PrimitiveType: int [3345,3348]
        VariableDeclarationFragment [3349,3352]
            SimpleName: val [3349,3352]
    DoStatement [3363,3564]
        Block [3375,3512]
            ExpressionStatement [3390,3412]
                Assignment [3390,3411]
                    SimpleName: val [3390,3393]
                    ASSIGNMENT_OPERATOR: = [3394,3395]
                    MethodInvocation [3396,3411]
                        METHOD_INVOCATION_RECEIVER [3396,3405]
                            SimpleName: available [3396,3405]
                        SimpleName: get [3406,3409]
            IfStatement [3428,3499]
                InfixExpression [3433,3442]
                    SimpleName: val [3433,3436]
                    INFIX_EXPRESSION_OPERATOR: == [3437,3439]
                    PrefixExpression [3440,3442]
                        PREFIX_EXPRESSION_OPERATOR: - [3440,3441]
                        NumberLiteral: 1 [3441,3442]
                Block [3458,3499]
                    ReturnStatement [3477,3484]
        PrefixExpression [3521,3561]
            PREFIX_EXPRESSION_OPERATOR: ! [3521,3522]
            MethodInvocation [3522,3561]
                METHOD_INVOCATION_RECEIVER [3522,3531]
                    SimpleName: available [3522,3531]
                SimpleName: compareAndSet [3532,3545]
                METHOD_INVOCATION_ARGUMENTS [3547,3559]
                    SimpleName: val [3547,3550]
                    InfixExpression [3552,3559]
                        SimpleName: val [3552,3555]
                        INFIX_EXPRESSION_OPERATOR: + [3556,3557]
                        NumberLiteral: 1 [3558,3559]
    ExpressionStatement [3576,3620]
        MethodInvocation [3576,3619]
            METHOD_INVOCATION_RECEIVER [3576,3594]
                SimpleName: blockingComponents [3576,3594]
            SimpleName: add [3595,3598]
            METHOD_INVOCATION_ARGUMENTS [3600,3617]
                SimpleName: requirementNotMet [3600,3617]
    IfStatement [3632,3973]
        InfixExpression [3637,3645]
            SimpleName: val [3637,3640]
            INFIX_EXPRESSION_OPERATOR: == [3641,3643]
            NumberLiteral: 0 [3644,3645]
        Block [3657,3973]
            ExpressionStatement [3672,3962]
                MethodInvocation [3672,3961]
                    SimpleName: notifyListeners [3672,3687]
                    METHOD_INVOCATION_ARGUMENTS [3689,3959]
                        SimpleName: listeners [3689,3698]
                        ClassInstanceCreation [3700,3959]
                            ParameterizedType [3704,3748]
                                SimpleType [3704,3726]
                                    QualifiedName: Listeners.Notification [3704,3726]
                                SimpleType [3727,3747]
                                    SimpleName: AvailabilityListener [3727,3747]
                            AnonymousClassDeclaration [3764,3959]
                                MethodDeclaration [3783,3944]
                                    MarkerAnnotation [3783,3792]
                                        SimpleName: Override [3784,3792]
                                    Modifier: public [3810,3816]
                                    PrimitiveType: void [3817,3821]
                                    SimpleName: notify [3822,3828]
                                    SingleVariableDeclaration [3830,3859]
                                        SimpleType [3830,3850]
                                            SimpleName: AvailabilityListener [3830,3850]
                                        SimpleName: listener [3851,3859]
                                    Block [3879,3944]
                                        ExpressionStatement [3902,3925]
                                            MethodInvocation [3902,3924]
                                                METHOD_INVOCATION_RECEIVER [3902,3910]
                                                    SimpleName: listener [3902,3910]
                                                SimpleName: unavailable [3911,3922]
to
SynchronizedStatement [6048,6623]
at 1
===
insert-node
---
InfixExpression [7380,7428]
to
ReturnStatement [5941,5981]
at 0
===
insert-tree
---
InfixExpression [8504,8514]
    SimpleName: count [8504,8509]
    INFIX_EXPRESSION_OPERATOR: == [8510,8512]
    NumberLiteral: 0 [8513,8514]
to
IfStatement [8499,8582]
at 0
===
move-tree
---
Block [6122,6178]
    ReturnStatement [6137,6167]
        QualifiedName: Availability.AVAILABLE [6144,6166]
to
IfStatement [8499,8582]
at 1
===
insert-node
---
PrimitiveType: long [8905,8909]
to
VariableDeclarationStatement [8905,8955]
at 0
===
insert-node
---
VariableDeclarationFragment [8910,8954]
to
VariableDeclarationStatement [8905,8955]
at 1
===
move-tree
---
Block [6437,7041]
    ExpressionStatement [6456,6478]
        Assignment [6456,6477]
            SimpleName: val [6456,6459]
            ASSIGNMENT_OPERATOR: = [6460,6461]
            MethodInvocation [6462,6477]
                METHOD_INVOCATION_RECEIVER [6462,6471]
                    SimpleName: available [6462,6471]
                SimpleName: get [6472,6475]
    IfStatement [6496,6732]
        InfixExpression [6501,6509]
            SimpleName: val [6501,6504]
            INFIX_EXPRESSION_OPERATOR: == [6505,6507]
            NumberLiteral: 0 [6508,6509]
        Block [6529,6601]
            ReturnStatement [6552,6582]
                QualifiedName: Availability.AVAILABLE [6559,6581]
        IfStatement [6624,6732]
            InfixExpression [6629,6638]
                SimpleName: val [6629,6632]
                INFIX_EXPRESSION_OPERATOR: == [6633,6635]
                PrefixExpression [6636,6638]
                    PREFIX_EXPRESSION_OPERATOR: - [6636,6637]
                    NumberLiteral: 1 [6637,6638]
            Block [6658,6732]
                ReturnStatement [6681,6713]
                    QualifiedName: Availability.UNAVAILABLE [6688,6712]
    TryStatement [6752,6993]
        Block [6773,6834]
            ExpressionStatement [6796,6815]
                MethodInvocation [6796,6814]
                    METHOD_INVOCATION_RECEIVER [6796,6802]
                        SimpleName: Thread [6796,6802]
                    SimpleName: sleep [6803,6808]
                    METHOD_INVOCATION_ARGUMENTS [6810,6812]
                        NumberLiteral: 10 [6810,6812]
        CatchClause [6852,6993]
            SingleVariableDeclaration [6860,6882]
                SimpleType [6860,6880]
                    SimpleName: InterruptedException [6860,6880]
                SimpleName: e [6881,6882]
            Block [6902,6993]
                ExpressionStatement [6925,6946]
                    MethodInvocation [6925,6945]
                        METHOD_INVOCATION_RECEIVER [6925,6931]
                            SimpleName: Thread [6925,6931]
                        SimpleName: interrupted [6932,6943]
                BreakStatement [6968,6974]
    ExpressionStatement [7011,7026]
        MethodInvocation [7011,7025]
            METHOD_INVOCATION_RECEIVER [7011,7017]
                SimpleName: Thread [7011,7017]
            SimpleName: yield [7018,7023]
to
DoStatement [8965,9347]
at 0
===
insert-tree
---
InfixExpression [9265,9344]
    InfixExpression [9265,9305]
        SimpleName: availability [9265,9277]
        INFIX_EXPRESSION_OPERATOR: == [9278,9280]
        QualifiedName: Availability.UNAVAILABLE [9281,9305]
    INFIX_EXPRESSION_OPERATOR: && [9306,9308]
    InfixExpression [9309,9344]
        MethodInvocation [9309,9334]
            METHOD_INVOCATION_RECEIVER [9309,9314]
                SimpleName: clock [9309,9314]
            SimpleName: currentTimeMillis [9315,9332]
        INFIX_EXPRESSION_OPERATOR: < [9335,9336]
        SimpleName: timeout [9337,9344]
to
DoStatement [8965,9347]
at 1
===
insert-tree
---
InfixExpression [10143,10204]
    InfixExpression [10143,10174]
        MethodInvocation [10143,10170]
            METHOD_INVOCATION_RECEIVER [10143,10163]
                SimpleName: blockingRequirements [10143,10163]
            SimpleName: size [10164,10168]
        INFIX_EXPRESSION_OPERATOR: > [10171,10172]
        NumberLiteral: 0 [10173,10174]
    INFIX_EXPRESSION_OPERATOR: || [10175,10177]
    InfixExpression [10178,10204]
        MethodInvocation [10178,10200]
            METHOD_INVOCATION_RECEIVER [10178,10194]
                SimpleName: requirementCount [10178,10194]
            SimpleName: get [10195,10198]
        INFIX_EXPRESSION_OPERATOR: > [10201,10202]
        NumberLiteral: 0 [10203,10204]
to
IfStatement [10138,10410]
at 0
===
insert-node
---
Block [10216,10410]
to
IfStatement [10138,10410]
at 1
===
insert-tree
---
Block [28286,28363]
    ExpressionStatement [28301,28352]
        MethodInvocation [28301,28351]
            METHOD_INVOCATION_RECEIVER [28301,28318]
                SimpleName: availabilityGuard [28301,28318]
            SimpleName: await [28319,28324]
            METHOD_INVOCATION_ARGUMENTS [28326,28349]
                SimpleName: transactionStartTimeout [28326,28349]
to
TryStatement [28273,28515]
at 0
===
insert-node
---
CatchClause [28373,28515]
to
TryStatement [28273,28515]
at 1
===
insert-node
---
MethodInvocation [40070,40112]
to
ExpressionStatement [40070,40113]
at 0
===
insert-node
---
MethodInvocation [40123,40165]
to
ExpressionStatement [40123,40166]
at 0
===
insert-node
---
MethodInvocation [41897,41939]
to
ExpressionStatement [41897,41940]
at 0
===
insert-node
---
MethodInvocation [42651,42693]
to
ExpressionStatement [42651,42694]
at 0
===
insert-node
---
Block [71765,71850]
to
TryStatement [71752,71991]
at 0
===
insert-node
---
CatchClause [71860,71991]
to
TryStatement [71752,71991]
at 1
===
insert-node
---
SimpleName: require [1576,1583]
to
MethodRef [1575,1599]
at 0
===
insert-tree
---
MethodRefParameter [1584,1590]
    SimpleType [1584,1590]
        SimpleName: Object [1584,1590]
to
MethodRef [1575,1599]
at 1
===
insert-node
---
MethodRefParameter [1592,1598]
to
MethodRef [1575,1599]
at 2
===
move-tree
---
SimpleType [2545,2568]
    SimpleName: AvailabilityRequirement [2545,2568]
to
ClassInstanceCreation [2731,3730]
at 0
===
insert-node
---
AnonymousClassDeclaration [2770,3730]
to
ClassInstanceCreation [2731,3730]
at 1
===
insert-node
---
PREFIX_EXPRESSION_OPERATOR: ! [4457,4458]
to
PrefixExpression [4457,4497]
at 0
===
insert-node
---
MethodInvocation [4458,4497]
to
PrefixExpression [4457,4497]
at 1
===
insert-node
---
PREFIX_EXPRESSION_OPERATOR: ! [5266,5267]
to
PrefixExpression [5266,5309]
at 0
===
insert-node
---
MethodInvocation [5267,5309]
to
PrefixExpression [5266,5309]
at 1
===
insert-node
---
IfStatement [6106,6196]
to
Block [3334,3980]
at 0
===
move-tree
---
MethodInvocation [5948,5970]
    SimpleName: availability [5948,5960]
    METHOD_INVOCATION_ARGUMENTS [5962,5968]
        SimpleName: millis [5962,5968]
to
InfixExpression [7380,7428]
at 0
===
insert-node
---
INFIX_EXPRESSION_OPERATOR: == [7403,7405]
to
InfixExpression [7380,7428]
at 1
===
insert-node
---
QualifiedName: Availability.AVAILABLE [7406,7428]
to
InfixExpression [7380,7428]
at 2
===
insert-node
---
SimpleName: timeout [8910,8917]
to
VariableDeclarationFragment [8910,8954]
at 0
===
move-tree
---
InfixExpression [6379,6421]
    MethodInvocation [6379,6404]
        METHOD_INVOCATION_RECEIVER [6379,6384]
            SimpleName: clock [6379,6384]
        SimpleName: currentTimeMillis [6385,6402]
    INFIX_EXPRESSION_OPERATOR: < [6405,6406]
    InfixExpression [6407,6421]
        SimpleName: start [6407,6412]
        INFIX_EXPRESSION_OPERATOR: + [6413,6414]
        SimpleName: millis [6415,6421]
to
VariableDeclarationFragment [8910,8954]
at 1
===
insert-node
---
VariableDeclarationStatement [10231,10312]
to
Block [10216,10410]
at 0
===
insert-tree
---
ReturnStatement [10326,10399]
    InfixExpression [10333,10398]
        MethodInvocation [10333,10355]
            METHOD_INVOCATION_RECEIVER [10333,10349]
                SimpleName: requirementCount [10333,10349]
            SimpleName: get [10350,10353]
        INFIX_EXPRESSION_OPERATOR: + [10356,10357]
        StringLiteral: " reasons for blocking: " [10358,10383]
        SimpleName: causes [10386,10392]
        StringLiteral: "." [10395,10398]
to
Block [10216,10410]
at 1
===
update-node
---
SimpleName: deny [11841,11845]
replace deny by require
===
move-tree
---
METHOD_INVOCATION_RECEIVER [12258,12275]
    SimpleName: availabilityGuard [12258,12275]
to
MethodInvocation [12035,12066]
at 0
===
update-node
---
SimpleName: grant [12053,12058]
replace grant by fulfill
===
move-tree
---
METHOD_INVOCATION_RECEIVER [12035,12052]
    SimpleName: availabilityGuard [12035,12052]
to
MethodInvocation [12258,12288]
at 0
===
update-node
---
SimpleName: deny [12276,12280]
replace deny by require
===
insert-tree
---
SingleVariableDeclaration [28381,28421]
    SimpleType [28381,28419]
        QualifiedName: AvailabilityGuard.UnavailableException [28381,28419]
    SimpleName: e [28420,28421]
to
CatchClause [28373,28515]
at 0
===
insert-node
---
Block [28433,28515]
to
CatchClause [28373,28515]
at 1
===
update-node
---
SimpleName: grant [38031,38036]
replace grant by require
===
move-tree
---
METHOD_INVOCATION_RECEIVER [38633,38650]
    SimpleName: availabilityGuard [38633,38650]
to
MethodInvocation [40070,40112]
at 0
===
insert-node
---
SimpleName: require [40088,40095]
to
MethodInvocation [40070,40112]
at 1
===
insert-tree
---
METHOD_INVOCATION_ARGUMENTS [40097,40110]
    SimpleName: REQUIREMENT_1 [40097,40110]
to
MethodInvocation [40070,40112]
at 2
===
move-tree
---
METHOD_INVOCATION_RECEIVER [38680,38697]
    SimpleName: availabilityGuard [38680,38697]
to
MethodInvocation [40123,40165]
at 0
===
insert-node
---
SimpleName: require [40141,40148]
to
MethodInvocation [40123,40165]
at 1
===
insert-tree
---
METHOD_INVOCATION_ARGUMENTS [40150,40163]
    SimpleName: REQUIREMENT_2 [40150,40163]
to
MethodInvocation [40123,40165]
at 2
===
move-tree
---
METHOD_INVOCATION_RECEIVER [25041,25058]
    SimpleName: availabilityGuard [25041,25058]
to
MethodInvocation [38633,38669]
at 0
===
update-node
---
SimpleName: grant [38651,38656]
replace grant by require
===
move-tree
---
METHOD_INVOCATION_RECEIVER [39437,39454]
    SimpleName: availabilityGuard [39437,39454]
to
MethodInvocation [38680,38716]
at 0
===
update-node
---
SimpleName: grant [38698,38703]
replace grant by require
===
update-node
---
SimpleName: grant [39408,39413]
replace grant by require
===
insert-tree
---
METHOD_INVOCATION_RECEIVER [41772,41789]
    SimpleName: availabilityGuard [41772,41789]
to
MethodInvocation [39437,39473]
at 0
===
update-node
---
SimpleName: grant [39455,39460]
replace grant by require
===
move-tree
---
METHOD_INVOCATION_RECEIVER [40403,40420]
    SimpleName: availabilityGuard [40403,40420]
to
MethodInvocation [39484,39519]
at 0
===
update-node
---
SimpleName: deny [39502,39506]
replace deny by fulfill
===
move-tree
---
METHOD_INVOCATION_RECEIVER [39484,39501]
    SimpleName: availabilityGuard [39484,39501]
to
MethodInvocation [41897,41939]
at 0
===
insert-node
---
SimpleName: fulfill [41915,41922]
to
MethodInvocation [41897,41939]
at 1
===
insert-tree
---
METHOD_INVOCATION_ARGUMENTS [41924,41937]
    SimpleName: REQUIREMENT_1 [41924,41937]
to
MethodInvocation [41897,41939]
at 2
===
move-tree
---
METHOD_INVOCATION_RECEIVER [26312,26329]
    SimpleName: availabilityGuard [26312,26329]
to
MethodInvocation [42651,42693]
at 0
===
insert-node
---
SimpleName: require [42669,42676]
to
MethodInvocation [42651,42693]
at 1
===
insert-tree
---
METHOD_INVOCATION_ARGUMENTS [42678,42691]
    SimpleName: REQUIREMENT_1 [42678,42691]
to
MethodInvocation [42651,42693]
at 2
===
insert-tree
---
METHOD_INVOCATION_RECEIVER [42985,43002]
    SimpleName: availabilityGuard [42985,43002]
to
MethodInvocation [40403,40439]
at 0
===
update-node
---
SimpleName: grant [40421,40426]
replace grant by fulfill
===
update-node
---
SimpleName: grant [41579,41584]
replace grant by fulfill
===
update-node
---
SimpleName: grant [42501,42506]
replace grant by fulfill
===
update-node
---
SimpleName: deny [42548,42552]
replace deny by require
===
update-node
---
SimpleName: deny [43505,43509]
replace deny by require
===
update-node
---
SimpleName: deny [43551,43555]
replace deny by require
===
update-node
---
SimpleName: deny [47208,47212]
replace deny by require
===
update-node
---
SimpleName: grant [54102,54107]
replace grant by fulfill
===
move-tree
---
ExpressionStatement [68846,68941]
    MethodInvocation [68846,68940]
        METHOD_INVOCATION_RECEIVER [68846,68863]
            SimpleName: availabilityGuard [68846,68863]
        SimpleName: checkAvailability [68864,68881]
        METHOD_INVOCATION_ARGUMENTS [68883,68938]
            MethodInvocation [68883,68914]
                METHOD_INVOCATION_RECEIVER [68883,68889]
                    SimpleName: config [68883,68889]
                SimpleName: getAvailabilityTimeout [68890,68912]
            TypeLiteral [68916,68938]
                SimpleType [68916,68932]
                    SimpleName: RuntimeException [68916,68932]
to
Block [71765,71850]
at 0
===
insert-tree
---
SingleVariableDeclaration [71868,71908]
    SimpleType [71868,71906]
        QualifiedName: AvailabilityGuard.UnavailableException [71868,71906]
    SimpleName: e [71907,71908]
to
CatchClause [71860,71991]
at 0
===
insert-node
---
Block [71920,71991]
to
CatchClause [71860,71991]
at 1
===
update-node
---
SimpleName: deny [80862,80866]
replace deny by require
===
update-node
---
SimpleName: deny [83612,83616]
replace deny by require
===
update-node
---
SimpleName: deny [86211,86215]
replace deny by require
===
update-node
---
SimpleName: deny [88862,88866]
replace deny by require
===
move-tree
---
SimpleType [12959,12965]
    SimpleName: String [12959,12965]
to
MethodRefParameter [1592,1598]
at 0
===
move-tree
---
MethodDeclaration [2595,2724]
    MarkerAnnotation [2595,2604]
        SimpleName: Override [2596,2604]
    Modifier: public [2618,2624]
    SimpleType [2625,2631]
        SimpleName: String [2625,2631]
    SimpleName: description [2632,2643]
    Block [2659,2724]
        ReturnStatement [2678,2709]
            SimpleName: descriptionWhenBlocking [2685,2708]
to
AnonymousClassDeclaration [2770,3730]
at 0
===
insert-node
---
MethodDeclaration [2930,3531]
to
AnonymousClassDeclaration [2770,3730]
at 1
===
insert-node
---
MethodDeclaration [3547,3719]
to
AnonymousClassDeclaration [2770,3730]
at 2
===
insert-node
---
METHOD_INVOCATION_RECEIVER [4458,4478]
to
MethodInvocation [4458,4497]
at 0
===
insert-node
---
SimpleName: add [4479,4482]
to
MethodInvocation [4458,4497]
at 1
===
move-tree
---
METHOD_INVOCATION_ARGUMENTS [4819,4821]
    PrefixExpression [4819,4821]
        PREFIX_EXPRESSION_OPERATOR: - [4819,4820]
        NumberLiteral: 1 [4820,4821]
to
MethodInvocation [4458,4497]
at 2
===
insert-node
---
InfixExpression [4617,4677]
to
IfStatement [4834,5175]
at 0
===
insert-tree
---
METHOD_INVOCATION_RECEIVER [5267,5287]
    SimpleName: blockingRequirements [5267,5287]
to
MethodInvocation [5267,5309]
at 0
===
insert-node
---
SimpleName: remove [5288,5294]
to
MethodInvocation [5267,5309]
at 1
===
move-tree
---
METHOD_INVOCATION_ARGUMENTS [4269,4281]
    SimpleName: val [4269,4272]
    InfixExpression [4274,4281]
        SimpleName: val [4274,4277]
        INFIX_EXPRESSION_OPERATOR: - [4278,4279]
        NumberLiteral: 1 [4280,4281]
to
MethodInvocation [5267,5309]
at 2
===
insert-node
---
InfixExpression [5429,5489]
to
IfStatement [4395,4734]
at 0
===
move-tree
---
MethodInvocation [3396,3411]
    METHOD_INVOCATION_RECEIVER [3396,3405]
        SimpleName: available [3396,3405]
    SimpleName: get [3406,3409]
to
IfStatement [6106,6196]
at 0
===
move-tree
---
Block [4180,4221]
    ReturnStatement [4199,4206]
to
IfStatement [6106,6196]
at 1
===
insert-node
---
ParenthesizedExpression [7933,7975]
to
ConditionalExpression [7477,7788]
at 0
===
move-tree
---
INFIX_EXPRESSION_OPERATOR: + [6413,6414]
to
InfixExpression [6379,6421]
at 1
===
move-tree
---
SimpleName: millis [6415,6421]
to
InfixExpression [6379,6421]
at 2
===
insert-node
---
Assignment [9215,9244]
to
ExpressionStatement [7011,7026]
at 0
===
move-tree
---
SimpleType [8789,8795]
    SimpleName: String [8789,8795]
to
VariableDeclarationStatement [10231,10312]
at 0
===
insert-node
---
VariableDeclarationFragment [10238,10311]
to
VariableDeclarationStatement [10231,10312]
at 1
===
insert-node
---
SimpleName: AVAILABILITY_REQUIREMENT [13580,13604]
to
METHOD_INVOCATION_ARGUMENTS [11847,11851]
at 0
===
insert-node
---
SimpleName: AVAILABILITY_REQUIREMENT [13815,13839]
to
METHOD_INVOCATION_ARGUMENTS [12060,12064]
at 0
===
insert-node
---
SimpleName: AVAILABILITY_REQUIREMENT [14060,14084]
to
METHOD_INVOCATION_ARGUMENTS [12282,12286]
at 0
===
insert-node
---
ThrowStatement [28448,28504]
to
Block [28433,28515]
at 0
===
update-node
---
SimpleName: REQUIREMENT [38037,38048]
replace REQUIREMENT by REQUIREMENT_2
===
update-node
---
SimpleName: REQUIREMENT [38657,38668]
replace REQUIREMENT by REQUIREMENT_1
===
update-node
---
SimpleName: REQUIREMENT [38704,38715]
replace REQUIREMENT by REQUIREMENT_2
===
update-node
---
SimpleName: REQUIREMENT [39414,39425]
replace REQUIREMENT by REQUIREMENT_1
===
update-node
---
SimpleName: REQUIREMENT [39461,39472]
replace REQUIREMENT by REQUIREMENT_2
===
update-node
---
SimpleName: REQUIREMENT [39507,39518]
replace REQUIREMENT by REQUIREMENT_1
===
update-node
---
SimpleName: REQUIREMENT [40427,40438]
replace REQUIREMENT by REQUIREMENT_2
===
update-node
---
SimpleName: REQUIREMENT [41585,41596]
replace REQUIREMENT by REQUIREMENT_1
===
update-node
---
SimpleName: REQUIREMENT [42507,42518]
replace REQUIREMENT by REQUIREMENT_1
===
update-node
---
SimpleName: REQUIREMENT [42553,42564]
replace REQUIREMENT by REQUIREMENT_1
===
update-node
---
SimpleName: REQUIREMENT [43510,43521]
replace REQUIREMENT by REQUIREMENT_1
===
update-node
---
SimpleName: REQUIREMENT [43556,43567]
replace REQUIREMENT by REQUIREMENT_2
===
insert-node
---
SimpleName: AVAILABILITY_REQUIREMENT [50250,50274]
to
METHOD_INVOCATION_ARGUMENTS [47214,47218]
at 0
===
update-node
---
SimpleName: HighAvailabilityMemberStateMachine [54109,54143]
replace HighAvailabilityMemberStateMachine by AVAILABILITY_REQUIREMENT
===
move-tree
---
SimpleName: HighAvailabilityMemberStateMachine [54109,54143]
to
METHOD_INVOCATION_ARGUMENTS [54109,54148]
at 0
===
insert-node
---
ThrowStatement [71935,71980]
to
Block [71920,71991]
at 0
===
move-tree
---
MarkerAnnotation [12937,12946]
    SimpleName: Override [12938,12946]
to
MethodDeclaration [2930,3531]
at 0
===
insert-node
---
Modifier: public [2953,2959]
to
MethodDeclaration [2930,3531]
at 1
===
insert-node
---
PrimitiveType: boolean [2960,2967]
to
MethodDeclaration [2930,3531]
at 2
===
insert-node
---
SimpleName: equals [2968,2974]
to
MethodDeclaration [2930,3531]
at 3
===
insert-tree
---
SingleVariableDeclaration [2976,2984]
    SimpleType [2976,2982]
        SimpleName: Object [2976,2982]
    SimpleName: o [2983,2984]
to
MethodDeclaration [2930,3531]
at 4
===
insert-tree
---
Block [3000,3531]
    IfStatement [3019,3107]
        InfixExpression [3024,3033]
            ThisExpression [3024,3028]
            INFIX_EXPRESSION_OPERATOR: == [3029,3031]
            SimpleName: o [3032,3033]
        Block [3053,3107]
            ReturnStatement [3076,3088]
                BooleanLiteral: true [3083,3087]
    IfStatement [3125,3244]
        InfixExpression [3130,3169]
            InfixExpression [3130,3139]
                SimpleName: o [3130,3131]
                INFIX_EXPRESSION_OPERATOR: == [3132,3134]
                NullLiteral [3135,3139]
            INFIX_EXPRESSION_OPERATOR: || [3140,3142]
            InfixExpression [3143,3169]
                MethodInvocation [3143,3153]
                    SimpleName: getClass [3143,3151]
                INFIX_EXPRESSION_OPERATOR: != [3154,3156]
                MethodInvocation [3157,3169]
                    METHOD_INVOCATION_RECEIVER [3157,3158]
                        SimpleName: o [3157,3158]
                    SimpleName: getClass [3159,3167]
        Block [3189,3244]
            ReturnStatement [3212,3225]
                BooleanLiteral: false [3219,3224]
    VariableDeclarationStatement [3264,3323]
        SimpleType [3264,3287]
            SimpleName: AvailabilityRequirement [3264,3287]
        VariableDeclarationFragment [3288,3322]
            SimpleName: that [3288,3292]
            CastExpression [3295,3322]
                SimpleType [3296,3319]
                    SimpleName: AvailabilityRequirement [3296,3319]
                SimpleName: o [3321,3322]
    ReturnStatement [3343,3516]
        ConditionalExpression [3350,3515]
            InfixExpression [3350,3381]
                SimpleName: descriptionWhenBlocking [3350,3373]
                INFIX_EXPRESSION_OPERATOR: == [3374,3376]
                NullLiteral [3377,3381]
            InfixExpression [3409,3435]
                MethodInvocation [3409,3427]
                    METHOD_INVOCATION_RECEIVER [3409,3413]
                        SimpleName: that [3409,3413]
                    SimpleName: description [3414,3425]
                INFIX_EXPRESSION_OPERATOR: == [3428,3430]
                NullLiteral [3431,3435]
            MethodInvocation [3463,3515]
                METHOD_INVOCATION_RECEIVER [3463,3486]
                    SimpleName: descriptionWhenBlocking [3463,3486]
                SimpleName: equals [3487,3493]
                METHOD_INVOCATION_ARGUMENTS [3495,3513]
                    MethodInvocation [3495,3513]
                        METHOD_INVOCATION_RECEIVER [3495,3499]
                            SimpleName: that [3495,3499]
                        SimpleName: description [3500,3511]
to
MethodDeclaration [2930,3531]
at 5
===
move-tree
---
MarkerAnnotation [48816,48825]
    SimpleName: Override [48817,48825]
to
MethodDeclaration [3547,3719]
at 0
===
insert-node
---
Modifier: public [3570,3576]
to
MethodDeclaration [3547,3719]
at 1
===
insert-node
---
PrimitiveType: int [3577,3580]
to
MethodDeclaration [3547,3719]
at 2
===
insert-node
---
SimpleName: hashCode [3581,3589]
to
MethodDeclaration [3547,3719]
at 3
===
insert-tree
---
Block [3605,3719]
    ReturnStatement [3624,3704]
        ConditionalExpression [3631,3703]
            InfixExpression [3631,3662]
                SimpleName: descriptionWhenBlocking [3631,3654]
                INFIX_EXPRESSION_OPERATOR: != [3655,3657]
                NullLiteral [3658,3662]
            MethodInvocation [3665,3699]
                METHOD_INVOCATION_RECEIVER [3665,3688]
                    SimpleName: descriptionWhenBlocking [3665,3688]
                SimpleName: hashCode [3689,3697]
            NumberLiteral: 0 [3702,3703]
to
MethodDeclaration [3547,3719]
at 4
===
update-node
---
SimpleName: available [4798,4807]
replace available by blockingRequirements
===
move-tree
---
SimpleName: available [4798,4807]
to
METHOD_INVOCATION_RECEIVER [4458,4478]
at 0
===
insert-node
---
SimpleName: requirement [4484,4495]
to
METHOD_INVOCATION_ARGUMENTS [4819,4821]
at 0
===
move-tree
---
InfixExpression [4839,4847]
    SimpleName: val [4839,4842]
    INFIX_EXPRESSION_OPERATOR: == [4843,4845]
    NumberLiteral: 0 [4846,4847]
to
InfixExpression [4617,4677]
at 0
===
insert-node
---
INFIX_EXPRESSION_OPERATOR: && [4657,4659]
to
InfixExpression [4617,4677]
at 1
===
insert-tree
---
PrefixExpression [4660,4677]
    PREFIX_EXPRESSION_OPERATOR: ! [4660,4661]
    MethodInvocation [4661,4677]
        METHOD_INVOCATION_RECEIVER [4661,4671]
            SimpleName: isShutdown [4661,4671]
        SimpleName: get [4672,4675]
to
InfixExpression [4617,4677]
at 2
===
update-node
---
SimpleName: val [4269,4272]
replace val by requirement
===
move-tree
---
InfixExpression [4400,4408]
    SimpleName: val [4400,4403]
    INFIX_EXPRESSION_OPERATOR: == [4404,4406]
    NumberLiteral: 1 [4407,4408]
to
InfixExpression [5429,5489]
at 0
===
insert-node
---
INFIX_EXPRESSION_OPERATOR: && [5469,5471]
to
InfixExpression [5429,5489]
at 1
===
move-tree
---
PrefixExpression [4243,4283]
    PREFIX_EXPRESSION_OPERATOR: ! [4243,4244]
    MethodInvocation [4244,4283]
        METHOD_INVOCATION_RECEIVER [4244,4253]
            SimpleName: available [4244,4253]
        SimpleName: compareAndSet [4254,4267]
        METHOD_INVOCATION_ARGUMENTS [4269,4281]
            SimpleName: val [4269,4272]
            InfixExpression [4274,4281]
                SimpleName: val [4274,4277]
                INFIX_EXPRESSION_OPERATOR: - [4278,4279]
                NumberLiteral: 1 [4280,4281]
to
InfixExpression [5429,5489]
at 2
===
update-node
---
SimpleName: get [3406,3409]
replace get by getAndSet
===
insert-tree
---
METHOD_INVOCATION_ARGUMENTS [6133,6137]
    BooleanLiteral: true [6133,6137]
to
MethodInvocation [3396,3411]
at 2
===
move-tree
---
MethodInvocation [3576,3619]
    METHOD_INVOCATION_RECEIVER [3576,3594]
        SimpleName: blockingComponents [3576,3594]
    SimpleName: add [3595,3598]
    METHOD_INVOCATION_ARGUMENTS [3600,3617]
        SimpleName: requirementNotMet [3600,3617]
to
InfixExpression [3637,3645]
at 0
===
insert-node
---
InfixExpression [7934,7974]
to
ParenthesizedExpression [7933,7975]
at 0
===
update-node
---
SimpleName: Thread [7011,7017]
replace Thread by availability
===
move-tree
---
SimpleName: Thread [7011,7017]
to
Assignment [9215,9244]
at 0
===
insert-node
---
ASSIGNMENT_OPERATOR: = [9228,9229]
to
Assignment [9215,9244]
at 1
===
insert-node
---
MethodInvocation [9230,9244]
to
Assignment [9215,9244]
at 2
===
insert-node
---
SimpleName: causes [10238,10244]
to
VariableDeclarationFragment [10238,10311]
at 0
===
insert-node
---
MethodInvocation [10247,10311]
to
VariableDeclarationFragment [10238,10311]
at 1
===
insert-node
---
ClassInstanceCreation [28454,28503]
to
ThrowStatement [28448,28504]
at 0
===
update-node
---
SimpleName: deny [48103,48107]
replace deny by require
===
update-node
---
SimpleName: deny [56151,56155]
replace deny by require
===
update-node
---
SimpleName: checkAvailability [68864,68881]
replace checkAvailability by await
===
insert-node
---
ClassInstanceCreation [71941,71979]
to
ThrowStatement [71935,71980]
at 0
===
move-tree
---
MethodInvocation [4798,4823]
    METHOD_INVOCATION_RECEIVER [4798,4807]
        SimpleName: available [4798,4807]
    SimpleName: getAndSet [4808,4817]
    METHOD_INVOCATION_ARGUMENTS [4819,4821]
        PrefixExpression [4819,4821]
            PREFIX_EXPRESSION_OPERATOR: - [4819,4820]
            NumberLiteral: 1 [4820,4821]
to
InfixExpression [4839,4847]
at 0
===
move-tree
---
MethodInvocation [4118,4133]
    METHOD_INVOCATION_RECEIVER [4118,4127]
        SimpleName: available [4118,4127]
    SimpleName: get [4128,4131]
to
InfixExpression [4400,4408]
at 0
===
update-node
---
SimpleName: available [3396,3405]
replace available by isShutdown
===
update-node
---
SimpleName: requirementNotMet [3600,3617]
replace requirementNotMet by get
===
move-tree
---
SimpleName: requirementNotMet [3600,3617]
to
MethodInvocation [3576,3619]
at 1
===
insert-node
---
SimpleName: availability [7934,7946]
to
InfixExpression [7934,7974]
at 0
===
insert-node
---
INFIX_EXPRESSION_OPERATOR: == [7947,7949]
to
InfixExpression [7934,7974]
at 1
===
update-node
---
QualifiedName: availability.temporarily [7477,7501]
replace availability.temporarily by Availability.UNAVAILABLE
===
move-tree
---
QualifiedName: availability.temporarily [7477,7501]
to
InfixExpression [7934,7974]
at 2
===
update-node
---
SimpleName: yield [7018,7023]
replace yield by availability
===
move-tree
---
SimpleName: yield [7018,7023]
to
MethodInvocation [9230,9244]
at 0
===
insert-node
---
SimpleName: join [10247,10251]
to
MethodInvocation [10247,10311]
at 0
===
insert-node
---
METHOD_INVOCATION_ARGUMENTS [10253,10309]
to
MethodInvocation [10247,10311]
at 1
===
move-tree
---
SimpleType [25103,25130]
    SimpleName: TransactionFailureException [25103,25130]
to
ClassInstanceCreation [28454,28503]
at 0
===
insert-tree
---
MethodInvocation [28487,28501]
    METHOD_INVOCATION_RECEIVER [28487,28488]
        SimpleName: e [28487,28488]
    SimpleName: getMessage [28489,28499]
to
ClassInstanceCreation [28454,28503]
at 1
===
update-node
---
StringLiteral: "2 reasons for blocking: Thing, Thing." [43662,43701]
replace "2 reasons for blocking: Thing, Thing." by "2 reasons for blocking: Requirement 1, Requirement 2."
===
insert-node
---
SimpleName: AVAILABILITY_REQUIREMENT [51169,51193]
to
METHOD_INVOCATION_ARGUMENTS [48108,48112]
at 0
===
update-node
---
SimpleName: HighAvailabilityMemberStateMachine [56157,56191]
replace HighAvailabilityMemberStateMachine by AVAILABILITY_REQUIREMENT
===
move-tree
---
SimpleName: HighAvailabilityMemberStateMachine [56157,56191]
to
METHOD_INVOCATION_ARGUMENTS [56157,56196]
at 0
===
move-tree
---
SimpleType [8174,8190]
    SimpleName: RuntimeException [8174,8190]
to
ClassInstanceCreation [71941,71979]
at 0
===
insert-tree
---
MethodInvocation [71963,71977]
    METHOD_INVOCATION_RECEIVER [71963,71964]
        SimpleName: e [71963,71964]
    SimpleName: getMessage [71965,71975]
to
ClassInstanceCreation [71941,71979]
at 1
===
update-node
---
SimpleName: getAndSet [4808,4817]
replace getAndSet by getAndIncrement
===
update-node
---
SimpleName: get [4128,4131]
replace get by getAndDecrement
===
update-node
---
SimpleName: compareAndSet [4254,4267]
replace compareAndSet by get
===
update-node
---
SimpleName: val [3637,3640]
replace val by requirementCount
===
move-tree
---
SimpleName: val [3637,3640]
to
METHOD_INVOCATION_RECEIVER [3576,3594]
at 0
===
insert-node
---
StringLiteral: ", " [10253,10257]
to
METHOD_INVOCATION_ARGUMENTS [10253,10309]
at 0
===
insert-node
---
MethodInvocation [10259,10309]
to
METHOD_INVOCATION_ARGUMENTS [10253,10309]
at 1
===
update-node
---
SimpleName: val [4839,4842]
replace val by requirementCount
===
move-tree
---
SimpleName: val [4839,4842]
to
METHOD_INVOCATION_RECEIVER [4798,4807]
at 0
===
update-node
---
SimpleName: val [4400,4403]
replace val by requirementCount
===
move-tree
---
SimpleName: val [4400,4403]
to
METHOD_INVOCATION_RECEIVER [4118,4127]
at 0
===
update-node
---
SimpleName: available [4244,4253]
replace available by isShutdown
===
move-tree
---
METHOD_INVOCATION_RECEIVER [8817,8826]
    SimpleName: Iterables [8817,8826]
to
MethodInvocation [10259,10309]
at 0
===
insert-node
---
SimpleName: map [10269,10272]
to
MethodInvocation [10259,10309]
at 1
===
insert-tree
---
METHOD_INVOCATION_ARGUMENTS [10274,10307]
    SimpleName: DESCRIPTION [10274,10285]
    SimpleName: blockingRequirements [10287,10307]
to
MethodInvocation [10259,10309]
at 2
===
insert-node
---
SimpleName: AvailabilityRequirement [84001,84024]
to
SimpleType [80873,80914]
at 0
===
insert-node
---
SimpleName: AvailabilityRequirement [86737,86760]
to
SimpleType [83623,83664]
at 0
===
insert-node
---
SimpleName: AvailabilityRequirement [89322,89345]
to
SimpleType [86222,86263]
at 0
===
insert-node
---
SimpleName: AvailabilityRequirement [91959,91982]
to
SimpleType [88873,88914]
at 0
===
update-node
---
SimpleName: deny [50520,50524]
replace deny by require
===
update-node
---
SimpleName: grant [40345,40350]
replace grant by fulfill
===
update-node
---
SimpleName: HighAvailabilityMemberStateMachine [50525,50559]
replace HighAvailabilityMemberStateMachine by AVAILABILITY_REQUIREMENT
===
move-tree
---
SimpleName: HighAvailabilityMemberStateMachine [50525,50559]
to
METHOD_INVOCATION_ARGUMENTS [50525,50564]
at 0
===
update-node
---
SimpleName: REQUIREMENT [40351,40362]
replace REQUIREMENT by REQUIREMENT_1
===
delete-tree
---
ImportDeclaration [926,948]
    QualifiedName: java.util.List [933,947]
===
delete-tree
---
ImportDeclaration [950,999]
    QualifiedName: java.util.concurrent.CopyOnWriteArrayList [957,998]
===
delete-node
---
SimpleName: conditionCount [3235,3249]
===
delete-tree
---
SingleVariableDeclaration [3138,3156]
    PrimitiveType: int [3138,3141]
    SimpleName: conditionCount [3142,3156]
===
delete-node
---
SimpleName: available [3204,3213]
===
delete-node
---
ASSIGNMENT_OPERATOR: = [3214,3215]
===
delete-node
---
Assignment [3204,3251]
===
delete-node
---
ExpressionStatement [3204,3252]
===
delete-tree
---
PrefixExpression [4819,4821]
    PREFIX_EXPRESSION_OPERATOR: - [4819,4820]
    NumberLiteral: 1 [4820,4821]
===
delete-node
---
PrimitiveType: int [4788,4791]
===
delete-node
---
SimpleName: val [4792,4795]
===
delete-node
---
VariableDeclarationFragment [4792,4823]
===
delete-node
---
VariableDeclarationStatement [4788,4824]
===
delete-tree
---
InfixExpression [4274,4281]
    SimpleName: val [4274,4277]
    INFIX_EXPRESSION_OPERATOR: - [4278,4279]
    NumberLiteral: 1 [4280,4281]
===
delete-tree
---
VariableDeclarationStatement [4067,4075]
    PrimitiveType: int [4067,4070]
    VariableDeclarationFragment [4071,4074]
        SimpleName: val [4071,4074]
===
delete-node
---
SimpleName: val [4112,4115]
===
delete-node
---
ASSIGNMENT_OPERATOR: = [4116,4117]
===
delete-node
---
Assignment [4112,4133]
===
delete-node
---
ExpressionStatement [4112,4134]
===
delete-tree
---
InfixExpression [4155,4164]
    SimpleName: val [4155,4158]
    INFIX_EXPRESSION_OPERATOR: == [4159,4161]
    PrefixExpression [4162,4164]
        PREFIX_EXPRESSION_OPERATOR: - [4162,4163]
        NumberLiteral: 1 [4163,4164]
===
delete-node
---
IfStatement [4150,4221]
===
delete-node
---
Block [4097,4234]
===
delete-node
---
DoStatement [4085,4286]
===
delete-tree
---
AssertStatement [4298,4326]
    InfixExpression [4305,4325]
        MethodInvocation [4305,4320]
            METHOD_INVOCATION_RECEIVER [4305,4314]
                SimpleName: available [4305,4314]
            SimpleName: get [4315,4318]
        INFIX_EXPRESSION_OPERATOR: >= [4321,4323]
        NumberLiteral: 0 [4324,4325]
===
delete-tree
---
ExpressionStatement [4336,4383]
    MethodInvocation [4336,4382]
        METHOD_INVOCATION_RECEIVER [4336,4354]
            SimpleName: blockingComponents [4336,4354]
        SimpleName: remove [4355,4361]
        METHOD_INVOCATION_ARGUMENTS [4363,4380]
            SimpleName: requirementNowMet [4363,4380]
===
delete-node
---
SimpleName: available [4118,4127]
===
delete-tree
---
VariableDeclarationStatement [3345,3353]
    PrimitiveType: int [3345,3348]
    VariableDeclarationFragment [3349,3352]
        SimpleName: val [3349,3352]
===
delete-node
---
SimpleName: val [3390,3393]
===
delete-node
---
ASSIGNMENT_OPERATOR: = [3394,3395]
===
delete-node
---
Assignment [3390,3411]
===
delete-node
---
ExpressionStatement [3390,3412]
===
delete-tree
---
InfixExpression [3433,3442]
    SimpleName: val [3433,3436]
    INFIX_EXPRESSION_OPERATOR: == [3437,3439]
    PrefixExpression [3440,3442]
        PREFIX_EXPRESSION_OPERATOR: - [3440,3441]
        NumberLiteral: 1 [3441,3442]
===
delete-node
---
IfStatement [3428,3499]
===
delete-node
---
Block [3375,3512]
===
delete-tree
---
PrefixExpression [3521,3561]
    PREFIX_EXPRESSION_OPERATOR: ! [3521,3522]
    MethodInvocation [3522,3561]
        METHOD_INVOCATION_RECEIVER [3522,3531]
            SimpleName: available [3522,3531]
        SimpleName: compareAndSet [3532,3545]
        METHOD_INVOCATION_ARGUMENTS [3547,3559]
            SimpleName: val [3547,3550]
            InfixExpression [3552,3559]
                SimpleName: val [3552,3555]
                INFIX_EXPRESSION_OPERATOR: + [3556,3557]
                NumberLiteral: 1 [3558,3559]
===
delete-node
---
DoStatement [3363,3564]
===
delete-node
---
ExpressionStatement [3576,3620]
===
delete-node
---
SimpleName: blockingComponents [3576,3594]
===
delete-node
---
SimpleName: add [3595,3598]
===
delete-node
---
METHOD_INVOCATION_ARGUMENTS [3600,3617]
===
delete-node
---
SimpleName: available [5971,5980]
===
delete-node
---
FieldAccess [5948,5980]
===
delete-node
---
INFIX_EXPRESSION_OPERATOR: < [6405,6406]
===
delete-node
---
SimpleName: start [6407,6412]
===
delete-node
---
InfixExpression [6407,6421]
===
delete-tree
---
ExpressionStatement [6456,6478]
    Assignment [6456,6477]
        SimpleName: val [6456,6459]
        ASSIGNMENT_OPERATOR: = [6460,6461]
        MethodInvocation [6462,6477]
            METHOD_INVOCATION_RECEIVER [6462,6471]
                SimpleName: available [6462,6471]
            SimpleName: get [6472,6475]
===
delete-tree
---
IfStatement [6496,6732]
    InfixExpression [6501,6509]
        SimpleName: val [6501,6504]
        INFIX_EXPRESSION_OPERATOR: == [6505,6507]
        NumberLiteral: 0 [6508,6509]
    Block [6529,6601]
        ReturnStatement [6552,6582]
            QualifiedName: Availability.AVAILABLE [6559,6581]
    IfStatement [6624,6732]
        InfixExpression [6629,6638]
            SimpleName: val [6629,6632]
            INFIX_EXPRESSION_OPERATOR: == [6633,6635]
            PrefixExpression [6636,6638]
                PREFIX_EXPRESSION_OPERATOR: - [6636,6637]
                NumberLiteral: 1 [6637,6638]
        Block [6658,6732]
            ReturnStatement [6681,6713]
                QualifiedName: Availability.UNAVAILABLE [6688,6712]
===
delete-node
---
METHOD_INVOCATION_RECEIVER [7011,7017]
===
delete-node
---
MethodInvocation [7011,7025]
===
delete-node
---
TextElement: The availability guard is what ensures that the database will only take calls when it is in an ok state. It allows [1375,1489]
===
delete-node
---
TextElement: query handling to easily determine if it is ok to call the database by calling  [1494,1573]
===
delete-node
---
TextElement: . [1599,1600]
===
delete-node
---
TextElement: <p> [1605,1608]
===
delete-node
---
TextElement: The implementation uses an atomic integer that is initialized to the nr of conditions that must be met for the [1613,1723]
===
delete-node
---
TextElement: database to be available. Each such condition will then call grant/deny accordingly, [1728,1812]
===
delete-node
---
TextElement: and if the integer becomes 0 access is granted. [1817,1864]
===
delete-node
---
TagElement [1375,1864]
===
delete-node
---
Javadoc [1367,1869]
===
delete-node
---
Modifier: public [1871,1877]
===
delete-node
---
TYPE_DECLARATION_KIND: class [1878,1883]
===
delete-node
---
SimpleName: AvailabilityGuard [1884,1901]
===
delete-node
---
Modifier: public [2416,2422]
===
delete-node
---
Modifier: static [2423,2429]
===
delete-node
---
SimpleName: availabilityRequirement [2454,2477]
===
delete-node
---
AnonymousClassDeclaration [2580,2735]
===
delete-node
---
ClassInstanceCreation [2541,2735]
===
delete-node
---
ReturnStatement [2534,2736]
===
delete-node
---
Block [2523,2743]
===
delete-node
---
MethodDeclaration [2416,2743]
===
delete-node
---
Modifier: private [2835,2842]
===
delete-node
---
Modifier: final [2843,2848]
===
delete-tree
---
VariableDeclarationFragment [2863,2872]
    SimpleName: available [2863,2872]
===
delete-node
---
FieldDeclaration [2835,2873]
===
delete-node
---
Modifier: private [2879,2886]
===
delete-node
---
Modifier: final [2887,2892]
===
delete-tree
---
VariableDeclarationFragment [2923,2972]
    SimpleName: blockingComponents [2923,2941]
    ClassInstanceCreation [2944,2972]
        ParameterizedType [2948,2970]
            SimpleType [2948,2968]
                SimpleName: CopyOnWriteArrayList [2948,2968]
===
delete-node
---
FieldDeclaration [2879,2973]
===
delete-tree
---
MethodDeclaration [3013,3091]
    Modifier: public [3013,3019]
    SimpleName: AvailabilityGuard [3020,3037]
    SingleVariableDeclaration [3039,3050]
        SimpleType [3039,3044]
            SimpleName: Clock [3039,3044]
        SimpleName: clock [3045,3050]
    Block [3058,3091]
        ConstructorInvocation [3069,3084]
            SimpleName: clock [3074,3079]
            NumberLiteral: 0 [3081,3082]
===
delete-tree
---
EnumDeclaration [5190,5627]
    Modifier: private [5190,5197]
    Modifier: static [5198,5204]
    SimpleName: Availability [5210,5222]
    EnumConstantDeclaration [5239,5265]
        SimpleName: AVAILABLE [5239,5248]
        BooleanLiteral: true [5250,5254]
        BooleanLiteral: true [5256,5260]
    EnumConstantDeclaration [5273,5314]
        SimpleName: TEMPORARILY_UNAVAILABLE [5273,5296]
        BooleanLiteral: false [5298,5303]
        BooleanLiteral: true [5305,5309]
    EnumConstantDeclaration [5322,5354]
        SimpleName: UNAVAILABLE [5322,5333]
        BooleanLiteral: false [5335,5340]
        BooleanLiteral: false [5342,5347]
    FieldDeclaration [5362,5394]
        Modifier: private [5362,5369]
        Modifier: final [5370,5375]
        PrimitiveType: boolean [5376,5383]
        VariableDeclarationFragment [5384,5393]
            SimpleName: available [5384,5393]
    FieldDeclaration [5404,5438]
        Modifier: private [5404,5411]
        Modifier: final [5412,5417]
        PrimitiveType: boolean [5418,5425]
        VariableDeclarationFragment [5426,5437]
            SimpleName: temporarily [5426,5437]
    MethodDeclaration [5450,5620]
        Modifier: private [5450,5457]
        SimpleName: Availability [5458,5470]
        SingleVariableDeclaration [5472,5489]
            PrimitiveType: boolean [5472,5479]
            SimpleName: available [5480,5489]
        SingleVariableDeclaration [5491,5510]
            PrimitiveType: boolean [5491,5498]
            SimpleName: temporarily [5499,5510]
        Block [5522,5620]
            ExpressionStatement [5537,5564]
                Assignment [5537,5563]
                    FieldAccess [5537,5551]
                        ThisExpression [5537,5541]
                        SimpleName: available [5542,5551]
                    ASSIGNMENT_OPERATOR: = [5552,5553]
                    SimpleName: available [5554,5563]
            ExpressionStatement [5578,5609]
                Assignment [5578,5608]
                    FieldAccess [5578,5594]
                        ThisExpression [5578,5582]
                        SimpleName: temporarily [5583,5594]
                    ASSIGNMENT_OPERATOR: = [5595,5596]
                    SimpleName: temporarily [5597,5608]
===
delete-tree
---
Javadoc [5635,5877]
    TagElement [5647,5711]
        TextElement: Determines if the database is available for transactions to use. [5647,5711]
    TagElement [5728,5771]
        SimpleName: millis [5735,5741]
        TextElement:  to wait if not yet available. [5741,5771]
    TagElement [5780,5868]
        TextElement:  true if it is available, otherwise false. Returns false immediately if shutdown. [5787,5868]
===
delete-node
---
Modifier: public [5883,5889]
===
delete-node
---
PrimitiveType: boolean [5890,5897]
===
delete-node
---
SimpleName: isAvailable [5898,5909]
===
delete-node
---
MethodDeclaration [5635,5988]
===
delete-node
---
Modifier: private [5996,6003]
===
delete-node
---
SimpleName: availability [6017,6029]
===
delete-tree
---
VariableDeclarationStatement [6061,6087]
    PrimitiveType: int [6061,6064]
    VariableDeclarationFragment [6065,6086]
        SimpleName: val [6065,6068]
        MethodInvocation [6071,6086]
            METHOD_INVOCATION_RECEIVER [6071,6080]
                SimpleName: available [6071,6080]
            SimpleName: get [6081,6084]
===
delete-tree
---
InfixExpression [6102,6110]
    SimpleName: val [6102,6105]
    INFIX_EXPRESSION_OPERATOR: == [6106,6108]
    NumberLiteral: 0 [6109,6110]
===
delete-tree
---
InfixExpression [6198,6207]
    SimpleName: val [6198,6201]
    INFIX_EXPRESSION_OPERATOR: == [6202,6204]
    PrefixExpression [6205,6207]
        PREFIX_EXPRESSION_OPERATOR: - [6205,6206]
        NumberLiteral: 1 [6206,6207]
===
delete-node
---
Block [6219,6277]
===
delete-tree
---
VariableDeclarationStatement [6316,6355]
    PrimitiveType: long [6316,6320]
    VariableDeclarationFragment [6321,6354]
        SimpleName: start [6321,6326]
        MethodInvocation [6329,6354]
            METHOD_INVOCATION_RECEIVER [6329,6334]
                SimpleName: clock [6329,6334]
            SimpleName: currentTimeMillis [6335,6352]
===
delete-node
---
WhileStatement [6371,7041]
===
delete-tree
---
ReturnStatement [7057,7101]
    QualifiedName: Availability.TEMPORARILY_UNAVAILABLE [7064,7100]
===
delete-node
---
Block [6301,7112]
===
delete-node
---
IfStatement [6193,7112]
===
delete-node
---
IfStatement [6097,7112]
===
delete-node
---
Block [6050,7119]
===
delete-node
---
MethodDeclaration [5996,7119]
===
delete-node
---
Modifier: public [7127,7133]
===
delete-tree
---
TypeParameter [7135,7162]
    SimpleName: EXCEPTION [7135,7144]
    SimpleType [7153,7162]
        SimpleName: Throwable [7153,7162]
===
delete-node
---
PrimitiveType: void [7164,7168]
===
delete-node
---
SimpleName: checkAvailability [7169,7186]
===
delete-tree
---
SingleVariableDeclaration [7201,7221]
    ParameterizedType [7201,7217]
        SimpleType [7201,7206]
            SimpleName: Class [7201,7206]
        SimpleType [7207,7216]
            SimpleName: EXCEPTION [7207,7216]
    SimpleName: cls [7218,7221]
===
delete-tree
---
SimpleType [7244,7253]
    SimpleName: EXCEPTION [7244,7253]
===
delete-tree
---
PrefixExpression [7336,7359]
    PREFIX_EXPRESSION_OPERATOR: ! [7336,7337]
    QualifiedName: availability.available [7337,7359]
===
delete-tree
---
VariableDeclarationStatement [7386,7406]
    SimpleType [7386,7395]
        SimpleName: EXCEPTION [7386,7395]
    VariableDeclarationFragment [7396,7405]
        SimpleName: exception [7396,7405]
===
delete-tree
---
ExpressionStatement [7807,7881]
    Assignment [7807,7880]
        SimpleName: exception [7807,7816]
        ASSIGNMENT_OPERATOR: = [7817,7818]
        MethodInvocation [7819,7880]
            METHOD_INVOCATION_RECEIVER [7819,7853]
                MethodInvocation [7819,7853]
                    METHOD_INVOCATION_RECEIVER [7819,7822]
                        SimpleName: cls [7819,7822]
                    SimpleName: getConstructor [7823,7837]
                    METHOD_INVOCATION_ARGUMENTS [7839,7851]
                        TypeLiteral [7839,7851]
                            SimpleType [7839,7845]
                                SimpleName: String [7839,7845]
            SimpleName: newInstance [7854,7865]
            METHOD_INVOCATION_ARGUMENTS [7867,7878]
                SimpleName: description [7867,7878]
===
delete-node
---
Block [7437,7896]
===
delete-tree
---
CatchClause [7910,8096]
    SingleVariableDeclaration [7918,7941]
        SimpleType [7918,7939]
            SimpleName: NoSuchMethodException [7918,7939]
        SimpleName: e [7940,7941]
    Block [7957,8096]
        ThrowStatement [7976,8081]
            ClassInstanceCreation [7982,8080]
                SimpleType [7986,7991]
                    SimpleName: Error [7986,7991]
                StringLiteral: "Bad exception class given to this method, it doesn't have a (String) constructor" [7993,8075]
                SimpleName: e [8077,8078]
===
delete-node
---
SimpleName: e [8128,8129]
===
delete-node
---
SingleVariableDeclaration [8118,8129]
===
delete-node
---
SimpleName: e [8192,8193]
===
delete-node
---
ClassInstanceCreation [8170,8195]
===
delete-node
---
ThrowStatement [8164,8196]
===
delete-node
---
Block [8145,8211]
===
delete-node
---
CatchClause [8110,8211]
===
delete-node
---
TryStatement [7420,8211]
===
delete-tree
---
ThrowStatement [8225,8241]
    SimpleName: exception [8231,8240]
===
delete-node
---
Block [7371,8252]
===
delete-node
---
IfStatement [7331,8252]
===
delete-node
---
Block [7259,8259]
===
delete-node
---
MethodDeclaration [7127,8259]
===
delete-tree
---
Javadoc [8563,8648]
    TagElement [8567,8646]
        TextElement: Provide a textual description of what components, if any, are blocking access.  [8567,8646]
===
delete-node
---
Modifier: public [8654,8660]
===
delete-node
---
SimpleName: describeWhoIsBlocking [8668,8689]
===
delete-tree
---
InfixExpression [8711,8763]
    InfixExpression [8711,8740]
        MethodInvocation [8711,8736]
            METHOD_INVOCATION_RECEIVER [8711,8729]
                SimpleName: blockingComponents [8711,8729]
            SimpleName: size [8730,8734]
        INFIX_EXPRESSION_OPERATOR: > [8737,8738]
        NumberLiteral: 0 [8739,8740]
    INFIX_EXPRESSION_OPERATOR: || [8741,8743]
    InfixExpression [8744,8763]
        MethodInvocation [8744,8759]
            METHOD_INVOCATION_RECEIVER [8744,8753]
                SimpleName: available [8744,8753]
            SimpleName: get [8754,8757]
        INFIX_EXPRESSION_OPERATOR: > [8760,8761]
        NumberLiteral: 0 [8762,8763]
===
delete-node
---
SimpleName: causes [8796,8802]
===
delete-node
---
SimpleName: join [8805,8809]
===
delete-node
---
StringLiteral: ", " [8811,8815]
===
delete-node
---
SimpleName: map [8827,8830]
===
delete-tree
---
METHOD_INVOCATION_ARGUMENTS [8832,8863]
    SimpleName: DESCRIPTION [8832,8843]
    SimpleName: blockingComponents [8845,8863]
===
delete-node
---
MethodInvocation [8817,8865]
===
delete-node
---
METHOD_INVOCATION_ARGUMENTS [8811,8865]
===
delete-node
---
MethodInvocation [8805,8867]
===
delete-node
---
VariableDeclarationFragment [8796,8867]
===
delete-node
---
VariableDeclarationStatement [8789,8868]
===
delete-tree
---
ReturnStatement [8882,8948]
    InfixExpression [8889,8947]
        MethodInvocation [8889,8904]
            METHOD_INVOCATION_RECEIVER [8889,8898]
                SimpleName: available [8889,8898]
            SimpleName: get [8899,8902]
        INFIX_EXPRESSION_OPERATOR: + [8905,8906]
        StringLiteral: " reasons for blocking: " [8907,8932]
        SimpleName: causes [8935,8941]
        StringLiteral: "." [8944,8947]
===
delete-node
---
Block [8774,8959]
===
delete-node
---
IfStatement [8708,8959]
===
delete-node
---
Block [8697,9008]
===
delete-node
---
MethodDeclaration [8563,9008]
===
delete-node
---
TypeDeclaration [1367,9351]
===
delete-node
---
ThisExpression [11847,11851]
===
delete-node
---
ThisExpression [12060,12064]
===
delete-node
---
ThisExpression [12282,12286]
===
delete-node
---
Modifier: public [12952,12958]
===
delete-node
---
SimpleName: description [12966,12977]
===
delete-tree
---
Block [12985,13032]
    ReturnStatement [12996,13025]
        StringLiteral: "Database is stopped" [13003,13024]
===
delete-node
---
MethodDeclaration [12937,13032]
===
delete-node
---
Modifier: public [18164,18170]
===
delete-node
---
TYPE_DECLARATION_KIND: class [18171,18176]
===
delete-node
---
SimpleName: GraphDatabaseFacade [18177,18196]
===
delete-node
---
SimpleName: transactionStartTimeout [25078,25101]
===
delete-node
---
TypeLiteral [25103,25136]
===
delete-node
---
METHOD_INVOCATION_ARGUMENTS [25078,25136]
===
delete-tree
---
METHOD_INVOCATION_ARGUMENTS [26349,26407]
    SimpleName: transactionStartTimeout [26349,26372]
    TypeLiteral [26374,26407]
        SimpleType [26374,26401]
            SimpleName: TransactionFailureException [26374,26401]
===
delete-node
---
NumberLiteral: 2 [37295,37296]
===
delete-node
---
Modifier: public [37035,37041]
===
delete-node
---
PrimitiveType: void [37042,37046]
===
delete-node
---
SimpleName: givenAccessGuardWith2ConditionsWhenAwaitThenActuallyWaitGivenTimeout [37047,37115]
===
delete-node
---
Block [37140,37643]
===
delete-node
---
MethodDeclaration [37024,37643]
===
delete-node
---
NumberLiteral: 2 [37931,37932]
===
delete-node
---
NumberLiteral: 2 [38600,38601]
===
delete-node
---
NumberLiteral: 2 [36853,36854]
===
delete-node
---
NumberLiteral: 2 [39357,39358]
===
delete-node
---
NumberLiteral: 2 [40167,40168]
===
delete-node
---
NumberLiteral: 1 [41039,41040]
===
delete-node
---
NumberLiteral: 1 [41961,41962]
===
delete-node
---
NumberLiteral: 1 [42929,42930]
===
delete-node
---
NumberLiteral: 0 [43454,43455]
===
delete-node
---
QualifiedName: AvailabilityGuard.AvailabilityRequirement [45758,45799]
===
delete-node
---
ThisExpression [47214,47218]
===
delete-node
---
ThisExpression [48108,48112]
===
delete-node
---
Modifier: public [48831,48837]
===
delete-node
---
SimpleName: description [48845,48856]
===
delete-tree
---
Block [48864,48936]
    ReturnStatement [48875,48929]
        InfixExpression [48882,48928]
            StringLiteral: "Cluster state is '" [48882,48902]
            INFIX_EXPRESSION_OPERATOR: + [48903,48904]
            MethodInvocation [48905,48922]
                SimpleName: getCurrentState [48905,48920]
            StringLiteral: "'" [48925,48928]
===
delete-node
---
MethodDeclaration [48816,48936]
===
delete-node
---
ThisExpression [50525,50564]
===
delete-node
---
ThisExpression [54109,54148]
===
delete-node
---
ThisExpression [56157,56196]
===
delete-node
---
TYPE_DECLARATION_KIND: class [59539,59544]
===
delete-node
---
SimpleName: SlaveLocksClient [59545,59561]
===
delete-tree
---
TypeLiteral [68916,68938]
    SimpleType [68916,68932]
        SimpleName: RuntimeException [68916,68932]
===
delete-node
---
Modifier: public [72507,72513]
===
delete-node
---
TYPE_DECLARATION_KIND: class [72514,72519]
===
delete-node
---
SimpleName: HighAvailabilityMemberStateMachineTest [72520,72558]
===
delete-node
---
QualifiedName: AvailabilityGuard.AvailabilityRequirement [80873,80914]
===
delete-node
---
QualifiedName: AvailabilityGuard.AvailabilityRequirement [83623,83664]
===
delete-node
---
QualifiedName: AvailabilityGuard.AvailabilityRequirement [86222,86263]
===
delete-node
---
QualifiedName: AvailabilityGuard.AvailabilityRequirement [88873,88914]
