===
move-tree
---
ImportDeclaration [22921,22966]
    QualifiedName: org.springframework.messaging.Message [22928,22965]
to
CompilationUnit [0,345525]
at 62
===
move-tree
---
ImportDeclaration [22968,23026]
    QualifiedName: org.springframework.messaging.support.ErrorMessage [22975,23025]
to
CompilationUnit [0,345525]
at 62
===
move-tree
---
ImportDeclaration [78100,78146]
    QualifiedName: java.util.concurrent.ConcurrentHashMap [78107,78145]
to
CompilationUnit [0,345525]
at 106
===
move-tree
---
ImportDeclaration [106783,106815]
    QualifiedName: javax.net.ssl.SSLSession [106790,106814]
to
CompilationUnit [0,345525]
at 164
===
move-tree
---
ImportDeclaration [110073,110134]
    QualifiedName: org.springframework.context.ApplicationEventPublisher [110080,110133]
to
CompilationUnit [0,345525]
at 164
===
move-tree
---
ImportDeclaration [106819,106875]
    QualifiedName: org.springframework.core.serializer.Deserializer [106826,106874]
to
CompilationUnit [0,345525]
at 164
===
move-tree
---
ImportDeclaration [106877,106931]
    QualifiedName: org.springframework.core.serializer.Serializer [106884,106930]
to
CompilationUnit [0,345525]
at 164
===
move-tree
---
ImportDeclaration [106933,106978]
    QualifiedName: org.springframework.messaging.Message [106940,106977]
to
CompilationUnit [0,345525]
at 164
===
move-tree
---
ImportDeclaration [189592,189637]
    QualifiedName: org.springframework.messaging.Message [189599,189636]
to
CompilationUnit [0,345525]
at 315
===
insert-tree
---
ImportDeclaration [23213,23265]
    QualifiedName: org.springframework.integration.ip.IpHeaders [23220,23264]
to
CompilationUnit [0,345525]
at 54
===
insert-tree
---
ImportDeclaration [193664,193706]
    QualifiedName: org.junit.Assert.assertThat [193678,193705]
to
CompilationUnit [0,345525]
at 324
===
insert-tree
---
ImportDeclaration [194787,194816]
    QualifiedName: org.hamcrest.Matchers [194794,194815]
to
CompilationUnit [0,345525]
at 354
===
insert-tree
---
ImportDeclaration [263748,263795]
    QualifiedName: org.hamcrest.Matchers.startsWith [263762,263794]
to
CompilationUnit [0,345525]
at 431
===
insert-tree
---
ImportDeclaration [263797,263839]
    QualifiedName: org.junit.Assert.assertThat [263811,263838]
to
CompilationUnit [0,345525]
at 432
===
move-tree
---
MethodDeclaration [90406,90506]
    MarkerAnnotation [90406,90415]
        SimpleName: Override [90407,90415]
    Modifier: public [90418,90424]
    PrimitiveType: boolean [90425,90432]
    SimpleName: isSingleUse [90433,90444]
    Block [90447,90506]
        ReturnStatement [90452,90502]
            MethodInvocation [90459,90501]
                METHOD_INVOCATION_RECEIVER [90459,90487]
                    FieldAccess [90459,90487]
                        ThisExpression [90459,90463]
                        SimpleName: targetConnectionFactory [90464,90487]
                SimpleName: isSingleUse [90488,90499]
to
TypeDeclaration [78664,92363]
at 58
===
insert-tree
---
FieldDeclaration [3280,3317]
    Modifier: private [3280,3287]
    Modifier: volatile [3288,3296]
    PrimitiveType: boolean [3297,3304]
    VariableDeclarationFragment [3305,3316]
        SimpleName: isSingleUse [3305,3316]
to
TypeDeclaration [2175,9893]
at 13
===
insert-node
---
Modifier: public [13523,13529]
to
TypeDeclaration [12418,22015]
at 1
===
insert-node
---
TYPE_DECLARATION_KIND: class [13530,13535]
to
TypeDeclaration [12418,22015]
at 2
===
insert-node
---
SimpleName: TcpOutboundGateway [13536,13554]
to
TypeDeclaration [12418,22015]
at 3
===
insert-tree
---
FieldDeclaration [13761,13798]
    Modifier: private [13761,13768]
    Modifier: volatile [13769,13777]
    PrimitiveType: boolean [13778,13785]
    VariableDeclarationFragment [13786,13797]
        SimpleName: isSingleUse [13786,13797]
to
TypeDeclaration [12418,22015]
at 13
===
insert-node
---
MethodDeclaration [18652,18931]
to
TypeDeclaration [12418,22015]
at 26
===
insert-node
---
MethodDeclaration [19618,19690]
to
TypeDeclaration [12418,22015]
at 32
===
insert-tree
---
FieldDeclaration [24551,24588]
    Modifier: private [24551,24558]
    Modifier: volatile [24559,24567]
    PrimitiveType: boolean [24568,24575]
    VariableDeclarationFragment [24576,24587]
        SimpleName: isSingleUse [24576,24587]
to
TypeDeclaration [23795,29429]
at 10
===
insert-node
---
Modifier: public [32805,32811]
to
TypeDeclaration [31480,40695]
at 1
===
insert-node
---
TYPE_DECLARATION_KIND: class [32812,32817]
to
TypeDeclaration [31480,40695]
at 2
===
insert-node
---
SimpleName: TcpSendingMessageHandler [32818,32842]
to
TypeDeclaration [31480,40695]
at 3
===
insert-tree
---
FieldDeclaration [33228,33265]
    Modifier: private [33228,33235]
    Modifier: volatile [33236,33244]
    PrimitiveType: boolean [33245,33252]
    VariableDeclarationFragment [33253,33264]
        SimpleName: isSingleUse [33253,33264]
to
TypeDeclaration [31480,40695]
at 15
===
insert-node
---
Modifier: public [50731,50737]
to
TypeDeclaration [48982,71792]
at 1
===
insert-node
---
Modifier: abstract [50738,50746]
to
TypeDeclaration [48982,71792]
at 2
===
insert-node
---
TYPE_DECLARATION_KIND: class [50747,50752]
to
TypeDeclaration [48982,71792]
at 3
===
insert-node
---
SimpleName: AbstractConnectionFactory [50753,50778]
to
TypeDeclaration [48982,71792]
at 4
===
move-tree
---
FieldDeclaration [79309,79426]
    Modifier: private [79309,79316]
    Modifier: final [79317,79322]
    ParameterizedType [79323,79352]
        SimpleType [79323,79326]
            SimpleName: Map [79323,79326]
        SimpleType [79327,79333]
            SimpleName: String [79327,79333]
        SimpleType [79335,79351]
            SimpleName: CachedConnection [79335,79351]
    VariableDeclarationFragment [79353,79425]
        SimpleName: deferredClosures [79353,79369]
        ClassInstanceCreation [79376,79425]
            ParameterizedType [79380,79423]
                SimpleType [79380,79397]
                    SimpleName: ConcurrentHashMap [79380,79397]
                SimpleType [79398,79404]
                    SimpleName: String [79398,79404]
                SimpleType [79406,79422]
                    SimpleName: CachedConnection [79406,79422]
to
TypeDeclaration [48982,71792]
at 38
===
insert-node
---
Modifier: public [81249,81255]
to
TypeDeclaration [78664,92363]
at 1
===
insert-node
---
TYPE_DECLARATION_KIND: class [81256,81261]
to
TypeDeclaration [78664,92363]
at 2
===
insert-node
---
SimpleName: CachingClientConnectionFactory [81262,81292]
to
TypeDeclaration [78664,92363]
at 3
===
insert-node
---
MethodDeclaration [91573,91635]
to
TypeDeclaration [78664,92363]
at 55
===
insert-node
---
Modifier: public [95281,95287]
to
TypeDeclaration [95316,105897]
at 1
===
insert-node
---
TYPE_DECLARATION_KIND: class [95288,95293]
to
TypeDeclaration [95316,105897]
at 2
===
insert-node
---
SimpleName: FailoverClientConnectionFactory [95294,95325]
to
TypeDeclaration [95316,105897]
at 3
===
insert-node
---
Modifier: public [115746,115752]
to
TypeDeclaration [116763,128025]
at 1
===
insert-node
---
Modifier: abstract [115753,115761]
to
TypeDeclaration [116763,128025]
at 2
===
insert-node
---
TYPE_DECLARATION_KIND: class [115762,115767]
to
TypeDeclaration [116763,128025]
at 3
===
insert-node
---
SimpleName: TcpConnectionSupport [115768,115788]
to
TypeDeclaration [116763,128025]
at 4
===
insert-node
---
MethodDeclaration [121062,121298]
to
TypeDeclaration [116763,128025]
at 43
===
insert-node
---
Modifier: public [135685,135691]
to
TypeDeclaration [139234,159333]
at 1
===
insert-node
---
TYPE_DECLARATION_KIND: class [135692,135697]
to
TypeDeclaration [139234,159333]
at 2
===
insert-node
---
SimpleName: TcpNioConnection [135698,135714]
to
TypeDeclaration [139234,159333]
at 3
===
insert-node
---
MethodDeclaration [144834,145494]
to
TypeDeclaration [139234,159333]
at 37
===
insert-node
---
Modifier: public [196192,196198]
to
TypeDeclaration [200466,222887]
at 1
===
insert-node
---
TYPE_DECLARATION_KIND: class [196199,196204]
to
TypeDeclaration [200466,222887]
at 2
===
insert-node
---
SimpleName: TcpOutboundGatewayTests [196205,196228]
to
TypeDeclaration [200466,222887]
at 3
===
insert-node
---
Modifier: public [222554,222560]
to
TypeDeclaration [226630,267096]
at 1
===
insert-node
---
TYPE_DECLARATION_KIND: class [222561,222566]
to
TypeDeclaration [226630,267096]
at 2
===
insert-node
---
SimpleName: TcpSendingMessageHandlerTests [222567,222596]
to
TypeDeclaration [226630,267096]
at 3
===
insert-node
---
Modifier: public [269215,269221]
to
TypeDeclaration [273127,298664]
at 4
===
insert-node
---
TYPE_DECLARATION_KIND: class [269222,269227]
to
TypeDeclaration [273127,298664]
at 5
===
insert-node
---
SimpleName: CachingClientConnectionFactoryTests [269228,269263]
to
TypeDeclaration [273127,298664]
at 6
===
insert-node
---
Modifier: public [297491,297497]
to
TypeDeclaration [301384,315991]
at 1
===
insert-node
---
TYPE_DECLARATION_KIND: class [297498,297503]
to
TypeDeclaration [301384,315991]
at 2
===
insert-node
---
SimpleName: FailoverClientConnectionFactoryTests [297504,297540]
to
TypeDeclaration [301384,315991]
at 3
===
insert-node
---
Modifier: public [316215,316221]
to
TypeDeclaration [319867,345523]
at 1
===
insert-node
---
TYPE_DECLARATION_KIND: class [316222,316227]
to
TypeDeclaration [319867,345523]
at 2
===
insert-node
---
SimpleName: TcpNioConnectionTests [316228,316249]
to
TypeDeclaration [319867,345523]
at 3
===
insert-node
---
Block [3710,4735]
to
MethodDeclaration [3611,4225]
at 5
===
insert-node
---
Modifier: public [18652,18658]
to
MethodDeclaration [18652,18931]
at 0
===
insert-node
---
PrimitiveType: void [18659,18663]
to
MethodDeclaration [18652,18931]
at 1
===
insert-node
---
SimpleName: setConnectionFactory [18664,18684]
to
MethodDeclaration [18652,18931]
at 2
===
insert-tree
---
SingleVariableDeclaration [18685,18734]
    SimpleType [18685,18716]
        SimpleName: AbstractClientConnectionFactory [18685,18716]
    SimpleName: connectionFactory [18717,18734]
to
MethodDeclaration [18652,18931]
at 3
===
insert-node
---
Block [18736,18931]
to
MethodDeclaration [18652,18931]
at 4
===
move-tree
---
MarkerAnnotation [19332,19341]
    SimpleName: Override [19333,19341]
to
MethodDeclaration [19618,19690]
at 0
===
insert-node
---
Modifier: public [19630,19636]
to
MethodDeclaration [19618,19690]
at 1
===
insert-node
---
PrimitiveType: void [19637,19641]
to
MethodDeclaration [19618,19690]
at 2
===
insert-node
---
SimpleName: start [19642,19647]
to
MethodDeclaration [19618,19690]
at 3
===
insert-node
---
Block [19650,19690]
to
MethodDeclaration [19618,19690]
at 4
===
move-tree
---
MarkerAnnotation [112067,112076]
    SimpleName: Override [112068,112076]
to
MethodDeclaration [24724,25319]
at 0
===
insert-node
---
Block [25024,26245]
to
MethodDeclaration [24724,25319]
at 5
===
insert-tree
---
MarkerAnnotation [29304,29313]
    SimpleName: Override [29305,29313]
to
MethodDeclaration [28278,28384]
at 1
===
insert-tree
---
MarkerAnnotation [29848,29857]
    SimpleName: Override [29849,29857]
to
MethodDeclaration [28852,29062]
at 0
===
insert-tree
---
MarkerAnnotation [30075,30084]
    SimpleName: Override [30076,30084]
to
MethodDeclaration [29067,29238]
at 0
===
insert-tree
---
MarkerAnnotation [30263,30272]
    SimpleName: Override [30264,30272]
to
MethodDeclaration [29243,29339]
at 0
===
insert-tree
---
MarkerAnnotation [30376,30385]
    SimpleName: Override [30377,30385]
to
MethodDeclaration [29344,29426]
at 0
===
move-tree
---
SimpleType [15116,15129]
    SimpleName: TcpConnection [15116,15129]
to
MethodDeclaration [34716,35440]
at 2
===
move-tree
---
Block [71086,71563]
    VariableDeclarationStatement [71092,71115]
        PrimitiveType: boolean [71092,71099]
        VariableDeclarationFragment [71100,71114]
            SimpleName: closed [71100,71106]
            BooleanLiteral: false [71109,71114]
    EnhancedForStatement [71120,71539]
        SingleVariableDeclaration [71125,71156]
            SimpleType [71125,71145]
                SimpleName: TcpConnectionSupport [71125,71145]
            SimpleName: connection [71146,71156]
        SimpleName: connections [71159,71170]
        Block [71172,71539]
            IfStatement [71179,71533]
                MethodInvocation [71183,71232]
                    METHOD_INVOCATION_RECEIVER [71183,71195]
                        SimpleName: connectionId [71183,71195]
                    SimpleName: equals [71196,71202]
                    METHOD_INVOCATION_ARGUMENTS [71203,71231]
                        MethodInvocation [71203,71231]
                            METHOD_INVOCATION_RECEIVER [71203,71213]
                                SimpleName: connection [71203,71213]
                            SimpleName: getConnectionId [71214,71229]
                Block [71234,71533]
                    TryStatement [71242,71526]
                        Block [71246,71318]
                            ExpressionStatement [71255,71274]
                                MethodInvocation [71255,71273]
                                    METHOD_INVOCATION_RECEIVER [71255,71265]
                                        SimpleName: connection [71255,71265]
                                    SimpleName: close [71266,71271]
                            ExpressionStatement [71282,71296]
                                Assignment [71282,71295]
                                    SimpleName: closed [71282,71288]
                                    ASSIGNMENT_OPERATOR: = [71289,71290]
                                    BooleanLiteral: true [71291,71295]
                            BreakStatement [71304,71310]
                        CatchClause [71325,71526]
                            SingleVariableDeclaration [71332,71343]
                                SimpleType [71332,71341]
                                    SimpleName: Exception [71332,71341]
                                SimpleName: e [71342,71343]
                            Block [71345,71526]
                                IfStatement [71354,71464]
                                    MethodInvocation [71358,71381]
                                        METHOD_INVOCATION_RECEIVER [71358,71364]
                                            SimpleName: logger [71358,71364]
                                        SimpleName: isDebugEnabled [71365,71379]
                                    Block [71383,71464]
                                        ExpressionStatement [71393,71455]
                                            MethodInvocation [71393,71454]
                                                METHOD_INVOCATION_RECEIVER [71393,71399]
                                                    SimpleName: logger [71393,71399]
                                                SimpleName: debug [71400,71405]
                                                METHOD_INVOCATION_ARGUMENTS [71406,71453]
                                                    InfixExpression [71406,71450]
                                                        StringLiteral: "Failed to close connection " [71406,71435]
                                                        INFIX_EXPRESSION_OPERATOR: + [71436,71437]
                                                        SimpleName: connectionId [71438,71450]
                                                    SimpleName: e [71452,71453]
                                ExpressionStatement [71472,71518]
                                    MethodInvocation [71472,71517]
                                        METHOD_INVOCATION_RECEIVER [71472,71482]
                                            SimpleName: connection [71472,71482]
                                        SimpleName: publishConnectionExceptionEvent [71483,71514]
                                        METHOD_INVOCATION_ARGUMENTS [71515,71516]
                                            SimpleName: e [71515,71516]
    ReturnStatement [71544,71558]
        SimpleName: closed [71551,71557]
to
MethodDeclaration [70759,71567]
at 5
===
move-tree
---
MarkerAnnotation [125523,125532]
    SimpleName: Override [125524,125532]
to
MethodDeclaration [91573,91635]
at 0
===
insert-node
---
Modifier: public [91585,91591]
to
MethodDeclaration [91573,91635]
at 1
===
insert-node
---
PrimitiveType: boolean [91592,91599]
to
MethodDeclaration [91573,91635]
at 2
===
insert-node
---
SimpleName: isSingleUse [91600,91611]
to
MethodDeclaration [91573,91635]
at 3
===
insert-tree
---
Block [91614,91635]
    ReturnStatement [91619,91631]
        BooleanLiteral: true [91626,91630]
to
MethodDeclaration [91573,91635]
at 4
===
update-node
---
PrimitiveType: boolean [90425,90432]
replace boolean by void
===
update-node
---
SimpleName: isSingleUse [90433,90444]
replace isSingleUse by enableManualListenerRegistration
===
move-tree
---
Javadoc [123023,123126]
    TagElement [123032,123085]
        TextElement: Set the listener that will receive incoming Messages. [123032,123085]
    TagElement [123091,123120]
        SimpleName: listener [123098,123106]
        TextElement:  The listener. [123106,123120]
to
MethodDeclaration [121062,121298]
at 0
===
insert-node
---
Modifier: public [121168,121174]
to
MethodDeclaration [121062,121298]
at 1
===
insert-node
---
PrimitiveType: void [121175,121179]
to
MethodDeclaration [121062,121298]
at 2
===
insert-node
---
SimpleName: registerListener [121180,121196]
to
MethodDeclaration [121062,121298]
at 3
===
move-tree
---
SingleVariableDeclaration [123158,123178]
    SimpleType [123158,123169]
        SimpleName: TcpListener [123158,123169]
    SimpleName: listener [123170,123178]
to
MethodDeclaration [121062,121298]
at 4
===
insert-node
---
Block [121219,121298]
to
MethodDeclaration [121062,121298]
at 5
===
insert-node
---
Modifier: private [144834,144841]
to
MethodDeclaration [144834,145494]
at 0
===
insert-node
---
PrimitiveType: void [144842,144846]
to
MethodDeclaration [144834,145494]
at 1
===
insert-node
---
SimpleName: sendToChannel [144847,144860]
to
MethodDeclaration [144834,145494]
at 2
===
move-tree
---
SingleVariableDeclaration [148735,148753]
    ParameterizedType [148735,148745]
        SimpleType [148735,148742]
            SimpleName: Message [148735,148742]
        WildcardType [148743,148744]
    SimpleName: message [148746,148753]
to
MethodDeclaration [144834,145494]
at 3
===
insert-node
---
Block [144881,145494]
to
MethodDeclaration [144834,145494]
at 4
===
insert-node
---
VariableDeclarationStatement [3715,3772]
to
Block [3710,4735]
at 0
===
insert-node
---
TryStatement [3776,4731]
to
Block [3710,4735]
at 1
===
insert-tree
---
ExpressionStatement [7223,7274]
    Assignment [7223,7273]
        FieldAccess [7223,7239]
            ThisExpression [7223,7227]
            SimpleName: isSingleUse [7228,7239]
        ASSIGNMENT_OPERATOR: = [7240,7241]
        MethodInvocation [7242,7273]
            METHOD_INVOCATION_RECEIVER [7242,7259]
                SimpleName: connectionFactory [7242,7259]
            SimpleName: isSingleUse [7260,7271]
to
Block [6034,6707]
at 4
===
insert-tree
---
VariableDeclarationStatement [15174,15206]
    SimpleType [15174,15187]
        SimpleName: TcpConnection [15174,15187]
    VariableDeclarationFragment [15188,15205]
        SimpleName: connection [15188,15198]
        NullLiteral [15201,15205]
to
Block [14485,16682]
at 2
===
insert-node
---
ExpressionStatement [18741,18784]
to
Block [18736,18931]
at 0
===
move-tree
---
ExpressionStatement [18557,18598]
    MethodInvocation [18557,18597]
        METHOD_INVOCATION_RECEIVER [18557,18574]
            SimpleName: connectionFactory [18557,18574]
        SimpleName: registerListener [18575,18591]
        METHOD_INVOCATION_ARGUMENTS [18592,18596]
            ThisExpression [18592,18596]
to
Block [18736,18931]
at 1
===
move-tree
---
ExpressionStatement [18602,18641]
    MethodInvocation [18602,18640]
        METHOD_INVOCATION_RECEIVER [18602,18619]
            SimpleName: connectionFactory [18602,18619]
        SimpleName: registerSender [18620,18634]
        METHOD_INVOCATION_ARGUMENTS [18635,18639]
            ThisExpression [18635,18639]
to
Block [18736,18931]
at 2
===
insert-tree
---
ExpressionStatement [18876,18927]
    Assignment [18876,18926]
        FieldAccess [18876,18892]
            ThisExpression [18876,18880]
            SimpleName: isSingleUse [18881,18892]
        ASSIGNMENT_OPERATOR: = [18893,18894]
        MethodInvocation [18895,18926]
            METHOD_INVOCATION_RECEIVER [18895,18912]
                SimpleName: connectionFactory [18895,18912]
            SimpleName: isSingleUse [18913,18924]
to
Block [18736,18931]
at 3
===
move-tree
---
ExpressionStatement [19508,19539]
    MethodInvocation [19508,19538]
        METHOD_INVOCATION_RECEIVER [19508,19530]
            FieldAccess [19508,19530]
                ThisExpression [19508,19512]
                SimpleName: connectionFactory [19513,19530]
        SimpleName: start [19531,19536]
to
Block [19650,19690]
at 0
===
insert-node
---
VariableDeclarationStatement [25029,25086]
to
Block [25024,26245]
at 0
===
insert-node
---
TryStatement [25090,26241]
to
Block [25024,26245]
at 1
===
insert-tree
---
ExpressionStatement [28490,28541]
    Assignment [28490,28540]
        FieldAccess [28490,28506]
            ThisExpression [28490,28494]
            SimpleName: isSingleUse [28495,28506]
        ASSIGNMENT_OPERATOR: = [28507,28508]
        MethodInvocation [28509,28540]
            METHOD_INVOCATION_RECEIVER [28509,28526]
                SimpleName: connectionFactory [28509,28526]
            SimpleName: isSingleUse [28527,28538]
to
Block [27315,27561]
at 2
===
insert-tree
---
TagElement [36367,36390]
    TextElement:  the connection. [36374,36390]
to
Javadoc [34716,34809]
at 2
===
insert-tree
---
ReturnStatement [37036,37054]
    SimpleName: connection [37043,37053]
to
Block [34855,35440]
at 2
===
insert-tree
---
ExpressionStatement [38237,38288]
    Assignment [38237,38287]
        FieldAccess [38237,38253]
            ThisExpression [38237,38241]
            SimpleName: isSingleUse [38242,38253]
        ASSIGNMENT_OPERATOR: = [38254,38255]
        MethodInvocation [38256,38287]
            METHOD_INVOCATION_RECEIVER [38256,38273]
                SimpleName: connectionFactory [38256,38273]
            SimpleName: isSingleUse [38274,38285]
to
Block [36371,36616]
at 1
===
move-tree
---
SimpleType [50568,50588]
    SimpleName: TcpConnectionSupport [50568,50588]
to
ParameterizedType [79323,79352]
at 2
===
update-node
---
SimpleName: deferredClosures [79353,79369]
replace deferredClosures by connections
===
move-tree
---
ExpressionStatement [70978,71051]
    MethodInvocation [70978,71050]
        METHOD_INVOCATION_RECEIVER [70978,70984]
            SimpleName: Assert [70978,70984]
        SimpleName: notNull [70985,70992]
        METHOD_INVOCATION_ARGUMENTS [70993,71049]
            SimpleName: connectionId [70993,71005]
            StringLiteral: "'connectionId' to close must not be null" [71007,71049]
to
Block [71086,71563]
at 0
===
move-tree
---
SynchronizedStatement [71055,71563]
    FieldAccess [71068,71084]
        ThisExpression [71068,71072]
        SimpleName: connections [71073,71084]
    Block [71086,71563]
        VariableDeclarationStatement [71092,71115]
            PrimitiveType: boolean [71092,71099]
            VariableDeclarationFragment [71100,71114]
                SimpleName: closed [71100,71106]
                BooleanLiteral: false [71109,71114]
        EnhancedForStatement [71120,71539]
            SingleVariableDeclaration [71125,71156]
                SimpleType [71125,71145]
                    SimpleName: TcpConnectionSupport [71125,71145]
                SimpleName: connection [71146,71156]
            SimpleName: connections [71159,71170]
            Block [71172,71539]
                IfStatement [71179,71533]
                    MethodInvocation [71183,71232]
                        METHOD_INVOCATION_RECEIVER [71183,71195]
                            SimpleName: connectionId [71183,71195]
                        SimpleName: equals [71196,71202]
                        METHOD_INVOCATION_ARGUMENTS [71203,71231]
                            MethodInvocation [71203,71231]
                                METHOD_INVOCATION_RECEIVER [71203,71213]
                                    SimpleName: connection [71203,71213]
                                SimpleName: getConnectionId [71214,71229]
                    Block [71234,71533]
                        TryStatement [71242,71526]
                            Block [71246,71318]
                                ExpressionStatement [71255,71274]
                                    MethodInvocation [71255,71273]
                                        METHOD_INVOCATION_RECEIVER [71255,71265]
                                            SimpleName: connection [71255,71265]
                                        SimpleName: close [71266,71271]
                                ExpressionStatement [71282,71296]
                                    Assignment [71282,71295]
                                        SimpleName: closed [71282,71288]
                                        ASSIGNMENT_OPERATOR: = [71289,71290]
                                        BooleanLiteral: true [71291,71295]
                                BreakStatement [71304,71310]
                            CatchClause [71325,71526]
                                SingleVariableDeclaration [71332,71343]
                                    SimpleType [71332,71341]
                                        SimpleName: Exception [71332,71341]
                                    SimpleName: e [71342,71343]
                                Block [71345,71526]
                                    IfStatement [71354,71464]
                                        MethodInvocation [71358,71381]
                                            METHOD_INVOCATION_RECEIVER [71358,71364]
                                                SimpleName: logger [71358,71364]
                                            SimpleName: isDebugEnabled [71365,71379]
                                        Block [71383,71464]
                                            ExpressionStatement [71393,71455]
                                                MethodInvocation [71393,71454]
                                                    METHOD_INVOCATION_RECEIVER [71393,71399]
                                                        SimpleName: logger [71393,71399]
                                                    SimpleName: debug [71400,71405]
                                                    METHOD_INVOCATION_ARGUMENTS [71406,71453]
                                                        InfixExpression [71406,71450]
                                                            StringLiteral: "Failed to close connection " [71406,71435]
                                                            INFIX_EXPRESSION_OPERATOR: + [71436,71437]
                                                            SimpleName: connectionId [71438,71450]
                                                        SimpleName: e [71452,71453]
                                    ExpressionStatement [71472,71518]
                                        MethodInvocation [71472,71517]
                                            METHOD_INVOCATION_RECEIVER [71472,71482]
                                                SimpleName: connection [71472,71482]
                                            SimpleName: publishConnectionExceptionEvent [71483,71514]
                                            METHOD_INVOCATION_ARGUMENTS [71515,71516]
                                                SimpleName: e [71515,71516]
        ReturnStatement [71544,71558]
            SimpleName: closed [71551,71557]
to
Block [71086,71563]
at 1
===
move-tree
---
MarkerAnnotation [82546,82555]
    SimpleName: Override [82547,82555]
to
MethodDeclaration [82808,83457]
at 0
===
update-node
---
Modifier: private [82808,82815]
replace private by public
===
update-node
---
SimpleName: doClose [82834,82841]
replace doClose by close
===
insert-tree
---
ExpressionStatement [92996,93037]
    SuperMethodInvocation [92996,93036]
        SimpleName: enableManualListenerRegistration [93002,93034]
to
Block [90447,90506]
at 0
===
insert-node
---
ExpressionStatement [93041,93105]
to
Block [90447,90506]
at 1
===
insert-node
---
IfStatement [97601,97693]
to
Block [98080,98517]
at 3
===
move-tree
---
ExpressionStatement [123185,123210]
    Assignment [123185,123209]
        FieldAccess [123185,123198]
            ThisExpression [123185,123189]
            SimpleName: listener [123190,123198]
        ASSIGNMENT_OPERATOR: = [123199,123200]
        SimpleName: listener [123201,123209]
to
Block [121219,121298]
at 0
===
move-tree
---
ExpressionStatement [123712,123753]
    MethodInvocation [123712,123752]
        METHOD_INVOCATION_RECEIVER [123712,123740]
            FieldAccess [123712,123740]
                ThisExpression [123712,123716]
                SimpleName: listenerRegisteredLatch [123717,123740]
        SimpleName: countDown [123741,123750]
to
Block [121219,121298]
at 1
===
move-tree
---
IfStatement [120303,120383]
    MethodInvocation [120307,120330]
        METHOD_INVOCATION_RECEIVER [120307,120313]
            SimpleName: logger [120307,120313]
        SimpleName: isDebugEnabled [120314,120328]
    Block [120332,120383]
        ExpressionStatement [120338,120378]
            MethodInvocation [120338,120377]
                METHOD_INVOCATION_RECEIVER [120338,120344]
                    SimpleName: logger [120338,120344]
                SimpleName: debug [120345,120350]
                METHOD_INVOCATION_ARGUMENTS [120351,120376]
                    InfixExpression [120351,120376]
                        StringLiteral: "Message sent " [120351,120366]
                        INFIX_EXPRESSION_OPERATOR: + [120367,120368]
                        SimpleName: message [120369,120376]
to
Block [131343,132017]
at 4
===
insert-node
---
TryStatement [144886,145490]
to
Block [144881,145494]
at 0
===
insert-tree
---
ExpressionStatement [190309,190328]
    MethodInvocation [190309,190327]
        METHOD_INVOCATION_RECEIVER [190309,190319]
            SimpleName: connection [190309,190319]
        SimpleName: close [190320,190325]
to
Block [194345,195161]
at 6
===
insert-tree
---
ExpressionStatement [212690,212736]
    MethodInvocation [212690,212735]
        METHOD_INVOCATION_RECEIVER [212690,212718]
            MethodInvocation [212690,212718]
                SimpleName: when [212690,212694]
                METHOD_INVOCATION_ARGUMENTS [212695,212717]
                    MethodInvocation [212695,212717]
                        METHOD_INVOCATION_RECEIVER [212695,212703]
                            SimpleName: factory1 [212695,212703]
                        SimpleName: isSingleUse [212704,212715]
        SimpleName: thenReturn [212719,212729]
        METHOD_INVOCATION_ARGUMENTS [212730,212734]
            BooleanLiteral: true [212730,212734]
to
Block [215471,218501]
at 9
===
insert-tree
---
ExpressionStatement [213594,213629]
    MethodInvocation [213594,213628]
        METHOD_INVOCATION_RECEIVER [213594,213609]
            SimpleName: failoverFactory [213594,213609]
        SimpleName: setSingleUse [213610,213622]
        METHOD_INVOCATION_ARGUMENTS [213623,213627]
            BooleanLiteral: true [213623,213627]
to
Block [215471,218501]
at 22
===
insert-tree
---
ExpressionStatement [213633,213670]
    MethodInvocation [213633,213669]
        METHOD_INVOCATION_RECEIVER [213633,213648]
            SimpleName: failoverFactory [213633,213648]
        SimpleName: afterPropertiesSet [213649,213667]
to
Block [215471,218501]
at 23
===
insert-tree
---
ExpressionStatement [289297,289333]
    MethodInvocation [289297,289332]
        METHOD_INVOCATION_RECEIVER [289297,289302]
            SimpleName: cache [289297,289302]
        SimpleName: setConnectionWaitTimeout [289303,289327]
        METHOD_INVOCATION_ARGUMENTS [289328,289331]
            NumberLiteral: 100 [289328,289331]
to
Block [292458,294052]
at 13
===
insert-tree
---
ExpressionStatement [289472,289492]
    MethodInvocation [289472,289491]
        METHOD_INVOCATION_RECEIVER [289472,289483]
            SimpleName: connection1 [289472,289483]
        SimpleName: close [289484,289489]
to
Block [292458,294052]
at 17
===
insert-tree
---
ExpressionStatement [289613,289633]
    MethodInvocation [289613,289632]
        METHOD_INVOCATION_RECEIVER [289613,289624]
            SimpleName: connection2 [289613,289624]
        SimpleName: close [289625,289630]
to
Block [292458,294052]
at 20
===
insert-tree
---
ExpressionStatement [308776,308807]
    MethodInvocation [308776,308806]
        METHOD_INVOCATION_RECEIVER [308776,308783]
            SimpleName: client1 [308776,308783]
        SimpleName: setBeanName [308784,308795]
        METHOD_INVOCATION_ARGUMENTS [308796,308805]
            StringLiteral: "client1" [308796,308805]
to
Block [312494,315617]
at 7
===
insert-tree
---
ExpressionStatement [308811,308842]
    MethodInvocation [308811,308841]
        METHOD_INVOCATION_RECEIVER [308811,308818]
            SimpleName: client2 [308811,308818]
        SimpleName: setBeanName [308819,308830]
        METHOD_INVOCATION_ARGUMENTS [308831,308840]
            StringLiteral: "client2" [308831,308840]
to
Block [312494,315617]
at 8
===
insert-tree
---
ExpressionStatement [308846,308877]
    MethodInvocation [308846,308876]
        METHOD_INVOCATION_RECEIVER [308846,308853]
            SimpleName: server1 [308846,308853]
        SimpleName: setBeanName [308854,308865]
        METHOD_INVOCATION_ARGUMENTS [308866,308875]
            StringLiteral: "server1" [308866,308875]
to
Block [312494,315617]
at 9
===
insert-tree
---
ExpressionStatement [308881,308912]
    MethodInvocation [308881,308911]
        METHOD_INVOCATION_RECEIVER [308881,308888]
            SimpleName: server2 [308881,308888]
        SimpleName: setBeanName [308889,308900]
        METHOD_INVOCATION_ARGUMENTS [308901,308910]
            StringLiteral: "server2" [308901,308910]
to
Block [312494,315617]
at 10
===
insert-node
---
VariableDeclarationStatement [311166,311187]
to
Block [312494,315617]
at 49
===
insert-node
---
IfStatement [311191,311281]
to
Block [312494,315617]
at 50
===
insert-node
---
IfStatement [311589,311679]
to
Block [312494,315617]
at 59
===
insert-node
---
PrimitiveType: boolean [3715,3722]
to
VariableDeclarationStatement [3715,3772]
at 0
===
insert-node
---
VariableDeclarationFragment [3723,3771]
to
VariableDeclarationStatement [3715,3772]
at 1
===
move-tree
---
Block [3668,4225]
    IfStatement [3673,4204]
        FieldAccess [3677,3694]
            ThisExpression [3677,3681]
            SimpleName: shuttingDown [3682,3694]
        Block [3696,3825]
            IfStatement [3702,3820]
                MethodInvocation [3706,3728]
                    METHOD_INVOCATION_RECEIVER [3706,3712]
                        SimpleName: logger [3706,3712]
                    SimpleName: isInfoEnabled [3713,3726]
                Block [3730,3820]
                    ExpressionStatement [3737,3814]
                        MethodInvocation [3737,3813]
                            METHOD_INVOCATION_RECEIVER [3737,3743]
                                SimpleName: logger [3737,3743]
                            SimpleName: info [3744,3748]
                            METHOD_INVOCATION_ARGUMENTS [3749,3812]
                                InfixExpression [3749,3812]
                                    StringLiteral: "Inbound message ignored; shutting down; " [3749,3791]
                                    INFIX_EXPRESSION_OPERATOR: + [3792,3793]
                                    MethodInvocation [3794,3812]
                                        METHOD_INVOCATION_RECEIVER [3794,3801]
                                            SimpleName: message [3794,3801]
                                        SimpleName: toString [3802,3810]
        Block [3834,4204]
            IfStatement [3840,4048]
                InstanceofExpression [3844,3875]
                    SimpleName: message [3844,3851]
                    SimpleType [3863,3875]
                        SimpleName: ErrorMessage [3863,3875]
                Block [3877,4048]
                    ReturnStatement [4029,4042]
                        BooleanLiteral: false [4036,4041]
            ExpressionStatement [4053,4088]
                MethodInvocation [4053,4087]
                    METHOD_INVOCATION_RECEIVER [4053,4069]
                        FieldAccess [4053,4069]
                            ThisExpression [4053,4057]
                            SimpleName: activeCount [4058,4069]
                    SimpleName: incrementAndGet [4070,4085]
            TryStatement [4093,4199]
                Block [4097,4138]
                    ReturnStatement [4104,4132]
                        MethodInvocation [4111,4131]
                            SimpleName: doOnMessage [4111,4122]
                            METHOD_INVOCATION_ARGUMENTS [4123,4130]
                                SimpleName: message [4123,4130]
                Block [4151,4199]
                    ExpressionStatement [4158,4193]
                        MethodInvocation [4158,4192]
                            METHOD_INVOCATION_RECEIVER [4158,4174]
                                FieldAccess [4158,4174]
                                    ThisExpression [4158,4162]
                                    SimpleName: activeCount [4163,4174]
                            SimpleName: decrementAndGet [4175,4190]
    ReturnStatement [4208,4221]
        BooleanLiteral: false [4215,4220]
to
TryStatement [3776,4731]
at 0
===
insert-node
---
Block [4355,4731]
to
TryStatement [3776,4731]
at 1
===
insert-node
---
Assignment [18741,18783]
to
ExpressionStatement [18741,18784]
at 0
===
insert-node
---
PrimitiveType: boolean [25029,25036]
to
VariableDeclarationStatement [25029,25086]
at 0
===
insert-node
---
VariableDeclarationFragment [25037,25085]
to
VariableDeclarationStatement [25029,25086]
at 1
===
move-tree
---
Block [24769,25319]
    IfStatement [24774,25298]
        FieldAccess [24778,24795]
            ThisExpression [24778,24782]
            SimpleName: shuttingDown [24783,24795]
        Block [24797,24926]
            IfStatement [24803,24921]
                MethodInvocation [24807,24829]
                    METHOD_INVOCATION_RECEIVER [24807,24813]
                        SimpleName: logger [24807,24813]
                    SimpleName: isInfoEnabled [24814,24827]
                Block [24831,24921]
                    ExpressionStatement [24838,24915]
                        MethodInvocation [24838,24914]
                            METHOD_INVOCATION_RECEIVER [24838,24844]
                                SimpleName: logger [24838,24844]
                            SimpleName: info [24845,24849]
                            METHOD_INVOCATION_ARGUMENTS [24850,24913]
                                InfixExpression [24850,24913]
                                    StringLiteral: "Inbound message ignored; shutting down; " [24850,24892]
                                    INFIX_EXPRESSION_OPERATOR: + [24893,24894]
                                    MethodInvocation [24895,24913]
                                        METHOD_INVOCATION_RECEIVER [24895,24902]
                                            SimpleName: message [24895,24902]
                                        SimpleName: toString [24903,24911]
        Block [24935,25298]
            IfStatement [24941,25149]
                InstanceofExpression [24945,24976]
                    SimpleName: message [24945,24952]
                    SimpleType [24964,24976]
                        SimpleName: ErrorMessage [24964,24976]
                Block [24978,25149]
                    ReturnStatement [25130,25143]
                        BooleanLiteral: false [25137,25142]
            ExpressionStatement [25154,25189]
                MethodInvocation [25154,25188]
                    METHOD_INVOCATION_RECEIVER [25154,25170]
                        FieldAccess [25154,25170]
                            ThisExpression [25154,25158]
                            SimpleName: activeCount [25159,25170]
                    SimpleName: incrementAndGet [25171,25186]
            TryStatement [25194,25293]
                Block [25198,25232]
                    ExpressionStatement [25205,25226]
                        MethodInvocation [25205,25225]
                            SimpleName: sendMessage [25205,25216]
                            METHOD_INVOCATION_ARGUMENTS [25217,25224]
                                SimpleName: message [25217,25224]
                Block [25245,25293]
                    ExpressionStatement [25252,25287]
                        MethodInvocation [25252,25286]
                            METHOD_INVOCATION_RECEIVER [25252,25268]
                                FieldAccess [25252,25268]
                                    ThisExpression [25252,25256]
                                    SimpleName: activeCount [25257,25268]
                            SimpleName: decrementAndGet [25269,25284]
    ReturnStatement [25302,25315]
        BooleanLiteral: false [25309,25314]
to
TryStatement [25090,26241]
at 0
===
insert-node
---
Block [25662,26241]
to
TryStatement [25090,26241]
at 1
===
move-tree
---
Block [71172,71539]
    IfStatement [71179,71533]
        MethodInvocation [71183,71232]
            METHOD_INVOCATION_RECEIVER [71183,71195]
                SimpleName: connectionId [71183,71195]
            SimpleName: equals [71196,71202]
            METHOD_INVOCATION_ARGUMENTS [71203,71231]
                MethodInvocation [71203,71231]
                    METHOD_INVOCATION_RECEIVER [71203,71213]
                        SimpleName: connection [71203,71213]
                    SimpleName: getConnectionId [71214,71229]
        Block [71234,71533]
            TryStatement [71242,71526]
                Block [71246,71318]
                    ExpressionStatement [71255,71274]
                        MethodInvocation [71255,71273]
                            METHOD_INVOCATION_RECEIVER [71255,71265]
                                SimpleName: connection [71255,71265]
                            SimpleName: close [71266,71271]
                    ExpressionStatement [71282,71296]
                        Assignment [71282,71295]
                            SimpleName: closed [71282,71288]
                            ASSIGNMENT_OPERATOR: = [71289,71290]
                            BooleanLiteral: true [71291,71295]
                    BreakStatement [71304,71310]
                CatchClause [71325,71526]
                    SingleVariableDeclaration [71332,71343]
                        SimpleType [71332,71341]
                            SimpleName: Exception [71332,71341]
                        SimpleName: e [71342,71343]
                    Block [71345,71526]
                        IfStatement [71354,71464]
                            MethodInvocation [71358,71381]
                                METHOD_INVOCATION_RECEIVER [71358,71364]
                                    SimpleName: logger [71358,71364]
                                SimpleName: isDebugEnabled [71365,71379]
                            Block [71383,71464]
                                ExpressionStatement [71393,71455]
                                    MethodInvocation [71393,71454]
                                        METHOD_INVOCATION_RECEIVER [71393,71399]
                                            SimpleName: logger [71393,71399]
                                        SimpleName: debug [71400,71405]
                                        METHOD_INVOCATION_ARGUMENTS [71406,71453]
                                            InfixExpression [71406,71450]
                                                StringLiteral: "Failed to close connection " [71406,71435]
                                                INFIX_EXPRESSION_OPERATOR: + [71436,71437]
                                                SimpleName: connectionId [71438,71450]
                                            SimpleName: e [71452,71453]
                        ExpressionStatement [71472,71518]
                            MethodInvocation [71472,71517]
                                METHOD_INVOCATION_RECEIVER [71472,71482]
                                    SimpleName: connection [71472,71482]
                                SimpleName: publishConnectionExceptionEvent [71483,71514]
                                METHOD_INVOCATION_ARGUMENTS [71515,71516]
                                    SimpleName: e [71515,71516]
to
SynchronizedStatement [71055,71563]
at 1
===
update-node
---
TextElement: Transfers attributes such as (de)serializer, singleUse etc to a new connection. [74660,74739]
replace Transfers attributes such as (de)serializer, singleUse etc to a new connection. by Transfers attributes such as (de)serializer, mapper etc to a new connection.
===
update-node
---
TextElement: For single use sockets, enforces a socket timeout (default 10 seconds). [74745,74816]
replace For single use sockets, enforces a socket timeout (default 10 seconds). by For single use sockets, enforces a socket timeout (default 10 seconds) to prevent
===
insert-node
---
TextElement: DoS attacks. [77130,77142]
to
TagElement [74660,74816]
at 2
===
move-tree
---
MethodInvocation [90459,90501]
    METHOD_INVOCATION_RECEIVER [90459,90487]
        FieldAccess [90459,90487]
            ThisExpression [90459,90463]
            SimpleName: targetConnectionFactory [90464,90487]
    SimpleName: isSingleUse [90488,90499]
to
ExpressionStatement [93041,93105]
at 0
===
insert-tree
---
InfixExpression [97605,97626]
    MethodInvocation [97605,97618]
        SimpleName: getListener [97605,97616]
    INFIX_EXPRESSION_OPERATOR: != [97619,97621]
    NullLiteral [97622,97626]
to
IfStatement [97601,97693]
at 0
===
insert-node
---
Block [97628,97693]
to
IfStatement [97601,97693]
at 1
===
move-tree
---
Block [97762,97816]
    ExpressionStatement [97768,97811]
        MethodInvocation [97768,97810]
            METHOD_INVOCATION_RECEIVER [97768,97775]
                SimpleName: factory [97768,97775]
            SimpleName: enableManualListenerRegistration [97776,97808]
to
EnhancedForStatement [98561,98651]
at 2
===
update-node
---
TextElement: If there is no listener, and this connection is not for single use, [132600,132667]
replace If there is no listener, and this connection is not for single use, by If there is no listener,
===
update-node
---
TextElement:  method is called. For single use [132922,132955]
replace  method is called. For single use by  method is called.
===
update-node
---
TextElement: If there is no listener, and this connection is not for single use, [143464,143531]
replace If there is no listener, and this connection is not for single use, by If there is no listener,
===
insert-node
---
Block [144890,145094]
to
TryStatement [144886,145490]
at 0
===
insert-node
---
CatchClause [145098,145490]
to
TryStatement [144886,145490]
at 1
===
move-tree
---
SimpleType [18365,18396]
    SimpleName: AbstractClientConnectionFactory [18365,18396]
to
VariableDeclarationStatement [200749,200834]
at 0
===
move-tree
---
SimpleType [18502,18533]
    SimpleName: AbstractClientConnectionFactory [18502,18533]
to
VariableDeclarationStatement [204037,204122]
at 0
===
update-node
---
SimpleName: AbstractConnectionFactory [208845,208870]
replace AbstractConnectionFactory by AbstractClientConnectionFactory
===
move-tree
---
SimpleType [314972,314978]
    SimpleName: Socket [314972,314978]
to
VariableDeclarationStatement [311166,311187]
at 0
===
insert-node
---
VariableDeclarationFragment [311173,311186]
to
VariableDeclarationStatement [311166,311187]
at 1
===
move-tree
---
PrefixExpression [133287,133297]
    PREFIX_EXPRESSION_OPERATOR: ! [133287,133288]
    SimpleName: singleUse [133288,133297]
to
IfStatement [311191,311281]
at 0
===
insert-node
---
Block [311207,311281]
to
IfStatement [311191,311281]
at 1
===
insert-tree
---
PrefixExpression [311593,311603]
    PREFIX_EXPRESSION_OPERATOR: ! [311593,311594]
    SimpleName: singleUse [311594,311603]
to
IfStatement [311589,311679]
at 0
===
insert-node
---
Block [311605,311679]
to
IfStatement [311589,311679]
at 1
===
insert-node
---
SimpleName: isErrorMessage [3723,3737]
to
VariableDeclarationFragment [3723,3771]
at 0
===
move-tree
---
InstanceofExpression [24945,24976]
    SimpleName: message [24945,24952]
    SimpleType [24964,24976]
        SimpleName: ErrorMessage [24964,24976]
to
VariableDeclarationFragment [3723,3771]
at 1
===
insert-tree
---
VariableDeclarationStatement [4361,4442]
    SimpleType [4361,4367]
        SimpleName: String [4361,4367]
    VariableDeclarationFragment [4368,4441]
        SimpleName: connectionId [4368,4380]
        CastExpression [4383,4441]
            SimpleType [4384,4390]
                SimpleName: String [4384,4390]
            MethodInvocation [4392,4441]
                METHOD_INVOCATION_RECEIVER [4392,4412]
                    MethodInvocation [4392,4412]
                        METHOD_INVOCATION_RECEIVER [4392,4399]
                            SimpleName: message [4392,4399]
                        SimpleName: getHeaders [4400,4410]
                SimpleName: get [4413,4416]
                METHOD_INVOCATION_ARGUMENTS [4417,4440]
                    QualifiedName: IpHeaders.CONNECTION_ID [4417,4440]
to
Block [4355,4731]
at 0
===
insert-node
---
IfStatement [4447,4726]
to
Block [4355,4731]
at 1
===
insert-node
---
ExpressionStatement [15615,15667]
to
Block [14671,16063]
at 2
===
insert-node
---
IfStatement [15902,15996]
to
Block [14671,16063]
at 7
===
move-tree
---
FieldAccess [18476,18498]
    ThisExpression [18476,18480]
    SimpleName: connectionFactory [18481,18498]
to
Assignment [18741,18783]
at 0
===
insert-node
---
ASSIGNMENT_OPERATOR: = [18764,18765]
to
Assignment [18741,18783]
at 1
===
insert-node
---
SimpleName: connectionFactory [18766,18783]
to
Assignment [18741,18783]
at 2
===
insert-node
---
SimpleName: isErrorMessage [25037,25051]
to
VariableDeclarationFragment [25037,25085]
at 0
===
move-tree
---
InstanceofExpression [3844,3875]
    SimpleName: message [3844,3851]
    SimpleType [3863,3875]
        SimpleName: ErrorMessage [3863,3875]
to
VariableDeclarationFragment [25037,25085]
at 1
===
insert-node
---
VariableDeclarationStatement [25668,25749]
to
Block [25662,26241]
at 0
===
insert-node
---
IfStatement [25754,26236]
to
Block [25662,26241]
at 1
===
insert-tree
---
VariableDeclarationStatement [35566,35598]
    SimpleType [35566,35579]
        SimpleName: TcpConnection [35566,35579]
    VariableDeclarationFragment [35580,35597]
        SimpleName: connection [35580,35590]
        NullLiteral [35593,35597]
to
Block [34334,34707]
at 0
===
move-tree
---
SimpleType [50619,50639]
    SimpleName: TcpConnectionSupport [50619,50639]
to
ParameterizedType [79380,79423]
at 2
===
insert-node
---
VariableDeclarationStatement [61066,61162]
to
Block [59392,59610]
at 0
===
move-tree
---
IfStatement [15417,15513]
    MethodInvocation [15421,15444]
        METHOD_INVOCATION_RECEIVER [15421,15427]
            SimpleName: logger [15421,15427]
        SimpleName: isDebugEnabled [15428,15442]
    Block [15446,15513]
        ExpressionStatement [15453,15507]
            MethodInvocation [15453,15506]
                METHOD_INVOCATION_RECEIVER [15453,15459]
                    SimpleName: logger [15453,15459]
                SimpleName: debug [15460,15465]
                METHOD_INVOCATION_ARGUMENTS [15466,15505]
                    InfixExpression [15466,15505]
                        StringLiteral: "Added " [15466,15474]
                        INFIX_EXPRESSION_OPERATOR: + [15475,15476]
                        MethodInvocation [15477,15505]
                            METHOD_INVOCATION_RECEIVER [15477,15487]
                                SimpleName: connection [15477,15487]
                            SimpleName: getConnectionId [15488,15503]
to
Block [68703,68815]
at 2
===
move-tree
---
VariableDeclarationStatement [71092,71115]
    PrimitiveType: boolean [71092,71099]
    VariableDeclarationFragment [71100,71114]
        SimpleName: closed [71100,71106]
        BooleanLiteral: false [71109,71114]
to
Block [71172,71539]
at 0
===
move-tree
---
VariableDeclarationStatement [59398,59468]
    ParameterizedType [59398,59428]
        SimpleType [59398,59406]
            SimpleName: Iterator [59398,59406]
        SimpleType [59407,59427]
            SimpleName: TcpConnectionSupport [59407,59427]
    VariableDeclarationFragment [59429,59467]
        SimpleName: iterator [59429,59437]
        MethodInvocation [59440,59467]
            METHOD_INVOCATION_RECEIVER [59440,59456]
                FieldAccess [59440,59456]
                    ThisExpression [59440,59444]
                    SimpleName: connections [59445,59456]
            SimpleName: iterator [59457,59465]
to
Block [71172,71539]
at 1
===
move-tree
---
ReturnStatement [71544,71558]
    SimpleName: closed [71551,71557]
to
Block [71172,71539]
at 3
===
update-node
---
SimpleName: isSingleUse [90488,90499]
replace isSingleUse by enableManualListenerRegistration
===
insert-tree
---
ExpressionStatement [95930,95973]
    MethodInvocation [95930,95972]
        METHOD_INVOCATION_RECEIVER [95930,95937]
            SimpleName: factory [95930,95937]
        SimpleName: enableManualListenerRegistration [95938,95970]
to
Block [96063,96206]
at 1
===
move-tree
---
ExpressionStatement [98378,98437]
    MethodInvocation [98378,98436]
        METHOD_INVOCATION_RECEIVER [98378,98399]
            SimpleName: failoverTcpConnection [98378,98399]
        SimpleName: registerListener [98400,98416]
        METHOD_INVOCATION_ARGUMENTS [98417,98435]
            MethodInvocation [98417,98435]
                METHOD_INVOCATION_RECEIVER [98417,98421]
                    ThisExpression [98417,98421]
                SimpleName: getListener [98422,98433]
to
Block [97628,97693]
at 0
===
move-tree
---
ExpressionStatement [98630,98646]
    MethodInvocation [98630,98645]
        METHOD_INVOCATION_RECEIVER [98630,98637]
            SimpleName: factory [98630,98637]
        SimpleName: start [98638,98643]
to
Block [97762,97816]
at 1
===
insert-node
---
IfStatement [122284,122397]
to
Block [124737,124778]
at 0
===
insert-node
---
IfStatement [138873,138955]
to
Block [141882,142603]
at 4
===
insert-node
---
IfStatement [144896,145089]
to
Block [144890,145094]
at 0
===
move-tree
---
SingleVariableDeclaration [148899,148910]
    SimpleType [148899,148908]
        SimpleName: Exception [148899,148908]
    SimpleName: e [148909,148910]
to
CatchClause [145098,145490]
at 0
===
insert-node
---
Block [145118,145490]
to
CatchClause [145098,145490]
at 1
===
update-node
---
SimpleName: destroy [197016,197023]
replace destroy by close
===
update-node
---
SimpleName: AbstractConnectionFactory [205929,205954]
replace AbstractConnectionFactory by AbstractClientConnectionFactory
===
update-node
---
SimpleName: destroy [266234,266241]
replace destroy by close
===
insert-tree
---
ExpressionStatement [289900,289919]
    MethodInvocation [289900,289918]
        METHOD_INVOCATION_RECEIVER [289900,289910]
            SimpleName: connection [289900,289910]
        SimpleName: close [289911,289916]
to
Block [293782,293905]
at 2
===
insert-node
---
NumberLiteral: 0 [308564,308565]
to
VariableDeclarationFragment [312503,312508]
at 1
===
insert-node
---
NumberLiteral: 0 [308582,308583]
to
VariableDeclarationFragment [312517,312522]
at 1
===
move-tree
---
SimpleName: socket [314979,314985]
to
VariableDeclarationFragment [311173,311186]
at 0
===
insert-node
---
NullLiteral [311182,311186]
to
VariableDeclarationFragment [311173,311186]
at 1
===
insert-node
---
ExpressionStatement [311213,311241]
to
Block [311207,311281]
at 0
===
move-tree
---
ExpressionStatement [315011,315041]
    Assignment [315011,315040]
        SimpleName: port1 [315011,315016]
        ASSIGNMENT_OPERATOR: = [315017,315018]
        MethodInvocation [315019,315040]
            METHOD_INVOCATION_RECEIVER [315019,315025]
                SimpleName: socket [315019,315025]
            SimpleName: getLocalPort [315026,315038]
to
Block [311207,311281]
at 1
===
move-tree
---
ExpressionStatement [315349,315377]
    Assignment [315349,315376]
        SimpleName: socket [315349,315355]
        ASSIGNMENT_OPERATOR: = [315356,315357]
        MethodInvocation [315358,315376]
            SimpleName: getSocket [315358,315367]
            METHOD_INVOCATION_ARGUMENTS [315368,315375]
                SimpleName: client2 [315368,315375]
to
Block [311605,311679]
at 0
===
move-tree
---
ExpressionStatement [315381,315411]
    Assignment [315381,315410]
        SimpleName: port2 [315381,315386]
        ASSIGNMENT_OPERATOR: = [315387,315388]
        MethodInvocation [315389,315410]
            METHOD_INVOCATION_RECEIVER [315389,315395]
                SimpleName: socket [315389,315395]
            SimpleName: getLocalPort [315396,315408]
to
Block [311605,311679]
at 1
===
insert-tree
---
InfixExpression [4451,4510]
    InfixExpression [4451,4490]
        InfixExpression [4451,4471]
            SimpleName: connectionId [4451,4463]
            INFIX_EXPRESSION_OPERATOR: != [4464,4466]
            NullLiteral [4467,4471]
        INFIX_EXPRESSION_OPERATOR: && [4472,4474]
        PrefixExpression [4475,4490]
            PREFIX_EXPRESSION_OPERATOR: ! [4475,4476]
            SimpleName: isErrorMessage [4476,4490]
    INFIX_EXPRESSION_OPERATOR: && [4491,4493]
    FieldAccess [4494,4510]
        ThisExpression [4494,4498]
        SimpleName: isSingleUse [4499,4510]
to
IfStatement [4447,4726]
at 0
===
insert-node
---
Block [4512,4726]
to
IfStatement [4447,4726]
at 1
===
insert-node
---
Assignment [15615,15666]
to
ExpressionStatement [15615,15667]
at 0
===
move-tree
---
MethodInvocation [15421,15444]
    METHOD_INVOCATION_RECEIVER [15421,15427]
        SimpleName: logger [15421,15427]
    SimpleName: isDebugEnabled [15428,15442]
to
IfStatement [15902,15996]
at 0
===
insert-node
---
Block [15931,15996]
to
IfStatement [15902,15996]
at 1
===
insert-tree
---
SimpleType [25668,25674]
    SimpleName: String [25668,25674]
to
VariableDeclarationStatement [25668,25749]
at 0
===
insert-node
---
VariableDeclarationFragment [25675,25748]
to
VariableDeclarationStatement [25668,25749]
at 1
===
insert-tree
---
InfixExpression [25758,25817]
    InfixExpression [25758,25797]
        InfixExpression [25758,25778]
            SimpleName: connectionId [25758,25770]
            INFIX_EXPRESSION_OPERATOR: != [25771,25773]
            NullLiteral [25774,25778]
        INFIX_EXPRESSION_OPERATOR: && [25779,25781]
        PrefixExpression [25782,25797]
            PREFIX_EXPRESSION_OPERATOR: ! [25782,25783]
            SimpleName: isErrorMessage [25783,25797]
    INFIX_EXPRESSION_OPERATOR: && [25798,25800]
    FieldAccess [25801,25817]
        ThisExpression [25801,25805]
        SimpleName: isSingleUse [25806,25817]
to
IfStatement [25754,26236]
at 0
===
insert-node
---
Block [25819,26236]
to
IfStatement [25754,26236]
at 1
===
insert-tree
---
Block [35975,36260]
    IfStatement [35982,36254]
        InfixExpression [35986,36085]
            InfixExpression [35986,36024]
                InfixExpression [35986,36004]
                    SimpleName: connection [35986,35996]
                    INFIX_EXPRESSION_OPERATOR: != [35997,35999]
                    NullLiteral [36000,36004]
                INFIX_EXPRESSION_OPERATOR: && [36005,36007]
                FieldAccess [36008,36024]
                    ThisExpression [36008,36012]
                    SimpleName: isSingleUse [36013,36024]
            INFIX_EXPRESSION_OPERATOR: && [36032,36034]
            InfixExpression [36035,36085]
                MethodInvocation [36035,36077]
                    METHOD_INVOCATION_RECEIVER [36035,36063]
                        FieldAccess [36035,36063]
                            ThisExpression [36035,36039]
                            SimpleName: clientConnectionFactory [36040,36063]
                    SimpleName: getListener [36064,36075]
                INFIX_EXPRESSION_OPERATOR: == [36078,36080]
                NullLiteral [36081,36085]
        Block [36087,36254]
            ExpressionStatement [36228,36247]
                MethodInvocation [36228,36246]
                    METHOD_INVOCATION_RECEIVER [36228,36238]
                        SimpleName: connection [36228,36238]
                    SimpleName: close [36239,36244]
to
TryStatement [34369,34702]
at 2
===
move-tree
---
ParameterizedType [59398,59428]
    SimpleType [59398,59406]
        SimpleName: Iterator [59398,59406]
    SimpleType [59407,59427]
        SimpleName: TcpConnectionSupport [59407,59427]
to
VariableDeclarationStatement [61066,61162]
at 0
===
move-tree
---
VariableDeclarationFragment [69157,69195]
    SimpleName: iterator [69157,69165]
    MethodInvocation [69168,69195]
        METHOD_INVOCATION_RECEIVER [69168,69184]
            FieldAccess [69168,69184]
                ThisExpression [69168,69172]
                SimpleName: connections [69173,69184]
        SimpleName: iterator [69185,69193]
to
VariableDeclarationStatement [61066,61162]
at 1
===
insert-tree
---
MethodInvocation [70557,70580]
    METHOD_INVOCATION_RECEIVER [70557,70563]
        SimpleName: logger [70557,70563]
    SimpleName: isDebugEnabled [70564,70578]
to
IfStatement [15417,15513]
at 0
===
insert-tree
---
VariableDeclarationFragment [71051,71100]
    SimpleName: iterator [71051,71059]
    MethodInvocation [71062,71100]
        METHOD_INVOCATION_RECEIVER [71062,71089]
            MethodInvocation [71062,71089]
                METHOD_INVOCATION_RECEIVER [71062,71078]
                    FieldAccess [71062,71078]
                        ThisExpression [71062,71066]
                        SimpleName: connections [71067,71078]
                SimpleName: entrySet [71079,71087]
        SimpleName: iterator [71090,71098]
to
VariableDeclarationStatement [69126,69196]
at 1
===
move-tree
---
SimpleType [71125,71145]
    SimpleName: TcpConnectionSupport [71125,71145]
to
VariableDeclarationStatement [59398,59468]
at 0
===
insert-tree
---
InfixExpression [73546,73564]
    SimpleName: connection [73546,73556]
    INFIX_EXPRESSION_OPERATOR: != [73557,73559]
    NullLiteral [73560,73564]
to
IfStatement [71179,71533]
at 0
===
move-tree
---
MethodInvocation [149587,149610]
    METHOD_INVOCATION_RECEIVER [149587,149593]
        SimpleName: logger [149587,149593]
    SimpleName: isDebugEnabled [149594,149608]
to
IfStatement [122284,122397]
at 0
===
insert-node
---
Block [122313,122397]
to
IfStatement [122284,122397]
at 1
===
insert-tree
---
MethodInvocation [138877,138900]
    METHOD_INVOCATION_RECEIVER [138877,138883]
        SimpleName: logger [138877,138883]
    SimpleName: isDebugEnabled [138884,138898]
to
IfStatement [138873,138955]
at 0
===
insert-node
---
Block [138902,138955]
to
IfStatement [138873,138955]
at 1
===
move-tree
---
InfixExpression [148806,148821]
    SimpleName: message [148806,148813]
    INFIX_EXPRESSION_OPERATOR: != [148814,148816]
    NullLiteral [148817,148821]
to
IfStatement [144896,145089]
at 0
===
insert-node
---
Block [144917,145089]
to
IfStatement [144896,145089]
at 1
===
insert-node
---
IfStatement [145124,145485]
to
Block [145118,145490]
at 0
===
update-node
---
BooleanLiteral: false [217438,217443]
replace false by true
===
insert-node
---
Assignment [311213,311240]
to
ExpressionStatement [311213,311241]
at 0
===
insert-node
---
IfStatement [4519,4720]
to
Block [4512,4726]
at 0
===
insert-node
---
FieldAccess [15256,15272]
to
PrefixExpression [14753,14773]
at 1
===
move-tree
---
SimpleName: connection [15130,15140]
to
Assignment [15615,15666]
at 0
===
insert-node
---
ASSIGNMENT_OPERATOR: = [15626,15627]
to
Assignment [15615,15666]
at 1
===
move-tree
---
MethodInvocation [15143,15181]
    METHOD_INVOCATION_RECEIVER [15143,15165]
        FieldAccess [15143,15165]
            ThisExpression [15143,15147]
            SimpleName: connectionFactory [15148,15165]
    SimpleName: getConnection [15166,15179]
to
Assignment [15615,15666]
at 2
===
insert-node
---
ExpressionStatement [15938,15990]
to
Block [15931,15996]
at 0
===
insert-node
---
IfStatement [16119,16213]
to
Block [15629,15945]
at 0
===
insert-node
---
IfStatement [16849,16947]
to
Block [16333,16382]
at 1
===
insert-tree
---
IfStatement [16953,17009]
    FieldAccess [16957,16973]
        ThisExpression [16957,16961]
        SimpleName: isSingleUse [16962,16973]
    Block [16975,17009]
        ExpressionStatement [16983,17002]
            MethodInvocation [16983,17001]
                METHOD_INVOCATION_RECEIVER [16983,16993]
                    SimpleName: connection [16983,16993]
                SimpleName: close [16994,16999]
to
Block [16333,16382]
at 2
===
insert-node
---
SimpleName: connectionId [25675,25687]
to
VariableDeclarationFragment [25675,25748]
at 0
===
insert-node
---
CastExpression [25690,25748]
to
VariableDeclarationFragment [25675,25748]
at 1
===
insert-node
---
IfStatement [25826,26230]
to
Block [25819,26236]
at 0
===
insert-node
---
ParameterizedType [61075,61110]
to
ParameterizedType [59398,59428]
at 1
===
insert-node
---
MethodInvocation [61123,61161]
to
VariableDeclarationFragment [69157,69195]
at 1
===
update-node
---
SimpleName: add [68794,68797]
replace add by put
===
insert-node
---
ParameterizedType [71014,71049]
to
ParameterizedType [69126,69156]
at 1
===
insert-tree
---
VariableDeclarationStatement [71206,71257]
    SimpleType [71206,71226]
        SimpleName: TcpConnectionSupport [71206,71226]
    VariableDeclarationFragment [71227,71256]
        SimpleName: connection [71227,71237]
        MethodInvocation [71240,71256]
            METHOD_INVOCATION_RECEIVER [71240,71245]
                SimpleName: entry [71240,71245]
            SimpleName: getValue [71246,71254]
to
Block [69228,69427]
at 1
===
update-node
---
SimpleName: connectionId [71183,71195]
replace connectionId by TcpConnectionSupport
===
move-tree
---
SimpleName: connectionId [71183,71195]
to
SimpleType [71125,71145]
at 0
===
update-node
---
SimpleName: iterator [59429,59437]
replace iterator by connection
===
insert-node
---
ExpressionStatement [122320,122391]
to
Block [122313,122397]
at 0
===
move-tree
---
METHOD_INVOCATION_ARGUMENTS [19493,19497]
    BooleanLiteral: true [19493,19497]
to
MethodInvocation [136006,136032]
at 2
===
move-tree
---
ExpressionStatement [142574,142598]
    MethodInvocation [142574,142597]
        METHOD_INVOCATION_RECEIVER [142574,142578]
            ThisExpression [142574,142578]
        SimpleName: afterSend [142579,142588]
        METHOD_INVOCATION_ARGUMENTS [142589,142596]
            SimpleName: message [142589,142596]
to
Block [138902,138955]
at 0
===
move-tree
---
InstanceofExpression [148372,148407]
    SimpleName: e [148372,148373]
    SimpleType [148385,148407]
        SimpleName: SocketTimeoutException [148385,148407]
to
IfStatement [148368,148658]
at 0
===
insert-tree
---
VariableDeclarationStatement [144924,144961]
    SimpleType [144924,144935]
        SimpleName: TcpListener [144924,144935]
    VariableDeclarationFragment [144936,144960]
        SimpleName: listener [144936,144944]
        MethodInvocation [144947,144960]
            SimpleName: getListener [144947,144958]
to
Block [144917,145089]
at 0
===
insert-node
---
IfStatement [144967,145049]
to
Block [144917,145089]
at 1
===
insert-node
---
ExpressionStatement [145055,145083]
to
Block [144917,145089]
at 2
===
move-tree
---
InstanceofExpression [148922,148954]
    SimpleName: e [148922,148923]
    SimpleType [148935,148954]
        SimpleName: NoListenerException [148935,148954]
to
IfStatement [145124,145485]
at 0
===
insert-node
---
Block [145162,145405]
to
IfStatement [145124,145485]
at 1
===
move-tree
---
Block [149189,149259]
    ExpressionStatement [149196,149253]
        MethodInvocation [149196,149252]
            METHOD_INVOCATION_RECEIVER [149196,149202]
                SimpleName: logger [149196,149202]
            SimpleName: error [149203,149208]
            METHOD_INVOCATION_ARGUMENTS [149209,149251]
                InfixExpression [149209,149248]
                    StringLiteral: "Exception sending message: " [149209,149238]
                    INFIX_EXPRESSION_OPERATOR: + [149239,149240]
                    SimpleName: message [149241,149248]
                SimpleName: e [149250,149251]
to
IfStatement [145124,145485]
at 2
===
insert-node
---
SimpleName: socket [311213,311219]
to
Assignment [311213,311240]
at 0
===
insert-node
---
ASSIGNMENT_OPERATOR: = [311220,311221]
to
Assignment [311213,311240]
at 1
===
move-tree
---
MethodInvocation [314988,315006]
    SimpleName: getSocket [314988,314997]
    METHOD_INVOCATION_ARGUMENTS [314998,315005]
        SimpleName: client1 [314998,315005]
to
Assignment [311213,311240]
at 2
===
insert-node
---
METHOD_INVOCATION_RECEIVER [339589,339676]
to
MethodInvocation [343336,343405]
at 0
===
update-node
---
SimpleName: get [343399,343402]
replace get by next
===
insert-node
---
SimpleName: isErrorMessage [3963,3977]
to
IfStatement [3840,4048]
at 0
===
insert-tree
---
InfixExpression [4523,4559]
    FieldAccess [4523,4551]
        ThisExpression [4523,4527]
        SimpleName: serverConnectionFactory [4528,4551]
    INFIX_EXPRESSION_OPERATOR: != [4552,4554]
    NullLiteral [4555,4559]
to
IfStatement [4519,4720]
at 0
===
insert-tree
---
Block [4561,4635]
    ExpressionStatement [4569,4628]
        MethodInvocation [4569,4627]
            METHOD_INVOCATION_RECEIVER [4569,4597]
                FieldAccess [4569,4597]
                    ThisExpression [4569,4573]
                    SimpleName: serverConnectionFactory [4574,4597]
            SimpleName: closeConnection [4598,4613]
            METHOD_INVOCATION_ARGUMENTS [4614,4626]
                SimpleName: connectionId [4614,4626]
to
IfStatement [4519,4720]
at 1
===
insert-node
---
Block [4646,4720]
to
IfStatement [4519,4720]
at 2
===
insert-node
---
ThisExpression [15256,15260]
to
FieldAccess [15256,15272]
at 0
===
update-node
---
SimpleName: singleUseConnection [14754,14773]
replace singleUseConnection by isSingleUse
===
move-tree
---
SimpleName: singleUseConnection [14754,14773]
to
FieldAccess [15256,15272]
at 1
===
insert-node
---
MethodInvocation [15938,15989]
to
ExpressionStatement [15938,15990]
at 0
===
move-tree
---
MethodInvocation [15640,15663]
    METHOD_INVOCATION_RECEIVER [15640,15646]
        SimpleName: logger [15640,15646]
    SimpleName: isDebugEnabled [15647,15661]
to
IfStatement [16119,16213]
at 0
===
insert-node
---
Block [16148,16213]
to
IfStatement [16119,16213]
at 1
===
move-tree
---
MethodInvocation [120583,120606]
    METHOD_INVOCATION_RECEIVER [120583,120589]
        SimpleName: logger [120583,120589]
    SimpleName: isDebugEnabled [120590,120604]
to
IfStatement [16849,16947]
at 0
===
insert-node
---
Block [16878,16947]
to
IfStatement [16849,16947]
at 1
===
insert-node
---
SimpleName: isErrorMessage [25277,25291]
to
IfStatement [24941,25149]
at 0
===
move-tree
---
SimpleType [79483,79489]
    SimpleName: String [79483,79489]
to
CastExpression [25690,25748]
at 0
===
insert-tree
---
MethodInvocation [25699,25748]
    METHOD_INVOCATION_RECEIVER [25699,25719]
        MethodInvocation [25699,25719]
            METHOD_INVOCATION_RECEIVER [25699,25706]
                SimpleName: message [25699,25706]
            SimpleName: getHeaders [25707,25717]
    SimpleName: get [25720,25723]
    METHOD_INVOCATION_ARGUMENTS [25724,25747]
        QualifiedName: IpHeaders.CONNECTION_ID [25724,25747]
to
CastExpression [25690,25748]
at 1
===
insert-tree
---
InfixExpression [25830,25866]
    FieldAccess [25830,25858]
        ThisExpression [25830,25834]
        SimpleName: serverConnectionFactory [25835,25858]
    INFIX_EXPRESSION_OPERATOR: != [25859,25861]
    NullLiteral [25862,25866]
to
IfStatement [25826,26230]
at 0
===
insert-tree
---
Block [25868,26145]
    IfStatement [26008,26138]
        InfixExpression [26012,26060]
            MethodInvocation [26012,26052]
                METHOD_INVOCATION_RECEIVER [26012,26040]
                    FieldAccess [26012,26040]
                        ThisExpression [26012,26016]
                        SimpleName: serverConnectionFactory [26017,26040]
                SimpleName: getSender [26041,26050]
            INFIX_EXPRESSION_OPERATOR: == [26053,26055]
            NullLiteral [26056,26060]
        Block [26062,26138]
            ExpressionStatement [26071,26130]
                MethodInvocation [26071,26129]
                    METHOD_INVOCATION_RECEIVER [26071,26099]
                        FieldAccess [26071,26099]
                            ThisExpression [26071,26075]
                            SimpleName: serverConnectionFactory [26076,26099]
                    SimpleName: closeConnection [26100,26115]
                    METHOD_INVOCATION_ARGUMENTS [26116,26128]
                        SimpleName: connectionId [26116,26128]
to
IfStatement [25826,26230]
at 1
===
insert-node
---
Block [26156,26230]
to
IfStatement [25826,26230]
at 2
===
insert-tree
---
Block [35063,35160]
    IfStatement [35071,35153]
        FieldAccess [35075,35091]
            ThisExpression [35075,35079]
            SimpleName: isSingleUse [35080,35091]
        Block [35093,35153]
            ExpressionStatement [35126,35145]
                MethodInvocation [35126,35144]
                    METHOD_INVOCATION_RECEIVER [35126,35136]
                        SimpleName: connection [35126,35136]
                    SimpleName: close [35137,35142]
to
TryStatement [33608,33963]
at 2
===
insert-node
---
Assignment [35614,35643]
to
ExpressionStatement [34380,34397]
at 0
===
insert-tree
---
SimpleType [61075,61080]
    SimpleName: Entry [61075,61080]
to
ParameterizedType [61075,61110]
at 0
===
insert-tree
---
SimpleType [61081,61087]
    SimpleName: String [61081,61087]
to
ParameterizedType [61075,61110]
at 1
===
move-tree
---
SimpleType [59407,59427]
    SimpleName: TcpConnectionSupport [59407,59427]
to
ParameterizedType [61075,61110]
at 2
===
insert-node
---
METHOD_INVOCATION_RECEIVER [61123,61150]
to
MethodInvocation [61123,61161]
at 0
===
insert-node
---
SimpleName: iterator [61151,61159]
to
MethodInvocation [61123,61161]
at 1
===
move-tree
---
MethodInvocation [71203,71231]
    METHOD_INVOCATION_RECEIVER [71203,71213]
        SimpleName: connection [71203,71213]
    SimpleName: getConnectionId [71214,71229]
to
METHOD_INVOCATION_ARGUMENTS [68798,68808]
at 0
===
insert-node
---
SimpleName: connection [70536,70546]
to
METHOD_INVOCATION_ARGUMENTS [68798,68808]
at 1
===
insert-tree
---
SimpleType [71014,71019]
    SimpleName: Entry [71014,71019]
to
ParameterizedType [71014,71049]
at 0
===
move-tree
---
SimpleType [79449,79455]
    SimpleName: String [79449,79455]
to
ParameterizedType [71014,71049]
at 1
===
move-tree
---
SimpleType [69135,69155]
    SimpleName: TcpConnectionSupport [69135,69155]
to
ParameterizedType [71014,71049]
at 2
===
insert-node
---
ParameterizedType [71140,71175]
to
VariableDeclarationStatement [69235,69278]
at 0
===
update-node
---
SimpleName: iterator [59457,59465]
replace iterator by get
===
move-tree
---
METHOD_INVOCATION_ARGUMENTS [82114,82126]
    SimpleName: connectionId [82114,82126]
to
MethodInvocation [59440,59467]
at 2
===
move-tree
---
MethodInvocation [148844,148857]
    SimpleName: getListener [148844,148855]
to
METHOD_INVOCATION_ARGUMENTS [98417,98435]
at 0
===
insert-node
---
MethodInvocation [122320,122390]
to
ExpressionStatement [122320,122391]
at 0
===
move-tree
---
InstanceofExpression [136095,136130]
    SimpleName: e [136095,136096]
    SimpleType [136108,136130]
        SimpleName: SocketTimeoutException [136108,136130]
to
IfStatement [136091,137147]
at 0
===
move-tree
---
InfixExpression [133267,133283]
    SimpleName: listener [133267,133275]
    INFIX_EXPRESSION_OPERATOR: == [133276,133278]
    NullLiteral [133279,133283]
to
IfStatement [144967,145049]
at 0
===
insert-tree
---
Block [144989,145049]
    ThrowStatement [144997,145042]
        ClassInstanceCreation [145003,145041]
            SimpleType [145007,145026]
                SimpleName: NoListenerException [145007,145026]
            StringLiteral: "No listener" [145027,145040]
to
IfStatement [144967,145049]
at 1
===
insert-node
---
MethodInvocation [145055,145082]
to
ExpressionStatement [145055,145083]
at 0
===
insert-node
---
IfStatement [145211,145399]
to
Block [145162,145405]
at 0
===
update-node
---
SimpleName: assertTrue [222619,222629]
replace assertTrue by assertThat
===
update-node
---
SimpleName: assertEquals [268876,268888]
replace assertEquals by assertThat
===
insert-node
---
MethodInvocation [339589,339676]
to
METHOD_INVOCATION_RECEIVER [339589,339676]
at 0
===
insert-node
---
ExpressionStatement [4654,4713]
to
Block [4646,4720]
at 0
===
move-tree
---
METHOD_INVOCATION_RECEIVER [15453,15459]
    SimpleName: logger [15453,15459]
to
MethodInvocation [15938,15989]
at 0
===
insert-node
---
SimpleName: debug [15945,15950]
to
MethodInvocation [15938,15989]
at 1
===
insert-node
---
METHOD_INVOCATION_ARGUMENTS [15951,15988]
to
MethodInvocation [15938,15989]
at 2
===
insert-node
---
ExpressionStatement [16156,16206]
to
Block [16148,16213]
at 0
===
insert-node
---
ExpressionStatement [16886,16940]
to
Block [16878,16947]
at 0
===
insert-node
---
ExpressionStatement [26164,26223]
to
Block [26156,26230]
at 0
===
insert-node
---
SimpleName: connection [35614,35624]
to
Assignment [35614,35643]
at 0
===
insert-node
---
ASSIGNMENT_OPERATOR: = [35625,35626]
to
Assignment [35614,35643]
at 1
===
move-tree
---
MethodInvocation [34380,34396]
    SimpleName: doWrite [34380,34387]
    METHOD_INVOCATION_ARGUMENTS [34388,34395]
        SimpleName: message [34388,34395]
to
Assignment [35614,35643]
at 2
===
move-tree
---
MethodInvocation [69168,69195]
    METHOD_INVOCATION_RECEIVER [69168,69184]
        FieldAccess [69168,69184]
            ThisExpression [69168,69172]
            SimpleName: connections [69173,69184]
    SimpleName: iterator [69185,69193]
to
METHOD_INVOCATION_RECEIVER [61123,61150]
at 0
===
insert-node
---
MethodInvocation [61228,61254]
to
VariableDeclarationFragment [59521,59549]
at 1
===
move-tree
---
METHOD_INVOCATION_RECEIVER [133305,133311]
    SimpleName: logger [133305,133311]
to
MethodInvocation [15453,15506]
at 0
===
insert-tree
---
SimpleType [71140,71145]
    SimpleName: Entry [71140,71145]
to
ParameterizedType [71140,71175]
at 0
===
insert-tree
---
SimpleType [71146,71152]
    SimpleName: String [71146,71152]
to
ParameterizedType [71140,71175]
at 1
===
move-tree
---
SimpleType [69235,69248]
    SimpleName: TcpConnection [69235,69248]
to
ParameterizedType [71140,71175]
at 2
===
update-node
---
SimpleName: connection [69249,69259]
replace connection by entry
===
insert-node
---
IfStatement [71322,71467]
to
Block [69310,69343]
at 1
===
move-tree
---
IfStatement [15636,15746]
    MethodInvocation [15640,15663]
        METHOD_INVOCATION_RECEIVER [15640,15646]
            SimpleName: logger [15640,15646]
        SimpleName: isDebugEnabled [15647,15661]
    Block [15665,15746]
        ExpressionStatement [15673,15739]
            MethodInvocation [15673,15738]
                METHOD_INVOCATION_RECEIVER [15673,15679]
                    SimpleName: logger [15673,15679]
                SimpleName: debug [15680,15685]
                METHOD_INVOCATION_ARGUMENTS [15686,15737]
                    InfixExpression [15686,15737]
                        StringLiteral: "Remote Timeout on " [15686,15706]
                        INFIX_EXPRESSION_OPERATOR: + [15707,15708]
                        MethodInvocation [15709,15737]
                            METHOD_INVOCATION_RECEIVER [15709,15719]
                                SimpleName: connection [15709,15719]
                            SimpleName: getConnectionId [15720,15735]
to
Block [69354,69421]
at 1
===
move-tree
---
METHOD_INVOCATION_RECEIVER [149619,149625]
    SimpleName: logger [149619,149625]
to
MethodInvocation [122320,122390]
at 0
===
insert-node
---
SimpleName: debug [122327,122332]
to
MethodInvocation [122320,122390]
at 1
===
move-tree
---
METHOD_INVOCATION_ARGUMENTS [82723,82746]
    MethodInvocation [82723,82740]
        SimpleName: getConnectionId [82723,82738]
    ThisExpression [82742,82746]
to
MethodInvocation [122320,122390]
at 2
===
update-node
---
SimpleName: afterSend [142579,142588]
replace afterSend by debug
===
insert-tree
---
METHOD_INVOCATION_RECEIVER [145055,145063]
    SimpleName: listener [145055,145063]
to
MethodInvocation [145055,145082]
at 0
===
insert-node
---
SimpleName: onMessage [145064,145073]
to
MethodInvocation [145055,145082]
at 1
===
move-tree
---
METHOD_INVOCATION_ARGUMENTS [148868,148875]
    SimpleName: message [148868,148875]
to
MethodInvocation [145055,145082]
at 2
===
move-tree
---
MethodInvocation [144135,144203]
    METHOD_INVOCATION_RECEIVER [144135,144141]
        SimpleName: logger [144135,144141]
    SimpleName: debug [144142,144147]
    METHOD_INVOCATION_ARGUMENTS [144148,144202]
        StringLiteral: "TcpListener exiting - no listener and not single use" [144148,144202]
to
IfStatement [145211,145399]
at 0
===
insert-node
---
Block [145239,145399]
to
IfStatement [145211,145399]
at 1
===
move-tree
---
MethodInvocation [222630,222642]
    METHOD_INVOCATION_RECEIVER [222630,222631]
        SimpleName: e [222630,222631]
    SimpleName: getCause [222632,222640]
to
METHOD_INVOCATION_ARGUMENTS [222630,222666]
at 0
===
insert-node
---
MethodInvocation [218477,218516]
to
METHOD_INVOCATION_ARGUMENTS [222630,222666]
at 1
===
insert-tree
---
MethodInvocation [264800,264844]
    SimpleName: startsWith [264800,264810]
    METHOD_INVOCATION_ARGUMENTS [264811,264843]
        StringLiteral: "Unable to find outbound socket" [264811,264843]
to
METHOD_INVOCATION_ARGUMENTS [268889,268937]
at 2
===
insert-node
---
METHOD_INVOCATION_RECEIVER [339589,339665]
to
MethodInvocation [339589,339676]
at 0
===
insert-node
---
SimpleName: iterator [339666,339674]
to
MethodInvocation [339589,339676]
at 1
===
insert-node
---
MethodInvocation [4654,4712]
to
ExpressionStatement [4654,4713]
at 0
===
insert-node
---
InfixExpression [15951,15988]
to
METHOD_INVOCATION_ARGUMENTS [15951,15988]
at 0
===
insert-node
---
MethodInvocation [16156,16205]
to
ExpressionStatement [16156,16206]
at 0
===
insert-node
---
MethodInvocation [16886,16939]
to
ExpressionStatement [16886,16940]
at 0
===
insert-node
---
MethodInvocation [26164,26222]
to
ExpressionStatement [26164,26223]
at 0
===
update-node
---
SimpleName: iterator [69185,69193]
replace iterator by entrySet
===
insert-node
---
METHOD_INVOCATION_RECEIVER [61228,61243]
to
MethodInvocation [61228,61254]
at 0
===
insert-node
---
SimpleName: getValue [61244,61252]
to
MethodInvocation [61228,61254]
at 1
===
update-node
---
SimpleName: TcpConnection [69235,69248]
replace TcpConnection by TcpConnectionSupport
===
move-tree
---
MethodInvocation [148999,149022]
    METHOD_INVOCATION_RECEIVER [148999,149005]
        SimpleName: logger [148999,149005]
    SimpleName: isDebugEnabled [149006,149020]
to
IfStatement [71322,71467]
at 0
===
insert-node
---
Block [71351,71467]
to
IfStatement [71322,71467]
at 1
===
insert-tree
---
MethodInvocation [71542,71565]
    METHOD_INVOCATION_RECEIVER [71542,71548]
        SimpleName: logger [71542,71548]
    SimpleName: isTraceEnabled [71549,71563]
to
IfStatement [15636,15746]
at 0
===
insert-node
---
InfixExpression [122333,122389]
to
METHOD_INVOCATION_ARGUMENTS [82723,82746]
at 0
===
move-tree
---
MethodInvocation [134176,134213]
    METHOD_INVOCATION_RECEIVER [134176,134194]
        MethodInvocation [134176,134194]
            METHOD_INVOCATION_RECEIVER [134176,134180]
                ThisExpression [134176,134180]
            SimpleName: getListener [134181,134192]
    SimpleName: onMessage [134195,134204]
    METHOD_INVOCATION_ARGUMENTS [134205,134212]
        SimpleName: message [134205,134212]
to
ExpressionStatement [134162,134214]
at 0
===
insert-node
---
SimpleName: logger [138909,138915]
to
METHOD_INVOCATION_RECEIVER [142574,142578]
at 0
===
insert-node
---
InfixExpression [138922,138947]
to
METHOD_INVOCATION_ARGUMENTS [142589,142596]
at 0
===
update-node
---
SimpleName: debug [144142,144147]
replace debug by isWarnEnabled
===
insert-node
---
ExpressionStatement [145247,145392]
to
Block [145239,145399]
at 0
===
insert-tree
---
METHOD_INVOCATION_RECEIVER [218477,218485]
    SimpleName: Matchers [218477,218485]
to
MethodInvocation [218477,218516]
at 0
===
insert-node
---
SimpleName: instanceOf [218486,218496]
to
MethodInvocation [218477,218516]
at 1
===
insert-node
---
METHOD_INVOCATION_ARGUMENTS [218497,218515]
to
MethodInvocation [218477,218516]
at 2
===
insert-node
---
MethodInvocation [339589,339665]
to
METHOD_INVOCATION_RECEIVER [339589,339665]
at 0
===
insert-tree
---
METHOD_INVOCATION_RECEIVER [4654,4682]
    FieldAccess [4654,4682]
        ThisExpression [4654,4658]
        SimpleName: clientConnectionFactory [4659,4682]
to
MethodInvocation [4654,4712]
at 0
===
insert-node
---
SimpleName: closeConnection [4683,4698]
to
MethodInvocation [4654,4712]
at 1
===
move-tree
---
METHOD_INVOCATION_ARGUMENTS [82225,82237]
    SimpleName: connectionId [82225,82237]
to
MethodInvocation [4654,4712]
at 2
===
update-node
---
StringLiteral: "Added " [15466,15474]
replace "Added " by "Added pending reply "
===
move-tree
---
StringLiteral: "Added " [15466,15474]
to
InfixExpression [15951,15988]
at 0
===
insert-node
---
INFIX_EXPRESSION_OPERATOR: + [15974,15975]
to
InfixExpression [15951,15988]
at 1
===
insert-node
---
SimpleName: connectionId [15976,15988]
to
InfixExpression [15951,15988]
at 2
===
move-tree
---
METHOD_INVOCATION_RECEIVER [15673,15679]
    SimpleName: logger [15673,15679]
to
MethodInvocation [16156,16205]
at 0
===
insert-node
---
SimpleName: debug [16163,16168]
to
MethodInvocation [16156,16205]
at 1
===
insert-node
---
METHOD_INVOCATION_ARGUMENTS [16169,16204]
to
MethodInvocation [16156,16205]
at 2
===
move-tree
---
METHOD_INVOCATION_RECEIVER [120616,120622]
    SimpleName: logger [120616,120622]
to
MethodInvocation [16886,16939]
at 0
===
insert-node
---
SimpleName: debug [16893,16898]
to
MethodInvocation [16886,16939]
at 1
===
insert-tree
---
METHOD_INVOCATION_ARGUMENTS [16899,16938]
    InfixExpression [16899,16938]
        StringLiteral: "Removed pending reply " [16899,16923]
        INFIX_EXPRESSION_OPERATOR: + [16924,16925]
        SimpleName: connectionId [16926,16938]
to
MethodInvocation [16886,16939]
at 2
===
insert-tree
---
METHOD_INVOCATION_RECEIVER [26164,26192]
    FieldAccess [26164,26192]
        ThisExpression [26164,26168]
        SimpleName: clientConnectionFactory [26169,26192]
to
MethodInvocation [26164,26222]
at 0
===
insert-node
---
SimpleName: closeConnection [26193,26208]
to
MethodInvocation [26164,26222]
at 1
===
move-tree
---
METHOD_INVOCATION_ARGUMENTS [16653,16665]
    SimpleName: connectionId [16653,16665]
to
MethodInvocation [26164,26222]
at 2
===
insert-node
---
Assignment [35885,35914]
to
ExpressionStatement [34638,34655]
at 0
===
move-tree
---
MethodInvocation [59534,59549]
    METHOD_INVOCATION_RECEIVER [59534,59542]
        SimpleName: iterator [59534,59542]
    SimpleName: next [59543,59547]
to
METHOD_INVOCATION_RECEIVER [61228,61243]
at 0
===
insert-tree
---
MethodInvocation [70602,70620]
    SimpleName: getComponentName [70602,70618]
to
InfixExpression [15466,15505]
at 0
===
insert-node
---
StringLiteral: ": Added new connection: " [70624,70650]
to
InfixExpression [15466,15505]
at 2
===
insert-node
---
ExpressionStatement [71360,71459]
to
Block [71351,71467]
at 0
===
insert-tree
---
METHOD_INVOCATION_ARGUMENTS [71515,71529]
    MethodInvocation [71515,71529]
        METHOD_INVOCATION_RECEIVER [71515,71520]
            SimpleName: entry [71515,71520]
        SimpleName: getKey [71521,71527]
to
MethodInvocation [69362,69413]
at 2
===
move-tree
---
MethodInvocation [82723,82740]
    SimpleName: getConnectionId [82723,82738]
to
InfixExpression [122333,122389]
at 0
===
insert-node
---
INFIX_EXPRESSION_OPERATOR: + [122351,122352]
to
InfixExpression [122333,122389]
at 1
===
insert-node
---
StringLiteral: " Waiting for listener registration" [122353,122389]
to
InfixExpression [122333,122389]
at 2
===
insert-node
---
ThrowStatement [130992,131037]
to
Block [134028,134155]
at 0
===
move-tree
---
MethodInvocation [134291,134380]
    METHOD_INVOCATION_RECEIVER [134291,134297]
        SimpleName: logger [134291,134297]
    SimpleName: debug [134298,134303]
    METHOD_INVOCATION_ARGUMENTS [134304,134379]
        InfixExpression [134304,134379]
            StringLiteral: "Closing single use socket after inbound message " [134304,134354]
            INFIX_EXPRESSION_OPERATOR: + [134355,134356]
            MethodInvocation [134357,134379]
                METHOD_INVOCATION_RECEIVER [134357,134361]
                    ThisExpression [134357,134361]
                SimpleName: getConnectionId [134362,134377]
to
IfStatement [134267,134564]
at 0
===
insert-node
---
StringLiteral: "Message sent " [138922,138937]
to
InfixExpression [138922,138947]
at 0
===
insert-node
---
INFIX_EXPRESSION_OPERATOR: + [138938,138939]
to
InfixExpression [138922,138947]
at 1
===
move-tree
---
SimpleName: message [142589,142596]
to
InfixExpression [138922,138947]
at 2
===
insert-node
---
MethodInvocation [145247,145391]
to
ExpressionStatement [145247,145392]
at 0
===
insert-node
---
TypeLiteral [218497,218515]
to
METHOD_INVOCATION_ARGUMENTS [218497,218515]
at 0
===
move-tree
---
METHOD_INVOCATION_RECEIVER [343336,343398]
    MethodInvocation [343336,343398]
        METHOD_INVOCATION_RECEIVER [343336,343345]
            SimpleName: TestUtils [343336,343345]
        SimpleName: getPropertyValue [343346,343362]
        METHOD_INVOCATION_ARGUMENTS [343363,343397]
            SimpleName: factory [343363,343370]
            StringLiteral: "connections" [343372,343385]
            TypeLiteral [343387,343397]
                SimpleType [343387,343391]
                    SimpleName: List [343387,343391]
to
MethodInvocation [339589,339665]
at 0
===
insert-node
---
SimpleName: values [339657,339663]
to
MethodInvocation [339589,339665]
at 1
===
insert-node
---
InfixExpression [16169,16204]
to
METHOD_INVOCATION_ARGUMENTS [16169,16204]
at 0
===
insert-node
---
SimpleName: connection [35885,35895]
to
Assignment [35885,35914]
at 0
===
insert-node
---
ASSIGNMENT_OPERATOR: = [35896,35897]
to
Assignment [35885,35914]
at 1
===
move-tree
---
MethodInvocation [34638,34654]
    SimpleName: doWrite [34638,34645]
    METHOD_INVOCATION_ARGUMENTS [34646,34653]
        SimpleName: message [34646,34653]
to
Assignment [35885,35914]
at 2
===
insert-node
---
MethodInvocation [71360,71458]
to
ExpressionStatement [71360,71459]
at 0
===
insert-node
---
ClassInstanceCreation [130998,131036]
to
ThrowStatement [130992,131037]
at 0
===
update-node
---
SimpleName: getListener [134181,134192]
replace getListener by listener
===
move-tree
---
SimpleName: getListener [134181,134192]
to
METHOD_INVOCATION_RECEIVER [134176,134194]
at 0
===
move-tree
---
METHOD_INVOCATION_RECEIVER [134463,134469]
    SimpleName: logger [134463,134469]
to
MethodInvocation [134291,134380]
at 0
===
update-node
---
SimpleName: getConnectionId [134362,134377]
replace getConnectionId by isWarnEnabled
===
move-tree
---
SimpleName: getConnectionId [134362,134377]
to
MethodInvocation [134291,134380]
at 1
===
move-tree
---
METHOD_INVOCATION_RECEIVER [149033,149039]
    SimpleName: logger [149033,149039]
to
MethodInvocation [145247,145391]
at 0
===
insert-node
---
SimpleName: warn [145254,145258]
to
MethodInvocation [145247,145391]
at 1
===
insert-node
---
METHOD_INVOCATION_ARGUMENTS [145259,145390]
to
MethodInvocation [145247,145391]
at 2
===
move-tree
---
SimpleType [222654,222666]
    SimpleName: EOFException [222654,222666]
to
TypeLiteral [218497,218515]
at 0
===
update-node
---
SimpleName: List [327414,327418]
replace List by Map
===
move-tree
---
StringLiteral: "Remote Timeout on " [15686,15706]
to
InfixExpression [16169,16204]
at 0
===
insert-node
---
INFIX_EXPRESSION_OPERATOR: + [16190,16191]
to
InfixExpression [16169,16204]
at 1
===
insert-node
---
SimpleName: connectionId [16192,16204]
to
InfixExpression [16169,16204]
at 2
===
move-tree
---
METHOD_INVOCATION_RECEIVER [134037,134043]
    SimpleName: logger [134037,134043]
to
MethodInvocation [71360,71458]
at 0
===
insert-node
---
SimpleName: debug [71367,71372]
to
MethodInvocation [71360,71458]
at 1
===
move-tree
---
METHOD_INVOCATION_ARGUMENTS [69384,69412]
    MethodInvocation [69384,69412]
        METHOD_INVOCATION_RECEIVER [69384,69394]
            SimpleName: connection [69384,69394]
        SimpleName: getConnectionId [69395,69410]
to
MethodInvocation [71360,71458]
at 2
===
move-tree
---
METHOD_INVOCATION_RECEIVER [134995,135001]
    SimpleName: logger [134995,135001]
to
MethodInvocation [15673,15738]
at 0
===
update-node
---
SimpleName: debug [15680,15685]
replace debug by trace
===
insert-node
---
SimpleType [131002,131021]
to
ClassInstanceCreation [130998,131036]
at 0
===
update-node
---
StringLiteral: "Unexpected message - no inbound adapter registered with connection " [134049,134118]
replace "Unexpected message - no inbound adapter registered with connection " by "No listener"
===
move-tree
---
StringLiteral: "Unexpected message - no inbound adapter registered with connection " [134049,134118]
to
ClassInstanceCreation [130998,131036]
at 1
===
insert-node
---
InfixExpression [145259,145390]
to
METHOD_INVOCATION_ARGUMENTS [145259,145390]
at 0
===
insert-node
---
InfixExpression [71373,71457]
to
METHOD_INVOCATION_ARGUMENTS [69384,69412]
at 0
===
update-node
---
SimpleName: warn [134044,134048]
replace warn by NoListenerException
===
move-tree
---
SimpleName: warn [134044,134048]
to
SimpleType [131002,131021]
at 0
===
move-tree
---
METHOD_INVOCATION_RECEIVER [134291,134297]
    SimpleName: logger [134291,134297]
to
MethodInvocation [134463,134555]
at 0
===
update-node
---
StringLiteral: "Closing single use socket after timeout " [148488,148530]
replace "Closing single use socket after timeout " by "Closing socket after timeout "
===
insert-node
---
StringLiteral: "Unexpected message - no endpoint registered with connection: " [145259,145322]
to
InfixExpression [145259,145390]
at 0
===
insert-node
---
INFIX_EXPRESSION_OPERATOR: + [145333,145334]
to
InfixExpression [145259,145390]
at 1
===
move-tree
---
MethodInvocation [82674,82691]
    SimpleName: getConnectionId [82674,82689]
to
InfixExpression [145259,145390]
at 2
===
insert-node
---
StringLiteral: " - " [145365,145370]
to
InfixExpression [145259,145390]
at 3
===
insert-node
---
SimpleName: message [145383,145390]
to
InfixExpression [145259,145390]
at 4
===
insert-tree
---
ExpressionStatement [292114,292142]
    MethodInvocation [292114,292141]
        METHOD_INVOCATION_RECEIVER [292114,292124]
            SimpleName: invocation [292114,292124]
        SimpleName: callRealMethod [292125,292139]
to
Block [296088,296613]
at 0
===
insert-tree
---
MethodInvocation [71373,71391]
    SimpleName: getComponentName [71373,71389]
to
InfixExpression [71373,71457]
at 0
===
insert-node
---
INFIX_EXPRESSION_OPERATOR: + [71392,71393]
to
InfixExpression [71373,71457]
at 1
===
insert-node
---
StringLiteral: ": Removed closed connection: " [71395,71426]
to
InfixExpression [71373,71457]
at 2
===
move-tree
---
MethodInvocation [69384,69412]
    METHOD_INVOCATION_RECEIVER [69384,69394]
        SimpleName: connection [69384,69394]
    SimpleName: getConnectionId [69395,69410]
to
InfixExpression [71373,71457]
at 3
===
insert-tree
---
MethodInvocation [71589,71607]
    SimpleName: getComponentName [71589,71605]
to
InfixExpression [15686,15737]
at 0
===
insert-node
---
StringLiteral: ": Connection is open: " [71611,71635]
to
InfixExpression [15686,15737]
at 2
===
update-node
---
StringLiteral: "Closed single use socket after timeout:" [136213,136254]
replace "Closed single use socket after timeout:" by "Closed socket after timeout:"
===
update-node
---
StringLiteral: "Unexpected message - no inbound adapter registered with connection " [134475,134544]
replace "Unexpected message - no inbound adapter registered with connection " by "Unexpected message - no endpoint registered with connection interceptor: "
===
insert-tree
---
MethodInvocation [131313,131330]
    SimpleName: getConnectionId [131313,131328]
to
InfixExpression [134475,134554]
at 2
===
insert-node
---
StringLiteral: " - " [131344,131349]
to
InfixExpression [134475,134554]
at 3
===
update-node
---
SimpleName: List [343387,343391]
replace List by Map
===
delete-tree
---
ImportDeclaration [11773,11846]
    QualifiedName: org.springframework.integration.ip.tcp.connection.CloseDeferrable [11780,11845]
===
delete-tree
---
ImportDeclaration [47981,48009]
    QualifiedName: java.util.LinkedList [47988,48008]
===
delete-tree
---
ImportDeclaration [78027,78052]
    QualifiedName: java.util.HashSet [78034,78051]
===
delete-tree
---
ImportDeclaration [78077,78098]
    QualifiedName: java.util.Set [78084,78097]
===
delete-tree
---
ImportDeclaration [95213,95271]
    QualifiedName: org.springframework.messaging.support.ErrorMessage [95220,95270]
===
delete-tree
---
ImportDeclaration [115851,115883]
    QualifiedName: java.net.SocketException [115858,115882]
===
delete-tree
---
ImportDeclaration [163577,163646]
    QualifiedName: org.springframework.integration.support.MessageBuilderFactory [163584,163645]
===
delete-tree
---
ImportDeclaration [199588,199671]
    QualifiedName: org.springframework.integration.ip.tcp.connection.AbstractConnectionFactory [199595,199670]
===
delete-tree
---
ImportDeclaration [267900,267944]
    QualifiedName: org.junit.Assert.assertEquals [267914,267943]
===
delete-node
---
Modifier: public [13027,13033]
===
delete-node
---
TYPE_DECLARATION_KIND: class [13034,13039]
===
delete-node
---
SimpleName: TcpOutboundGateway [13040,13058]
===
delete-tree
---
VariableDeclarationStatement [14677,14744]
    PrimitiveType: boolean [14677,14684]
    VariableDeclarationFragment [14685,14743]
        SimpleName: singleUseConnection [14685,14704]
        MethodInvocation [14707,14743]
            METHOD_INVOCATION_RECEIVER [14707,14729]
                FieldAccess [14707,14729]
                    ThisExpression [14707,14711]
                    SimpleName: connectionFactory [14712,14729]
            SimpleName: isSingleUse [14730,14741]
===
delete-node
---
VariableDeclarationFragment [15130,15181]
===
delete-node
---
VariableDeclarationStatement [15116,15182]
===
delete-tree
---
InstanceofExpression [16538,16587]
    FieldAccess [16538,16560]
        ThisExpression [16538,16542]
        SimpleName: connectionFactory [16543,16560]
    SimpleType [16572,16587]
        SimpleName: CloseDeferrable [16572,16587]
===
delete-tree
---
METHOD_INVOCATION_RECEIVER [16596,16638]
    ParenthesizedExpression [16596,16638]
        CastExpression [16597,16637]
            SimpleType [16598,16613]
                SimpleName: CloseDeferrable [16598,16613]
            FieldAccess [16615,16637]
                ThisExpression [16615,16619]
                SimpleName: connectionFactory [16620,16637]
===
delete-node
---
SimpleName: closeDeferred [16639,16652]
===
delete-node
---
MethodInvocation [16596,16666]
===
delete-node
---
ExpressionStatement [16596,16667]
===
delete-node
---
Block [16589,16673]
===
delete-node
---
IfStatement [16534,16673]
===
delete-node
---
Modifier: public [18163,18169]
===
delete-node
---
PrimitiveType: void [18170,18174]
===
delete-node
---
SimpleName: setConnectionFactory [18175,18195]
===
delete-tree
---
SingleVariableDeclaration [18196,18239]
    SimpleType [18196,18221]
        SimpleName: AbstractConnectionFactory [18196,18221]
    SimpleName: connectionFactory [18222,18239]
===
delete-tree
---
METHOD_INVOCATION_RECEIVER [18322,18328]
    SimpleName: Assert [18322,18328]
===
delete-node
---
SimpleName: isTrue [18329,18335]
===
delete-node
---
SimpleName: connectionFactory [18336,18353]
===
delete-node
---
InstanceofExpression [18336,18396]
===
delete-tree
---
InfixExpression [18403,18470]
    MethodInvocation [18403,18428]
        METHOD_INVOCATION_RECEIVER [18403,18418]
            MethodInvocation [18403,18418]
                METHOD_INVOCATION_RECEIVER [18403,18407]
                    ThisExpression [18403,18407]
                SimpleName: getClass [18408,18416]
        SimpleName: getName [18419,18426]
    INFIX_EXPRESSION_OPERATOR: + [18429,18430]
    StringLiteral: " requires a client connection factory" [18431,18470]
===
delete-node
---
METHOD_INVOCATION_ARGUMENTS [18336,18470]
===
delete-node
---
MethodInvocation [18322,18471]
===
delete-node
---
ExpressionStatement [18322,18472]
===
delete-node
---
ASSIGNMENT_OPERATOR: = [18499,18500]
===
delete-node
---
SimpleName: connectionFactory [18535,18552]
===
delete-node
---
CastExpression [18501,18552]
===
delete-node
---
Assignment [18476,18552]
===
delete-node
---
ExpressionStatement [18476,18553]
===
delete-node
---
Block [18241,18645]
===
delete-node
---
MethodDeclaration [18163,18645]
===
delete-node
---
Modifier: public [19344,19350]
===
delete-node
---
PrimitiveType: void [19351,19355]
===
delete-node
---
SimpleName: start [19356,19361]
===
delete-tree
---
InstanceofExpression [19373,19422]
    FieldAccess [19373,19395]
        ThisExpression [19373,19377]
        SimpleName: connectionFactory [19378,19395]
    SimpleType [19407,19422]
        SimpleName: CloseDeferrable [19407,19422]
===
delete-tree
---
METHOD_INVOCATION_RECEIVER [19430,19472]
    ParenthesizedExpression [19430,19472]
        CastExpression [19431,19471]
            SimpleType [19432,19447]
                SimpleName: CloseDeferrable [19432,19447]
            FieldAccess [19449,19471]
                ThisExpression [19449,19453]
                SimpleName: connectionFactory [19454,19471]
===
delete-node
---
SimpleName: enableCloseDeferral [19473,19492]
===
delete-node
---
MethodInvocation [19430,19498]
===
delete-node
---
ExpressionStatement [19430,19499]
===
delete-node
---
Block [19424,19504]
===
delete-node
---
IfStatement [19369,19504]
===
delete-node
---
Block [19364,19543]
===
delete-node
---
MethodDeclaration [19332,19543]
===
delete-node
---
Modifier: public [31761,31767]
===
delete-node
---
TYPE_DECLARATION_KIND: class [31768,31773]
===
delete-node
---
SimpleName: TcpSendingMessageHandler [31774,31798]
===
delete-node
---
PrimitiveType: void [34822,34826]
===
delete-tree
---
ExpressionStatement [46028,46072]
    MethodInvocation [46028,46071]
        METHOD_INVOCATION_RECEIVER [46028,46038]
            SimpleName: connection [46028,46038]
        SimpleName: setSingleUse [46039,46051]
        METHOD_INVOCATION_ARGUMENTS [46052,46070]
            MethodInvocation [46052,46070]
                METHOD_INVOCATION_RECEIVER [46052,46056]
                    ThisExpression [46052,46056]
                SimpleName: isSingleUse [46057,46068]
===
delete-node
---
Modifier: public [49085,49091]
===
delete-node
---
Modifier: abstract [49092,49100]
===
delete-node
---
TYPE_DECLARATION_KIND: class [49101,49106]
===
delete-node
---
SimpleName: AbstractConnectionFactory [49107,49132]
===
delete-tree
---
SimpleType [79335,79351]
    SimpleName: CachedConnection [79335,79351]
===
delete-tree
---
SimpleType [79406,79422]
    SimpleName: CachedConnection [79406,79422]
===
delete-node
---
Modifier: private [50549,50556]
===
delete-node
---
Modifier: final [50557,50562]
===
delete-tree
---
SimpleType [50563,50567]
    SimpleName: List [50563,50567]
===
delete-node
---
ParameterizedType [50563,50589]
===
delete-node
---
SimpleName: connections [50590,50601]
===
delete-tree
---
SimpleType [50608,50618]
    SimpleName: LinkedList [50608,50618]
===
delete-node
---
ParameterizedType [50608,50640]
===
delete-node
---
ClassInstanceCreation [50604,50642]
===
delete-node
---
VariableDeclarationFragment [50590,50642]
===
delete-node
---
FieldDeclaration [50549,50643]
===
delete-node
---
SimpleName: connection [68798,68808]
===
delete-node
---
SimpleName: TcpConnectionSupport [71125,71145]
===
delete-node
---
METHOD_INVOCATION_RECEIVER [71183,71195]
===
delete-node
---
SimpleName: equals [71196,71202]
===
delete-node
---
METHOD_INVOCATION_ARGUMENTS [71203,71231]
===
delete-node
---
MethodInvocation [71183,71232]
===
delete-node
---
BreakStatement [71304,71310]
===
delete-node
---
SimpleName: connection [71146,71156]
===
delete-node
---
SingleVariableDeclaration [71125,71156]
===
delete-node
---
SimpleName: connections [71159,71170]
===
delete-node
---
EnhancedForStatement [71120,71539]
===
delete-node
---
Block [70973,71567]
===
delete-tree
---
ExpressionStatement [75285,75324]
    MethodInvocation [75285,75323]
        METHOD_INVOCATION_RECEIVER [75285,75295]
            SimpleName: connection [75285,75295]
        SimpleName: setSingleUse [75296,75308]
        METHOD_INVOCATION_ARGUMENTS [75309,75322]
            MethodInvocation [75309,75322]
                SimpleName: isSingleUse [75309,75320]
===
delete-node
---
Modifier: public [79060,79066]
===
delete-node
---
TYPE_DECLARATION_KIND: class [79067,79072]
===
delete-node
---
SimpleName: CachingClientConnectionFactory [79073,79103]
===
delete-tree
---
SimpleType [79155,79170]
    SimpleName: CloseDeferrable [79155,79170]
===
delete-node
---
Modifier: private [79431,79438]
===
delete-node
---
Modifier: final [79439,79444]
===
delete-tree
---
SimpleType [79445,79448]
    SimpleName: Set [79445,79448]
===
delete-node
---
ParameterizedType [79445,79456]
===
delete-node
---
SimpleName: okToRelease [79457,79468]
===
delete-tree
---
SimpleType [79475,79482]
    SimpleName: HashSet [79475,79482]
===
delete-node
---
ParameterizedType [79475,79490]
===
delete-node
---
ClassInstanceCreation [79471,79492]
===
delete-node
---
VariableDeclarationFragment [79457,79492]
===
delete-node
---
FieldDeclaration [79431,79493]
===
delete-tree
---
FieldDeclaration [79498,79534]
    Modifier: private [79498,79505]
    Modifier: volatile [79506,79514]
    PrimitiveType: boolean [79515,79522]
    VariableDeclarationFragment [79523,79533]
        SimpleName: deferClose [79523,79533]
===
delete-tree
---
MethodDeclaration [81859,81951]
    MarkerAnnotation [81859,81868]
        SimpleName: Override [81860,81868]
    Modifier: public [81871,81877]
    PrimitiveType: void [81878,81882]
    SimpleName: enableCloseDeferral [81883,81902]
    SingleVariableDeclaration [81903,81916]
        PrimitiveType: boolean [81903,81910]
        SimpleName: defer [81911,81916]
    Block [81918,81951]
        ExpressionStatement [81923,81947]
            Assignment [81923,81946]
                FieldAccess [81923,81938]
                    ThisExpression [81923,81927]
                    SimpleName: deferClose [81928,81938]
                ASSIGNMENT_OPERATOR: = [81939,81940]
                SimpleName: defer [81941,81946]
===
delete-tree
---
MarkerAnnotation [81956,81965]
    SimpleName: Override [81957,81965]
===
delete-node
---
Modifier: public [81968,81974]
===
delete-node
---
PrimitiveType: void [81975,81979]
===
delete-node
---
SimpleName: closeDeferred [81980,81993]
===
delete-tree
---
SingleVariableDeclaration [81994,82013]
    SimpleType [81994,82000]
        SimpleName: String [81994,82000]
    SimpleName: connectionId [82001,82013]
===
delete-tree
---
FieldAccess [82033,82049]
    ThisExpression [82033,82037]
    SimpleName: okToRelease [82038,82049]
===
delete-tree
---
SimpleType [82057,82073]
    SimpleName: CachedConnection [82057,82073]
===
delete-node
---
SimpleName: deferred [82074,82082]
===
delete-tree
---
METHOD_INVOCATION_RECEIVER [82085,82106]
    FieldAccess [82085,82106]
        ThisExpression [82085,82089]
        SimpleName: deferredClosures [82090,82106]
===
delete-node
---
SimpleName: remove [82107,82113]
===
delete-node
---
MethodInvocation [82085,82127]
===
delete-node
---
VariableDeclarationFragment [82074,82127]
===
delete-node
---
VariableDeclarationStatement [82057,82128]
===
delete-tree
---
InfixExpression [82137,82153]
    SimpleName: deferred [82137,82145]
    INFIX_EXPRESSION_OPERATOR: != [82146,82148]
    NullLiteral [82149,82153]
===
delete-tree
---
Block [82155,82187]
    ExpressionStatement [82162,82181]
        MethodInvocation [82162,82180]
            METHOD_INVOCATION_RECEIVER [82162,82170]
                SimpleName: deferred [82162,82170]
            SimpleName: doClose [82171,82178]
===
delete-tree
---
METHOD_INVOCATION_RECEIVER [82204,82220]
    FieldAccess [82204,82220]
        ThisExpression [82204,82208]
        SimpleName: okToRelease [82209,82220]
===
delete-node
---
SimpleName: add [82221,82224]
===
delete-node
---
MethodInvocation [82204,82238]
===
delete-node
---
ExpressionStatement [82204,82239]
===
delete-node
---
Block [82197,82245]
===
delete-node
---
IfStatement [82133,82245]
===
delete-node
---
Block [82051,82250]
===
delete-node
---
SynchronizedStatement [82020,82250]
===
delete-node
---
Block [82015,82254]
===
delete-node
---
MethodDeclaration [81956,82254]
===
delete-node
---
Modifier: public [82559,82565]
===
delete-node
---
PrimitiveType: void [82566,82570]
===
delete-node
---
SimpleName: close [82571,82576]
===
delete-node
---
SimpleName: okToRelease [82598,82609]
===
delete-node
---
SimpleName: deferClose [82622,82632]
===
delete-node
---
INFIX_EXPRESSION_OPERATOR: && [82633,82635]
===
delete-tree
---
PrefixExpression [82636,82650]
    PREFIX_EXPRESSION_OPERATOR: ! [82636,82637]
    FieldAccess [82637,82650]
        ThisExpression [82637,82641]
        SimpleName: released [82642,82650]
===
delete-node
---
PREFIX_EXPRESSION_OPERATOR: ! [82654,82655]
===
delete-tree
---
METHOD_INVOCATION_RECEIVER [82655,82666]
    SimpleName: okToRelease [82655,82666]
===
delete-node
---
SimpleName: remove [82667,82673]
===
delete-node
---
METHOD_INVOCATION_ARGUMENTS [82674,82691]
===
delete-node
---
MethodInvocation [82655,82692]
===
delete-node
---
PrefixExpression [82654,82692]
===
delete-node
---
InfixExpression [82622,82692]
===
delete-tree
---
METHOD_INVOCATION_RECEIVER [82702,82718]
    SimpleName: deferredClosures [82702,82718]
===
delete-node
---
SimpleName: put [82719,82722]
===
delete-node
---
MethodInvocation [82702,82747]
===
delete-node
---
ExpressionStatement [82702,82748]
===
delete-node
---
Block [82694,82755]
===
delete-tree
---
Block [82766,82791]
    ExpressionStatement [82774,82784]
        MethodInvocation [82774,82783]
            SimpleName: doClose [82774,82781]
===
delete-node
---
IfStatement [82618,82791]
===
delete-node
---
Block [82611,82797]
===
delete-node
---
SynchronizedStatement [82585,82797]
===
delete-node
---
Block [82579,82802]
===
delete-node
---
MethodDeclaration [82546,82802]
===
delete-node
---
Modifier: synchronized [82816,82828]
===
delete-tree
---
ExpressionStatement [85209,85217]
    MethodInvocation [85209,85216]
        SimpleName: close [85209,85214]
===
delete-node
---
ReturnStatement [90452,90502]
===
delete-tree
---
TypeDeclaration [93176,93890]
    Javadoc [93176,93579]
        TagElement [93184,93524]
            TextElement: Temporary interface on the  [93184,93211]
            TagElement [93211,93249]
                TextElement:  CachingClientConnectionFactory [93217,93248]
            TextElement:  enabling the gateway [93249,93270]
            TextElement: to defer the implicit close after onMessage so the connection is not reused until after the [93275,93366]
            TextElement: gateway has completely finished with it. Will be removed when INT-3654 is resolved, whereby [93371,93462]
            TextElement: the gateway will be completely responsible for the close. [93467,93524]
        TagElement [93533,93553]
            TextElement:  Gary Russell [93540,93553]
        TagElement [93558,93570]
            TextElement:  4.1.5 [93564,93570]
    Modifier: public [93581,93587]
    TYPE_DECLARATION_KIND: interface [93588,93597]
    SimpleName: CloseDeferrable [93598,93613]
    MethodDeclaration [93620,93735]
        Javadoc [93620,93692]
            TagElement [93629,93653]
                TextElement: Enable deferred closure. [93629,93653]
            TagElement [93659,93686]
                SimpleName: defer [93666,93671]
                TextElement:  true to defer. [93671,93686]
        PrimitiveType: void [93695,93699]
        SimpleName: enableCloseDeferral [93700,93719]
        SingleVariableDeclaration [93720,93733]
            PrimitiveType: boolean [93720,93727]
            SimpleName: defer [93728,93733]
    MethodDeclaration [93740,93885]
        Javadoc [93740,93842]
            TagElement [93749,93792]
                TextElement: Close (release) the connection if deferred. [93749,93792]
            TagElement [93798,93836]
                SimpleName: connectionId [93805,93817]
                TextElement:  the connection id. [93817,93836]
        PrimitiveType: void [93845,93849]
        SimpleName: closeDeferred [93850,93863]
        SingleVariableDeclaration [93864,93883]
            SimpleType [93864,93870]
                SimpleName: String [93864,93870]
            SimpleName: connectionId [93871,93883]
===
delete-node
---
Modifier: public [95557,95563]
===
delete-node
---
TYPE_DECLARATION_KIND: class [95564,95569]
===
delete-node
---
SimpleName: FailoverClientConnectionFactory [95570,95601]
===
delete-tree
---
EnhancedForStatement [97271,97626]
    SingleVariableDeclaration [97276,97315]
        SimpleType [97276,97307]
            SimpleName: AbstractClientConnectionFactory [97276,97307]
        SimpleName: factory [97308,97315]
    FieldAccess [97318,97332]
        ThisExpression [97318,97322]
        SimpleName: factories [97323,97332]
    Block [97334,97626]
        ExpressionStatement [97340,97621]
            MethodInvocation [97340,97620]
                METHOD_INVOCATION_RECEIVER [97340,97347]
                    SimpleName: factory [97340,97347]
                SimpleName: registerListener [97348,97364]
                METHOD_INVOCATION_ARGUMENTS [97365,97619]
                    ClassInstanceCreation [97365,97619]
                        SimpleType [97369,97380]
                            SimpleName: TcpListener [97369,97380]
                        AnonymousClassDeclaration [97383,97619]
                            MethodDeclaration [97390,97613]
                                MarkerAnnotation [97390,97399]
                                    SimpleName: Override [97391,97399]
                                Modifier: public [97405,97411]
                                PrimitiveType: boolean [97412,97419]
                                SimpleName: onMessage [97420,97429]
                                SingleVariableDeclaration [97430,97448]
                                    ParameterizedType [97430,97440]
                                        SimpleType [97430,97437]
                                            SimpleName: Message [97430,97437]
                                        WildcardType [97438,97439]
                                    SimpleName: message [97441,97448]
                                Block [97450,97613]
                                    IfStatement [97458,97586]
                                        PrefixExpression [97462,97496]
                                            PREFIX_EXPRESSION_OPERATOR: ! [97462,97463]
                                            ParenthesizedExpression [97463,97496]
                                                InstanceofExpression [97464,97495]
                                                    SimpleName: message [97464,97471]
                                                    SimpleType [97483,97495]
                                                        SimpleName: ErrorMessage [97483,97495]
                                        Block [97498,97586]
                                            ThrowStatement [97507,97578]
                                                ClassInstanceCreation [97513,97577]
                                                    SimpleType [97517,97546]
                                                        SimpleName: UnsupportedOperationException [97517,97546]
                                                    StringLiteral: "This should never be called" [97547,97576]
                                    ReturnStatement [97593,97606]
                                        BooleanLiteral: false [97600,97605]
===
delete-tree
---
MarkerAnnotation [97635,97644]
    SimpleName: Override [97636,97644]
===
delete-node
---
Modifier: public [97647,97653]
===
delete-node
---
PrimitiveType: void [97654,97658]
===
delete-node
---
SimpleName: enableManualListenerRegistration [97659,97691]
===
delete-tree
---
SingleVariableDeclaration [97704,97743]
    SimpleType [97704,97735]
        SimpleName: AbstractClientConnectionFactory [97704,97735]
    SimpleName: factory [97736,97743]
===
delete-tree
---
FieldAccess [97746,97760]
    ThisExpression [97746,97750]
    SimpleName: factories [97751,97760]
===
delete-node
---
EnhancedForStatement [97699,97816]
===
delete-node
---
Block [97694,97820]
===
delete-node
---
MethodDeclaration [97635,97820]
===
delete-tree
---
MethodInvocation [98417,98435]
    METHOD_INVOCATION_RECEIVER [98417,98421]
        ThisExpression [98417,98421]
    SimpleName: getListener [98422,98433]
===
delete-node
---
Block [98624,98651]
===
delete-tree
---
MethodDeclaration [103835,103941]
    MarkerAnnotation [103835,103844]
        SimpleName: Override [103836,103844]
    Modifier: public [103848,103854]
    PrimitiveType: void [103855,103859]
    SimpleName: setSingleUse [103860,103872]
    SingleVariableDeclaration [103873,103890]
        PrimitiveType: boolean [103873,103880]
        SimpleName: singleUse [103881,103890]
    Block [103892,103941]
        ExpressionStatement [103898,103936]
            MethodInvocation [103898,103935]
                METHOD_INVOCATION_RECEIVER [103898,103911]
                    FieldAccess [103898,103911]
                        ThisExpression [103898,103902]
                        SimpleName: delegate [103903,103911]
                SimpleName: setSingleUse [103912,103924]
                METHOD_INVOCATION_ARGUMENTS [103925,103934]
                    SimpleName: singleUse [103925,103934]
===
delete-tree
---
MethodDeclaration [103947,104035]
    MarkerAnnotation [103947,103956]
        SimpleName: Override [103948,103956]
    Modifier: public [103960,103966]
    PrimitiveType: boolean [103967,103974]
    SimpleName: isSingleUse [103975,103986]
    Block [103989,104035]
        ReturnStatement [103995,104030]
            MethodInvocation [104002,104029]
                METHOD_INVOCATION_RECEIVER [104002,104015]
                    FieldAccess [104002,104015]
                        ThisExpression [104002,104006]
                        SimpleName: delegate [104007,104015]
                SimpleName: isSingleUse [104016,104027]
===
delete-tree
---
MethodDeclaration [108145,108230]
    Javadoc [108145,108205]
        TagElement [108159,108199]
            TextElement:  True if connection is used once. [108166,108199]
    PrimitiveType: boolean [108208,108215]
    SimpleName: isSingleUse [108216,108227]
===
delete-node
---
Modifier: public [112079,112085]
===
delete-node
---
PrimitiveType: boolean [112086,112093]
===
delete-node
---
SimpleName: isSingleUse [112094,112105]
===
delete-tree
---
Block [112108,112157]
    ReturnStatement [112113,112153]
        MethodInvocation [112120,112152]
            METHOD_INVOCATION_RECEIVER [112120,112138]
                FieldAccess [112120,112138]
                    ThisExpression [112120,112124]
                    SimpleName: theConnection [112125,112138]
            SimpleName: isSingleUse [112139,112150]
===
delete-node
---
MethodDeclaration [112067,112157]
===
delete-tree
---
MethodDeclaration [112231,112339]
    MarkerAnnotation [112231,112240]
        SimpleName: Override [112232,112240]
    Modifier: public [112243,112249]
    PrimitiveType: void [112250,112254]
    SimpleName: setSingleUse [112255,112267]
    SingleVariableDeclaration [112268,112285]
        PrimitiveType: boolean [112268,112275]
        SimpleName: singleUse [112276,112285]
    Block [112287,112339]
        ExpressionStatement [112292,112335]
            MethodInvocation [112292,112334]
                METHOD_INVOCATION_RECEIVER [112292,112310]
                    FieldAccess [112292,112310]
                        ThisExpression [112292,112296]
                        SimpleName: theConnection [112297,112310]
                SimpleName: setSingleUse [112311,112323]
                METHOD_INVOCATION_ARGUMENTS [112324,112333]
                    SimpleName: singleUse [112324,112333]
===
delete-node
---
Modifier: public [116980,116986]
===
delete-node
---
Modifier: abstract [116987,116995]
===
delete-node
---
TYPE_DECLARATION_KIND: class [116996,117001]
===
delete-node
---
SimpleName: TcpConnectionSupport [117002,117022]
===
delete-tree
---
FieldDeclaration [117450,117494]
    Modifier: private [117450,117457]
    Modifier: volatile [117458,117466]
    SimpleType [117467,117478]
        SimpleName: TcpListener [117467,117478]
    VariableDeclarationFragment [117479,117493]
        SimpleName: actualListener [117479,117493]
===
delete-tree
---
FieldDeclaration [117538,117573]
    Modifier: private [117538,117545]
    Modifier: volatile [117546,117554]
    PrimitiveType: boolean [117555,117562]
    VariableDeclarationFragment [117563,117572]
        SimpleName: singleUse [117563,117572]
===
delete-tree
---
FieldDeclaration [117712,117747]
    Modifier: private [117712,117719]
    Modifier: volatile [117720,117728]
    PrimitiveType: int [117729,117732]
    VariableDeclarationFragment [117733,117746]
        SimpleName: soLinger [117733,117741]
        PrefixExpression [117744,117746]
            PREFIX_EXPRESSION_OPERATOR: - [117744,117745]
            NumberLiteral: 1 [117745,117746]
===
delete-tree
---
TryStatement [119880,119965]
    Block [119884,119932]
        ExpressionStatement [119890,119927]
            Assignment [119890,119926]
                FieldAccess [119890,119903]
                    ThisExpression [119890,119894]
                    SimpleName: soLinger [119895,119903]
                ASSIGNMENT_OPERATOR: = [119904,119905]
                MethodInvocation [119906,119926]
                    METHOD_INVOCATION_RECEIVER [119906,119912]
                        SimpleName: socket [119906,119912]
                    SimpleName: getSoLinger [119913,119924]
    CatchClause [119936,119965]
        SingleVariableDeclaration [119943,119960]
            SimpleType [119943,119958]
                SimpleName: SocketException [119943,119958]
            SimpleName: e [119959,119960]
        Block [119962,119965]
===
delete-node
---
Modifier: public [120239,120245]
===
delete-node
---
PrimitiveType: void [120246,120250]
===
delete-node
---
SimpleName: afterSend [120251,120260]
===
delete-tree
---
SingleVariableDeclaration [120261,120279]
    ParameterizedType [120261,120271]
        SimpleType [120261,120268]
            SimpleName: Message [120261,120268]
        WildcardType [120269,120270]
    SimpleName: message [120272,120279]
===
delete-tree
---
SimpleType [120288,120297]
    SimpleName: Exception [120288,120297]
===
delete-tree
---
FieldAccess [120391,120405]
    ThisExpression [120391,120395]
    SimpleName: singleUse [120396,120405]
===
delete-tree
---
InfixExpression [120500,120570]
    ParenthesizedExpression [120500,120548]
        InfixExpression [120501,120547]
            MethodInvocation [120501,120516]
                METHOD_INVOCATION_RECEIVER [120501,120505]
                    ThisExpression [120501,120505]
                SimpleName: isServer [120506,120514]
            INFIX_EXPRESSION_OPERATOR: || [120517,120519]
            InfixExpression [120520,120547]
                FieldAccess [120520,120539]
                    ThisExpression [120520,120524]
                    SimpleName: actualListener [120525,120539]
                INFIX_EXPRESSION_OPERATOR: == [120540,120542]
                NullLiteral [120543,120547]
    INFIX_EXPRESSION_OPERATOR: && [120549,120551]
    InfixExpression [120552,120570]
        FieldAccess [120552,120565]
            ThisExpression [120552,120556]
            SimpleName: soLinger [120557,120565]
        INFIX_EXPRESSION_OPERATOR: != [120566,120568]
        NumberLiteral: 0 [120569,120570]
===
delete-node
---
SimpleName: debug [120623,120628]
===
delete-tree
---
METHOD_INVOCATION_ARGUMENTS [120629,120685]
    InfixExpression [120629,120685]
        StringLiteral: "Closing single-use connection" [120629,120660]
        INFIX_EXPRESSION_OPERATOR: + [120661,120662]
        MethodInvocation [120663,120685]
            METHOD_INVOCATION_RECEIVER [120663,120667]
                ThisExpression [120663,120667]
            SimpleName: getConnectionId [120668,120683]
===
delete-node
---
MethodInvocation [120616,120686]
===
delete-node
---
ExpressionStatement [120616,120687]
===
delete-node
---
Block [120608,120694]
===
delete-node
---
IfStatement [120579,120694]
===
delete-tree
---
ExpressionStatement [120700,120728]
    MethodInvocation [120700,120727]
        METHOD_INVOCATION_RECEIVER [120700,120704]
            ThisExpression [120700,120704]
        SimpleName: closeConnection [120705,120720]
        METHOD_INVOCATION_ARGUMENTS [120721,120726]
            BooleanLiteral: false [120721,120726]
===
delete-node
---
Block [120572,120734]
===
delete-node
---
IfStatement [120496,120734]
===
delete-node
---
Block [120407,120739]
===
delete-node
---
IfStatement [120387,120739]
===
delete-node
---
Block [120298,120743]
===
delete-node
---
MethodDeclaration [120239,120743]
===
delete-node
---
Modifier: public [123129,123135]
===
delete-node
---
PrimitiveType: void [123136,123140]
===
delete-node
---
SimpleName: registerListener [123141,123157]
===
delete-tree
---
IfStatement [123270,123708]
    PrefixExpression [123274,123326]
        PREFIX_EXPRESSION_OPERATOR: ! [123274,123275]
        ParenthesizedExpression [123275,123326]
            InstanceofExpression [123276,123325]
                FieldAccess [123276,123289]
                    ThisExpression [123276,123280]
                    SimpleName: listener [123281,123289]
                SimpleType [123301,123325]
                    SimpleName: TcpConnectionInterceptor [123301,123325]
    Block [123328,123375]
        ExpressionStatement [123334,123370]
            Assignment [123334,123369]
                FieldAccess [123334,123353]
                    ThisExpression [123334,123338]
                    SimpleName: actualListener [123339,123353]
                ASSIGNMENT_OPERATOR: = [123354,123355]
                FieldAccess [123356,123369]
                    ThisExpression [123356,123360]
                    SimpleName: listener [123361,123369]
    Block [123384,123708]
        VariableDeclarationStatement [123390,123475]
            SimpleType [123390,123414]
                SimpleName: TcpConnectionInterceptor [123390,123414]
            VariableDeclarationFragment [123415,123474]
                SimpleName: outerInterceptor [123415,123431]
                CastExpression [123434,123474]
                    SimpleType [123435,123459]
                        SimpleName: TcpConnectionInterceptor [123435,123459]
                    FieldAccess [123461,123474]
                        ThisExpression [123461,123465]
                        SimpleName: listener [123466,123474]
        WhileStatement [123480,123645]
            InstanceofExpression [123487,123553]
                MethodInvocation [123487,123517]
                    METHOD_INVOCATION_RECEIVER [123487,123503]
                        SimpleName: outerInterceptor [123487,123503]
                    SimpleName: getListener [123504,123515]
                SimpleType [123529,123553]
                    SimpleName: TcpConnectionInterceptor [123529,123553]
            Block [123555,123645]
                ExpressionStatement [123562,123639]
                    Assignment [123562,123638]
                        SimpleName: outerInterceptor [123562,123578]
                        ASSIGNMENT_OPERATOR: = [123579,123580]
                        CastExpression [123581,123638]
                            SimpleType [123582,123606]
                                SimpleName: TcpConnectionInterceptor [123582,123606]
                            MethodInvocation [123608,123638]
                                METHOD_INVOCATION_RECEIVER [123608,123624]
                                    SimpleName: outerInterceptor [123608,123624]
                                SimpleName: getListener [123625,123636]
        ExpressionStatement [123650,123703]
            Assignment [123650,123702]
                FieldAccess [123650,123669]
                    ThisExpression [123650,123654]
                    SimpleName: actualListener [123655,123669]
                ASSIGNMENT_OPERATOR: = [123670,123671]
                MethodInvocation [123672,123702]
                    METHOD_INVOCATION_RECEIVER [123672,123688]
                        SimpleName: outerInterceptor [123672,123688]
                    SimpleName: getListener [123689,123700]
===
delete-node
---
Block [123180,123757]
===
delete-node
---
MethodDeclaration [123023,123757]
===
delete-node
---
ThisExpression [82742,82746]
===
delete-tree
---
MethodDeclaration [125285,125455]
    Javadoc [125285,125372]
        TagElement [125294,125366]
            SimpleName: singleUse [125301,125310]
            TextElement:  true if this socket is to used once and [125310,125350]
            TextElement: discarded. [125356,125366]
    Modifier: public [125375,125381]
    PrimitiveType: void [125382,125386]
    SimpleName: setSingleUse [125387,125399]
    SingleVariableDeclaration [125400,125417]
        PrimitiveType: boolean [125400,125407]
        SimpleName: singleUse [125408,125417]
    Block [125419,125455]
        ExpressionStatement [125424,125451]
            Assignment [125424,125450]
                FieldAccess [125424,125438]
                    ThisExpression [125424,125428]
                    SimpleName: singleUse [125429,125438]
                ASSIGNMENT_OPERATOR: = [125439,125440]
                SimpleName: singleUse [125441,125450]
===
delete-tree
---
Javadoc [125460,125520]
    TagElement [125474,125514]
        TextElement:  True if connection is used once. [125481,125514]
===
delete-node
---
Modifier: public [125535,125541]
===
delete-node
---
PrimitiveType: boolean [125542,125549]
===
delete-node
---
SimpleName: isSingleUse [125550,125561]
===
delete-tree
---
Block [125564,125595]
    ReturnStatement [125569,125591]
        FieldAccess [125576,125590]
            ThisExpression [125576,125580]
            SimpleName: singleUse [125581,125590]
===
delete-node
---
MethodDeclaration [125460,125595]
===
delete-tree
---
ExpressionStatement [131989,132013]
    MethodInvocation [131989,132012]
        METHOD_INVOCATION_RECEIVER [131989,131993]
            ThisExpression [131989,131993]
        SimpleName: afterSend [131994,132003]
        METHOD_INVOCATION_ARGUMENTS [132004,132011]
            SimpleName: message [132004,132011]
===
delete-node
---
TextElement: connections with no listener, the socket is closed after its timeout [132961,133029]
===
delete-node
---
TextElement: expires. If data is received on a single use socket with no listener, [133035,133104]
===
delete-node
---
TextElement: a warning is logged. [133110,133130]
===
delete-tree
---
VariableDeclarationStatement [133174,133213]
    PrimitiveType: boolean [133174,133181]
    VariableDeclarationFragment [133182,133212]
        SimpleName: singleUse [133182,133191]
        MethodInvocation [133194,133212]
            METHOD_INVOCATION_RECEIVER [133194,133198]
                ThisExpression [133194,133198]
            SimpleName: isSingleUse [133199,133210]
===
delete-tree
---
METHOD_INVOCATION_RECEIVER [133240,133244]
    ThisExpression [133240,133244]
===
delete-node
---
INFIX_EXPRESSION_OPERATOR: && [133284,133286]
===
delete-node
---
InfixExpression [133267,133297]
===
delete-node
---
SimpleName: debug [133312,133317]
===
delete-tree
---
METHOD_INVOCATION_ARGUMENTS [133318,133372]
    StringLiteral: "TcpListener exiting - no listener and not single use" [133318,133372]
===
delete-node
---
MethodInvocation [133305,133373]
===
delete-node
---
ExpressionStatement [133305,133374]
===
delete-node
---
ReturnStatement [133379,133386]
===
delete-node
---
Block [133299,133391]
===
delete-node
---
IfStatement [133263,133391]
===
delete-tree
---
VariableDeclarationStatement [133519,133547]
    PrimitiveType: boolean [133519,133526]
    VariableDeclarationFragment [133527,133546]
        SimpleName: intercepted [133527,133538]
        BooleanLiteral: false [133541,133546]
===
delete-node
---
INFIX_EXPRESSION_OPERATOR: + [134119,134120]
===
delete-node
---
SimpleName: message [134121,134128]
===
delete-node
---
InfixExpression [134049,134128]
===
delete-node
---
METHOD_INVOCATION_ARGUMENTS [134049,134128]
===
delete-node
---
MethodInvocation [134037,134129]
===
delete-node
---
ExpressionStatement [134037,134130]
===
delete-node
---
ContinueStatement [134138,134147]
===
delete-tree
---
METHOD_INVOCATION_RECEIVER [134176,134180]
    ThisExpression [134176,134180]
===
delete-node
---
MethodInvocation [134176,134194]
===
delete-node
---
SimpleName: intercepted [134162,134173]
===
delete-node
---
ASSIGNMENT_OPERATOR: = [134174,134175]
===
delete-node
---
Assignment [134162,134213]
===
delete-node
---
SimpleName: debug [134298,134303]
===
delete-node
---
StringLiteral: "Closing single use socket after inbound message " [134304,134354]
===
delete-node
---
INFIX_EXPRESSION_OPERATOR: + [134355,134356]
===
delete-tree
---
METHOD_INVOCATION_RECEIVER [134357,134361]
    ThisExpression [134357,134361]
===
delete-node
---
MethodInvocation [134357,134379]
===
delete-node
---
InfixExpression [134304,134379]
===
delete-node
---
METHOD_INVOCATION_ARGUMENTS [134304,134379]
===
delete-node
---
SimpleName: singleUse [134271,134280]
===
delete-node
---
ExpressionStatement [134291,134381]
===
delete-tree
---
ExpressionStatement [134389,134416]
    MethodInvocation [134389,134415]
        METHOD_INVOCATION_RECEIVER [134389,134393]
            ThisExpression [134389,134393]
        SimpleName: closeConnection [134394,134409]
        METHOD_INVOCATION_ARGUMENTS [134410,134414]
            BooleanLiteral: true [134410,134414]
===
delete-tree
---
ExpressionStatement [134424,134440]
    Assignment [134424,134439]
        SimpleName: okToRun [134424,134431]
        ASSIGNMENT_OPERATOR: = [134432,134433]
        BooleanLiteral: false [134434,134439]
===
delete-node
---
Block [134282,134448]
===
delete-tree
---
InfixExpression [134887,134985]
    SimpleName: singleUse [134887,134896]
    INFIX_EXPRESSION_OPERATOR: && [134897,134899]
    ParenthesizedExpression [134900,134985]
        InfixExpression [134901,134984]
            ParenthesizedExpression [134901,134935]
                InfixExpression [134902,134934]
                    PrefixExpression [134902,134918]
                        PREFIX_EXPRESSION_OPERATOR: ! [134902,134903]
                        MethodInvocation [134903,134918]
                            METHOD_INVOCATION_RECEIVER [134903,134907]
                                ThisExpression [134903,134907]
                            SimpleName: isServer [134908,134916]
                    INFIX_EXPRESSION_OPERATOR: && [134919,134921]
                    PrefixExpression [134922,134934]
                        PREFIX_EXPRESSION_OPERATOR: ! [134922,134923]
                        SimpleName: intercepted [134923,134934]
            INFIX_EXPRESSION_OPERATOR: || [134936,134938]
            ParenthesizedExpression [134939,134984]
                InfixExpression [134940,134983]
                    MethodInvocation [134940,134955]
                        METHOD_INVOCATION_RECEIVER [134940,134944]
                            ThisExpression [134940,134944]
                        SimpleName: isServer [134945,134953]
                    INFIX_EXPRESSION_OPERATOR: && [134956,134958]
                    InfixExpression [134959,134983]
                        MethodInvocation [134959,134975]
                            METHOD_INVOCATION_RECEIVER [134959,134963]
                                ThisExpression [134959,134963]
                            SimpleName: getSender [134964,134973]
                        INFIX_EXPRESSION_OPERATOR: == [134976,134978]
                        NullLiteral [134979,134983]
===
delete-node
---
SimpleName: debug [135002,135007]
===
delete-tree
---
METHOD_INVOCATION_ARGUMENTS [135008,135083]
    InfixExpression [135008,135083]
        StringLiteral: "Closing single use socket after inbound message " [135008,135058]
        INFIX_EXPRESSION_OPERATOR: + [135059,135060]
        MethodInvocation [135061,135083]
            METHOD_INVOCATION_RECEIVER [135061,135065]
                ThisExpression [135061,135065]
            SimpleName: getConnectionId [135066,135081]
===
delete-node
---
MethodInvocation [134995,135084]
===
delete-node
---
ExpressionStatement [134995,135085]
===
delete-tree
---
ExpressionStatement [135092,135120]
    MethodInvocation [135092,135119]
        METHOD_INVOCATION_RECEIVER [135092,135096]
            ThisExpression [135092,135096]
        SimpleName: closeConnection [135097,135112]
        METHOD_INVOCATION_ARGUMENTS [135113,135118]
            BooleanLiteral: false [135113,135118]
===
delete-tree
---
ExpressionStatement [135127,135143]
    Assignment [135127,135142]
        SimpleName: okToRun [135127,135134]
        ASSIGNMENT_OPERATOR: = [135135,135136]
        BooleanLiteral: false [135137,135142]
===
delete-node
---
Block [134987,135150]
===
delete-node
---
IfStatement [134883,135150]
===
delete-tree
---
METHOD_INVOCATION_RECEIVER [136006,136010]
    ThisExpression [136006,136010]
===
delete-tree
---
METHOD_INVOCATION_ARGUMENTS [136027,136031]
    BooleanLiteral: true [136027,136031]
===
delete-node
---
INFIX_EXPRESSION_OPERATOR: && [136131,136133]
===
delete-tree
---
MethodInvocation [136134,136152]
    METHOD_INVOCATION_RECEIVER [136134,136138]
        ThisExpression [136134,136138]
    SimpleName: isSingleUse [136139,136150]
===
delete-node
---
InfixExpression [136095,136152]
===
delete-node
---
Modifier: public [139386,139392]
===
delete-node
---
TYPE_DECLARATION_KIND: class [139393,139398]
===
delete-node
---
SimpleName: TcpNioConnection [139399,139415]
===
delete-node
---
ThisExpression [142574,142578]
===
delete-tree
---
InfixExpression [144076,144125]
    InfixExpression [144076,144102]
        MethodInvocation [144076,144094]
            METHOD_INVOCATION_RECEIVER [144076,144080]
                ThisExpression [144076,144080]
            SimpleName: getListener [144081,144092]
        INFIX_EXPRESSION_OPERATOR: == [144095,144097]
        NullLiteral [144098,144102]
    INFIX_EXPRESSION_OPERATOR: && [144103,144105]
    PrefixExpression [144106,144125]
        PREFIX_EXPRESSION_OPERATOR: ! [144106,144107]
        MethodInvocation [144107,144125]
            METHOD_INVOCATION_RECEIVER [144107,144111]
                ThisExpression [144107,144111]
            SimpleName: isSingleUse [144112,144123]
===
delete-node
---
ExpressionStatement [144135,144204]
===
delete-node
---
ReturnStatement [144211,144218]
===
delete-node
---
Block [144127,144225]
===
delete-node
---
IfStatement [144072,144225]
===
delete-node
---
INFIX_EXPRESSION_OPERATOR: && [148408,148410]
===
delete-tree
---
MethodInvocation [148411,148429]
    METHOD_INVOCATION_RECEIVER [148411,148415]
        ThisExpression [148411,148415]
    SimpleName: isSingleUse [148416,148427]
===
delete-node
---
InfixExpression [148372,148429]
===
delete-tree
---
METHOD_INVOCATION_ARGUMENTS [144148,144202]
    StringLiteral: "TcpListener exiting - no listener and not single use" [144148,144202]
===
delete-node
---
Modifier: private [148708,148715]
===
delete-node
---
PrimitiveType: void [148716,148720]
===
delete-node
---
SimpleName: sendToChannel [148721,148734]
===
delete-tree
---
VariableDeclarationStatement [148760,148788]
    PrimitiveType: boolean [148760,148767]
    VariableDeclarationFragment [148768,148787]
        SimpleName: intercepted [148768,148779]
        BooleanLiteral: false [148782,148787]
===
delete-node
---
SimpleName: intercepted [148830,148841]
===
delete-node
---
ASSIGNMENT_OPERATOR: = [148842,148843]
===
delete-node
---
METHOD_INVOCATION_RECEIVER [148844,148857]
===
delete-node
---
SimpleName: onMessage [148858,148867]
===
delete-node
---
MethodInvocation [148844,148876]
===
delete-node
---
Assignment [148830,148876]
===
delete-node
---
ExpressionStatement [148830,148877]
===
delete-node
---
Block [148823,148883]
===
delete-node
---
IfStatement [148802,148883]
===
delete-node
---
Block [148796,148888]
===
delete-tree
---
MethodInvocation [148967,148985]
    METHOD_INVOCATION_RECEIVER [148967,148971]
        ThisExpression [148967,148971]
    SimpleName: isSingleUse [148972,148983]
===
delete-node
---
SimpleName: debug [149040,149045]
===
delete-tree
---
METHOD_INVOCATION_ARGUMENTS [149046,149122]
    InfixExpression [149046,149122]
        StringLiteral: "Closing single use channel after inbound message " [149046,149097]
        INFIX_EXPRESSION_OPERATOR: + [149098,149099]
        MethodInvocation [149100,149122]
            METHOD_INVOCATION_RECEIVER [149100,149104]
                ThisExpression [149100,149104]
            SimpleName: getConnectionId [149105,149120]
===
delete-node
---
MethodInvocation [149033,149123]
===
delete-node
---
ExpressionStatement [149033,149124]
===
delete-node
---
Block [149024,149132]
===
delete-node
---
IfStatement [148995,149132]
===
delete-tree
---
ExpressionStatement [149139,149166]
    MethodInvocation [149139,149165]
        METHOD_INVOCATION_RECEIVER [149139,149143]
            ThisExpression [149139,149143]
        SimpleName: closeConnection [149144,149159]
        METHOD_INVOCATION_ARGUMENTS [149160,149164]
            BooleanLiteral: true [149160,149164]
===
delete-node
---
Block [148987,149173]
===
delete-node
---
IfStatement [148963,149173]
===
delete-node
---
Block [148956,149179]
===
delete-node
---
IfStatement [148918,149259]
===
delete-node
---
Block [148912,149264]
===
delete-node
---
CatchClause [148892,149264]
===
delete-node
---
TryStatement [148792,149264]
===
delete-tree
---
InfixExpression [149468,149575]
    MethodInvocation [149468,149486]
        METHOD_INVOCATION_RECEIVER [149468,149472]
            ThisExpression [149468,149472]
        SimpleName: isSingleUse [149473,149484]
    INFIX_EXPRESSION_OPERATOR: && [149487,149489]
    ParenthesizedExpression [149490,149575]
        InfixExpression [149491,149574]
            ParenthesizedExpression [149491,149525]
                InfixExpression [149492,149524]
                    PrefixExpression [149492,149508]
                        PREFIX_EXPRESSION_OPERATOR: ! [149492,149493]
                        MethodInvocation [149493,149508]
                            METHOD_INVOCATION_RECEIVER [149493,149497]
                                ThisExpression [149493,149497]
                            SimpleName: isServer [149498,149506]
                    INFIX_EXPRESSION_OPERATOR: && [149509,149511]
                    PrefixExpression [149512,149524]
                        PREFIX_EXPRESSION_OPERATOR: ! [149512,149513]
                        SimpleName: intercepted [149513,149524]
            INFIX_EXPRESSION_OPERATOR: || [149526,149528]
            ParenthesizedExpression [149529,149574]
                InfixExpression [149530,149573]
                    MethodInvocation [149530,149545]
                        METHOD_INVOCATION_RECEIVER [149530,149534]
                            ThisExpression [149530,149534]
                        SimpleName: isServer [149535,149543]
                    INFIX_EXPRESSION_OPERATOR: && [149546,149548]
                    InfixExpression [149549,149573]
                        MethodInvocation [149549,149565]
                            METHOD_INVOCATION_RECEIVER [149549,149553]
                                ThisExpression [149549,149553]
                            SimpleName: getSender [149554,149563]
                        INFIX_EXPRESSION_OPERATOR: == [149566,149568]
                        NullLiteral [149569,149573]
===
delete-node
---
SimpleName: debug [149626,149631]
===
delete-tree
---
METHOD_INVOCATION_ARGUMENTS [149632,149708]
    InfixExpression [149632,149708]
        StringLiteral: "Closing single use channel after inbound message " [149632,149683]
        INFIX_EXPRESSION_OPERATOR: + [149684,149685]
        MethodInvocation [149686,149708]
            METHOD_INVOCATION_RECEIVER [149686,149690]
                ThisExpression [149686,149690]
            SimpleName: getConnectionId [149691,149706]
===
delete-node
---
MethodInvocation [149619,149709]
===
delete-node
---
ExpressionStatement [149619,149710]
===
delete-node
---
Block [149612,149716]
===
delete-node
---
IfStatement [149583,149716]
===
delete-tree
---
ExpressionStatement [149721,149749]
    MethodInvocation [149721,149748]
        METHOD_INVOCATION_RECEIVER [149721,149725]
            ThisExpression [149721,149725]
        SimpleName: closeConnection [149726,149741]
        METHOD_INVOCATION_ARGUMENTS [149742,149747]
            BooleanLiteral: false [149742,149747]
===
delete-node
---
Block [149577,149754]
===
delete-node
---
IfStatement [149464,149754]
===
delete-node
---
Block [148755,149758]
===
delete-node
---
MethodDeclaration [148708,149758]
===
delete-node
---
Modifier: public [200516,200522]
===
delete-node
---
TYPE_DECLARATION_KIND: class [200523,200528]
===
delete-node
---
SimpleName: TcpOutboundGatewayTests [200529,200552]
===
delete-tree
---
SimpleType [200749,200774]
    SimpleName: AbstractConnectionFactory [200749,200774]
===
delete-tree
---
SimpleType [204037,204062]
    SimpleName: AbstractConnectionFactory [204037,204062]
===
delete-node
---
InstanceofExpression [222630,222666]
===
delete-node
---
Modifier: public [226704,226710]
===
delete-node
---
TYPE_DECLARATION_KIND: class [226711,226716]
===
delete-node
---
SimpleName: TcpSendingMessageHandlerTests [226717,226746]
===
delete-node
---
StringLiteral: "Unable to find outbound socket" [268889,268921]
===
delete-node
---
Modifier: public [273308,273314]
===
delete-node
---
TYPE_DECLARATION_KIND: class [273315,273320]
===
delete-node
---
SimpleName: CachingClientConnectionFactoryTests [273321,273356]
===
delete-node
---
Modifier: public [301438,301444]
===
delete-node
---
TYPE_DECLARATION_KIND: class [301445,301450]
===
delete-node
---
SimpleName: FailoverClientConnectionFactoryTests [301451,301487]
===
delete-node
---
VariableDeclarationFragment [314979,315006]
===
delete-node
---
VariableDeclarationStatement [314972,315007]
===
delete-node
---
Modifier: public [319947,319953]
===
delete-node
---
TYPE_DECLARATION_KIND: class [319954,319959]
===
delete-node
---
SimpleName: TcpNioConnectionTests [319960,319981]
