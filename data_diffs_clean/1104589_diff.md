===
move-tree
---
ImportDeclaration [981,1019]
    QualifiedName: org.reactivestreams.Subscriber [988,1018]
to
CompilationUnit [0,16622]
at 5
===
move-tree
---
ImportDeclaration [7928,7978]
    QualifiedName: co.paralleluniverse.strands.channels.Topic [7935,7977]
to
CompilationUnit [0,16622]
at 22
===
move-tree
---
ImportDeclaration [8019,8057]
    QualifiedName: org.reactivestreams.Subscriber [8026,8056]
to
CompilationUnit [0,16622]
at 23
===
insert-tree
---
ImportDeclaration [776,827]
    QualifiedName: co.paralleluniverse.fibers.SuspendExecution [783,826]
to
CompilationUnit [0,16622]
at 3
===
insert-tree
---
ImportDeclaration [829,883]
    QualifiedName: co.paralleluniverse.strands.SuspendableAction2 [836,882]
to
CompilationUnit [0,16622]
at 4
===
insert-tree
---
ImportDeclaration [942,994]
    QualifiedName: co.paralleluniverse.strands.channels.Channel [949,993]
to
CompilationUnit [0,16622]
at 6
===
insert-tree
---
ImportDeclaration [996,1058]
    QualifiedName: co.paralleluniverse.strands.channels.ProducerException [1003,1057]
to
CompilationUnit [0,16622]
at 7
===
insert-tree
---
ImportDeclaration [1118,1171]
    QualifiedName: co.paralleluniverse.strands.channels.SendPort [1125,1170]
to
CompilationUnit [0,16622]
at 9
===
insert-tree
---
ImportDeclaration [1173,1222]
    QualifiedName: java.util.concurrent.atomic.AtomicInteger [1180,1221]
to
CompilationUnit [0,16622]
at 10
===
insert-tree
---
ImportDeclaration [1224,1261]
    QualifiedName: org.reactivestreams.Processor [1231,1260]
to
CompilationUnit [0,16622]
at 11
===
insert-tree
---
ImportDeclaration [1303,1343]
    QualifiedName: org.reactivestreams.Subscription [1310,1342]
to
CompilationUnit [0,16622]
at 13
===
insert-tree
---
ImportDeclaration [5934,5974]
    QualifiedName: co.paralleluniverse.fibers.Fiber [5941,5973]
to
CompilationUnit [0,16622]
at 14
===
insert-tree
---
ImportDeclaration [5976,6023]
    QualifiedName: co.paralleluniverse.fibers.FiberFactory [5983,6022]
to
CompilationUnit [0,16622]
at 15
===
insert-tree
---
ImportDeclaration [6025,6080]
    QualifiedName: co.paralleluniverse.strands.SuspendableCallable [6032,6079]
to
CompilationUnit [0,16622]
at 16
===
insert-tree
---
ImportDeclaration [6082,6138]
    QualifiedName: co.paralleluniverse.strands.channels.ReceivePort [6089,6137]
to
CompilationUnit [0,16622]
at 17
===
insert-tree
---
ImportDeclaration [6230,6268]
    QualifiedName: org.reactivestreams.Subscriber [6237,6267]
to
CompilationUnit [0,16622]
at 20
===
insert-tree
---
ImportDeclaration [13205,13259]
    QualifiedName: co.paralleluniverse.strands.SuspendableAction2 [13212,13258]
to
CompilationUnit [0,16622]
at 33
===
insert-tree
---
ImportDeclaration [13370,13438]
    QualifiedName: co.paralleluniverse.strands.channels.Channels.OverflowPolicy [13377,13437]
to
CompilationUnit [0,16622]
at 36
===
insert-tree
---
ImportDeclaration [13440,13496]
    QualifiedName: co.paralleluniverse.strands.channels.ReceivePort [13447,13495]
to
CompilationUnit [0,16622]
at 37
===
insert-tree
---
ImportDeclaration [13498,13551]
    QualifiedName: co.paralleluniverse.strands.channels.SendPort [13505,13550]
to
CompilationUnit [0,16622]
at 38
===
insert-tree
---
ImportDeclaration [13605,13642]
    QualifiedName: org.reactivestreams.Processor [13612,13641]
to
CompilationUnit [0,16622]
at 40
===
insert-tree
---
ImportDeclaration [13644,13681]
    QualifiedName: org.reactivestreams.Publisher [13651,13680]
to
CompilationUnit [0,16622]
at 41
===
insert-tree
---
ImportDeclaration [23931,23971]
    QualifiedName: co.paralleluniverse.fibers.Fiber [23938,23970]
to
CompilationUnit [0,16622]
at 43
===
insert-tree
---
ImportDeclaration [23973,24024]
    QualifiedName: co.paralleluniverse.fibers.SuspendExecution [23980,24023]
to
CompilationUnit [0,16622]
at 44
===
insert-tree
---
ImportDeclaration [24026,24080]
    QualifiedName: co.paralleluniverse.strands.SuspendableAction2 [24033,24079]
to
CompilationUnit [0,16622]
at 45
===
insert-tree
---
ImportDeclaration [24210,24263]
    QualifiedName: co.paralleluniverse.strands.channels.SendPort [24217,24262]
to
CompilationUnit [0,16622]
at 48
===
insert-tree
---
ImportDeclaration [24265,24345]
    QualifiedName: co.paralleluniverse.strands.channels.reactivestreams.TestHelper [24279,24342]
to
CompilationUnit [0,16622]
at 49
===
insert-tree
---
ImportDeclaration [24347,24391]
    QualifiedName: java.util.concurrent.ExecutorService [24354,24390]
to
CompilationUnit [0,16622]
at 50
===
insert-tree
---
ImportDeclaration [24393,24431]
    QualifiedName: java.util.concurrent.Executors [24400,24430]
to
CompilationUnit [0,16622]
at 51
===
insert-tree
---
ImportDeclaration [24433,24470]
    QualifiedName: org.reactivestreams.Processor [24440,24469]
to
CompilationUnit [0,16622]
at 52
===
insert-tree
---
ImportDeclaration [24511,24572]
    QualifiedName: org.reactivestreams.tck.IdentityProcessorVerification [24518,24571]
to
CompilationUnit [0,16622]
at 54
===
insert-tree
---
ImportDeclaration [24574,24621]
    QualifiedName: org.reactivestreams.tck.TestEnvironment [24581,24620]
to
CompilationUnit [0,16622]
at 55
===
insert-tree
---
ImportDeclaration [24623,24655]
    QualifiedName: org.testng.annotations [24630,24652]
to
CompilationUnit [0,16622]
at 56
===
insert-tree
---
ImportDeclaration [27708,27745]
    QualifiedName: org.reactivestreams.Publisher [27715,27744]
to
CompilationUnit [0,16622]
at 62
===
insert-tree
---
ImportDeclaration [27747,27785]
    QualifiedName: org.reactivestreams.Subscriber [27754,27784]
to
CompilationUnit [0,16622]
at 63
===
insert-tree
---
ImportDeclaration [27787,27827]
    QualifiedName: org.reactivestreams.Subscription [27794,27826]
to
CompilationUnit [0,16622]
at 64
===
insert-tree
---
TypeDeclaration [1347,5247]
    Javadoc [1347,1376]
        TagElement [1359,1371]
            TextElement:  pron [1366,1371]
    TYPE_DECLARATION_KIND: class [1378,1383]
    SimpleName: ChannelProcessor [1384,1400]
    TypeParameter [1401,1402]
        SimpleName: T [1401,1402]
    TypeParameter [1404,1405]
        SimpleName: R [1404,1405]
    ParameterizedType [1418,1433]
        SimpleType [1418,1427]
            SimpleName: Processor [1418,1427]
        SimpleType [1428,1429]
            SimpleName: T [1428,1429]
        SimpleType [1431,1432]
            SimpleName: R [1431,1432]
    FieldDeclaration [1441,1487]
        Modifier: private [1441,1448]
        Modifier: final [1449,1454]
        ParameterizedType [1455,1475]
            SimpleType [1455,1472]
                SimpleName: ChannelSubscriber [1455,1472]
            SimpleType [1473,1474]
                SimpleName: T [1473,1474]
        VariableDeclarationFragment [1476,1486]
            SimpleName: subscriber [1476,1486]
    FieldDeclaration [1493,1537]
        Modifier: private [1493,1500]
        Modifier: final [1501,1506]
        ParameterizedType [1507,1526]
            SimpleType [1507,1523]
                SimpleName: ChannelPublisher [1507,1523]
            SimpleType [1524,1525]
                SimpleName: R [1524,1525]
        VariableDeclarationFragment [1527,1536]
            SimpleName: publisher [1527,1536]
    FieldDeclaration [1545,1575]
        Modifier: private [1545,1552]
        Modifier: final [1553,1558]
        SimpleType [1559,1571]
            SimpleName: FiberFactory [1559,1571]
        VariableDeclarationFragment [1572,1574]
            SimpleName: ff [1572,1574]
    FieldDeclaration [1581,1693]
        Modifier: private [1581,1588]
        Modifier: final [1589,1594]
        ParameterizedType [1595,1680]
            SimpleType [1595,1613]
                SimpleName: SuspendableAction2 [1595,1613]
            WildcardType [1614,1646]
                ParameterizedType [1624,1646]
                    SimpleType [1624,1635]
                        SimpleName: ReceivePort [1624,1635]
                    WildcardType [1636,1645]
                        SimpleType [1644,1645]
                            SimpleName: T [1644,1645]
            WildcardType [1648,1679]
                ParameterizedType [1658,1679]
                    SimpleType [1658,1666]
                        SimpleName: SendPort [1658,1666]
                    WildcardType [1667,1678]
                        SimpleType [1677,1678]
                            SimpleName: R [1677,1678]
        VariableDeclarationFragment [1681,1692]
            SimpleName: transformer [1681,1692]
    FieldDeclaration [1699,1731]
        Modifier: private [1699,1706]
        Modifier: final [1707,1712]
        ParameterizedType [1713,1727]
            SimpleType [1713,1724]
                SimpleName: ReceivePort [1713,1724]
            SimpleType [1725,1726]
                SimpleName: T [1725,1726]
        VariableDeclarationFragment [1728,1730]
            SimpleName: in [1728,1730]
    FieldDeclaration [1737,1767]
        Modifier: private [1737,1744]
        Modifier: final [1745,1750]
        ParameterizedType [1751,1762]
            SimpleType [1751,1759]
                SimpleName: SendPort [1751,1759]
            SimpleType [1760,1761]
                SimpleName: R [1760,1761]
        VariableDeclarationFragment [1763,1766]
            SimpleName: out [1763,1766]
    FieldDeclaration [1773,1837]
        Modifier: private [1773,1780]
        Modifier: final [1781,1786]
        SimpleType [1787,1800]
            SimpleName: AtomicInteger [1787,1800]
        VariableDeclarationFragment [1801,1836]
            SimpleName: connectedEnds [1801,1814]
            ClassInstanceCreation [1817,1836]
                SimpleType [1821,1834]
                    SimpleName: AtomicInteger [1821,1834]
    FieldDeclaration [1843,1886]
        Modifier: private [1843,1850]
        Modifier: volatile [1851,1859]
        SimpleType [1860,1872]
            SimpleName: Subscription [1860,1872]
        VariableDeclarationFragment [1873,1885]
            SimpleName: subscription [1873,1885]
    MethodDeclaration [1894,3359]
        Modifier: public [1894,1900]
        SimpleName: ChannelProcessor [1901,1917]
        SingleVariableDeclaration [1918,1933]
            SimpleType [1918,1930]
                SimpleName: FiberFactory [1918,1930]
            SimpleName: ff [1931,1933]
        SingleVariableDeclaration [1935,1948]
            PrimitiveType: boolean [1935,1942]
            SimpleName: batch [1943,1948]
        SingleVariableDeclaration [1950,1963]
            ParameterizedType [1950,1960]
                SimpleType [1950,1957]
                    SimpleName: Channel [1950,1957]
                SimpleType [1958,1959]
                    SimpleName: T [1958,1959]
            SimpleName: in [1961,1963]
        SingleVariableDeclaration [1965,1979]
            ParameterizedType [1965,1975]
                SimpleType [1965,1972]
                    SimpleName: Channel [1965,1972]
                SimpleType [1973,1974]
                    SimpleName: R [1973,1974]
            SimpleName: out [1976,1979]
        SingleVariableDeclaration [1981,2078]
            ParameterizedType [1981,2066]
                SimpleType [1981,1999]
                    SimpleName: SuspendableAction2 [1981,1999]
                WildcardType [2000,2032]
                    ParameterizedType [2010,2032]
                        SimpleType [2010,2021]
                            SimpleName: ReceivePort [2010,2021]
                        WildcardType [2022,2031]
                            SimpleType [2030,2031]
                                SimpleName: T [2030,2031]
                WildcardType [2034,2065]
                    ParameterizedType [2044,2065]
                        SimpleType [2044,2052]
                            SimpleName: SendPort [2044,2052]
                        WildcardType [2053,2064]
                            SimpleType [2063,2064]
                                SimpleName: R [2063,2064]
            SimpleName: transformer [2067,2078]
        Block [2080,3359]
            ExpressionStatement [2091,2139]
                Assignment [2091,2138]
                    FieldAccess [2091,2098]
                        ThisExpression [2091,2095]
                        SimpleName: ff [2096,2098]
                    ASSIGNMENT_OPERATOR: = [2099,2100]
                    ConditionalExpression [2101,2138]
                        InfixExpression [2101,2111]
                            SimpleName: ff [2101,2103]
                            INFIX_EXPRESSION_OPERATOR: != [2104,2106]
                            NullLiteral [2107,2111]
                        SimpleName: ff [2114,2116]
                        SimpleName: defaultFiberFactory [2119,2138]
            ExpressionStatement [2149,2180]
                Assignment [2149,2179]
                    FieldAccess [2149,2165]
                        ThisExpression [2149,2153]
                        SimpleName: transformer [2154,2165]
                    ASSIGNMENT_OPERATOR: = [2166,2167]
                    SimpleName: transformer [2168,2179]
            ExpressionStatement [2190,2458]
                Assignment [2190,2457]
                    FieldAccess [2190,2205]
                        ThisExpression [2190,2194]
                        SimpleName: subscriber [2195,2205]
                    ASSIGNMENT_OPERATOR: = [2206,2207]
                    ClassInstanceCreation [2208,2457]
                        ParameterizedType [2212,2232]
                            SimpleType [2212,2229]
                                SimpleName: ChannelSubscriber [2212,2229]
                            SimpleType [2230,2231]
                                SimpleName: T [2230,2231]
                        SimpleName: in [2233,2235]
                        SimpleName: batch [2237,2242]
                        AnonymousClassDeclaration [2244,2457]
                            MethodDeclaration [2259,2446]
                                MarkerAnnotation [2259,2268]
                                    SimpleName: Override [2260,2268]
                                Modifier: protected [2282,2291]
                                PrimitiveType: void [2292,2296]
                                SimpleName: failedSubscribe [2297,2312]
                                SingleVariableDeclaration [2313,2327]
                                    SimpleType [2313,2325]
                                        SimpleName: Subscription [2313,2325]
                                    SimpleName: s [2326,2327]
                                Block [2329,2446]
                                    ExpressionStatement [2348,2373]
                                        SuperMethodInvocation [2348,2372]
                                            SimpleName: failedSubscribe [2354,2369]
                                            SimpleName: s [2370,2371]
                                    ThrowStatement [2391,2431]
                                        ClassInstanceCreation [2397,2430]
                                            SimpleType [2401,2428]
                                                SimpleName: FailedSubscriptionException [2401,2428]
            ExpressionStatement [2468,3296]
                Assignment [2468,3295]
                    FieldAccess [2468,2482]
                        ThisExpression [2468,2472]
                        SimpleName: publisher [2473,2482]
                    ASSIGNMENT_OPERATOR: = [2483,2484]
                    ClassInstanceCreation [2485,3295]
                        ParameterizedType [2489,2508]
                            SimpleType [2489,2505]
                                SimpleName: ChannelPublisher [2489,2505]
                            SimpleType [2506,2507]
                                SimpleName: R [2506,2507]
                        SimpleName: ff [2509,2511]
                        SimpleName: out [2513,2516]
                        BooleanLiteral: true [2518,2522]
                        AnonymousClassDeclaration [2524,3295]
                            MethodDeclaration [2539,2751]
                                MarkerAnnotation [2539,2548]
                                    SimpleName: Override [2540,2548]
                                Modifier: protected [2562,2571]
                                PrimitiveType: void [2572,2576]
                                SimpleName: failedSubscribe [2577,2592]
                                SingleVariableDeclaration [2593,2616]
                                    ParameterizedType [2593,2614]
                                        SimpleType [2593,2603]
                                            SimpleName: Subscriber [2593,2603]
                                        WildcardType [2604,2613]
                                            SimpleType [2612,2613]
                                                SimpleName: R [2612,2613]
                                    SimpleName: s [2615,2616]
                                SingleVariableDeclaration [2618,2629]
                                    SimpleType [2618,2627]
                                        SimpleName: Throwable [2618,2627]
                                    SimpleName: t [2628,2629]
                                Block [2631,2751]
                                    ExpressionStatement [2650,2678]
                                        SuperMethodInvocation [2650,2677]
                                            SimpleName: failedSubscribe [2656,2671]
                                            SimpleName: s [2672,2673]
                                            SimpleName: t [2675,2676]
                                    ThrowStatement [2696,2736]
                                        ClassInstanceCreation [2702,2735]
                                            SimpleType [2706,2733]
                                                SimpleName: FailedSubscriptionException [2706,2733]
                            MethodDeclaration [2767,3284]
                                MarkerAnnotation [2767,2776]
                                    SimpleName: Override [2768,2776]
                                Modifier: protected [2790,2799]
                                ParameterizedType [2800,2822]
                                    SimpleType [2800,2819]
                                        SimpleName: ChannelSubscription [2800,2819]
                                    SimpleType [2820,2821]
                                        SimpleName: R [2820,2821]
                                SimpleName: newChannelSubscription [2823,2845]
                                SingleVariableDeclaration [2846,2869]
                                    ParameterizedType [2846,2867]
                                        SimpleType [2846,2856]
                                            SimpleName: Subscriber [2846,2856]
                                        WildcardType [2857,2866]
                                            SimpleType [2865,2866]
                                                SimpleName: R [2865,2866]
                                    SimpleName: s [2868,2869]
                                SingleVariableDeclaration [2871,2885]
                                    SimpleType [2871,2877]
                                        SimpleName: Object [2871,2877]
                                    SimpleName: channel [2878,2885]
                                Block [2887,3284]
                                    ReturnStatement [2906,3269]
                                        ClassInstanceCreation [2913,3268]
                                            ParameterizedType [2917,2939]
                                                SimpleType [2917,2936]
                                                    SimpleName: ChannelSubscription [2917,2936]
                                                SimpleType [2937,2938]
                                                    SimpleName: R [2937,2938]
                                            SimpleName: s [2940,2941]
                                            CastExpression [2943,2967]
                                                ParameterizedType [2944,2958]
                                                    SimpleType [2944,2955]
                                                        SimpleName: ReceivePort [2944,2955]
                                                    SimpleType [2956,2957]
                                                        SimpleName: R [2956,2957]
                                                SimpleName: channel [2960,2967]
                                            AnonymousClassDeclaration [2969,3268]
                                                MethodDeclaration [2992,3249]
                                                    MarkerAnnotation [2992,3001]
                                                        SimpleName: Override [2993,3001]
                                                    Modifier: public [3023,3029]
                                                    PrimitiveType: void [3030,3034]
                                                    SimpleName: cancel [3035,3041]
                                                    Block [3044,3249]
                                                        ExpressionStatement [3071,3086]
                                                            SuperMethodInvocation [3071,3085]
                                                                SimpleName: cancel [3077,3083]
                                                        VariableDeclarationStatement [3112,3143]
                                                            SimpleType [3112,3124]
                                                                SimpleName: Subscription [3112,3124]
                                                            VariableDeclarationFragment [3125,3142]
                                                                SimpleName: ms [3125,3127]
                                                                SimpleName: subscription [3130,3142]
                                                        IfStatement [3169,3226]
                                                            InfixExpression [3173,3183]
                                                                SimpleName: ms [3173,3175]
                                                                INFIX_EXPRESSION_OPERATOR: != [3176,3178]
                                                                NullLiteral [3179,3183]
                                                            ExpressionStatement [3214,3226]
                                                                MethodInvocation [3214,3225]
                                                                    METHOD_INVOCATION_RECEIVER [3214,3216]
                                                                        SimpleName: ms [3214,3216]
                                                                    SimpleName: cancel [3217,3223]
            ExpressionStatement [3306,3327]
                Assignment [3306,3326]
                    FieldAccess [3306,3313]
                        ThisExpression [3306,3310]
                        SimpleName: in [3311,3313]
                    ASSIGNMENT_OPERATOR: = [3314,3315]
                    SimpleName: subscriber [3316,3326]
            ExpressionStatement [3337,3352]
                Assignment [3337,3351]
                    FieldAccess [3337,3345]
                        ThisExpression [3337,3341]
                        SimpleName: out [3342,3345]
                    ASSIGNMENT_OPERATOR: = [3346,3347]
                    SimpleName: out [3348,3351]
    MethodDeclaration [3367,3584]
        Modifier: private [3367,3374]
        PrimitiveType: void [3375,3379]
        SimpleName: connected [3380,3389]
        Block [3392,3584]
            VariableDeclarationStatement [3403,3453]
                PrimitiveType: int [3403,3406]
                VariableDeclarationFragment [3407,3452]
                    SimpleName: connections [3407,3418]
                    MethodInvocation [3421,3452]
                        METHOD_INVOCATION_RECEIVER [3421,3434]
                            SimpleName: connectedEnds [3421,3434]
                        SimpleName: incrementAndGet [3435,3450]
            IfStatement [3463,3506]
                InfixExpression [3467,3483]
                    SimpleName: connections [3467,3478]
                    INFIX_EXPRESSION_OPERATOR: == [3479,3481]
                    NumberLiteral: 2 [3482,3483]
                ExpressionStatement [3498,3506]
                    MethodInvocation [3498,3505]
                        SimpleName: start [3498,3503]
            IfStatement [3516,3577]
                InfixExpression [3520,3535]
                    SimpleName: connections [3520,3531]
                    INFIX_EXPRESSION_OPERATOR: > [3532,3533]
                    NumberLiteral: 2 [3534,3535]
                ThrowStatement [3550,3577]
                    ClassInstanceCreation [3556,3576]
                        SimpleType [3560,3574]
                            SimpleName: AssertionError [3560,3574]
    MethodDeclaration [3592,4162]
        Modifier: private [3592,3599]
        PrimitiveType: void [3600,3604]
        SimpleName: start [3605,3610]
        Block [3613,4162]
            ExpressionStatement [3624,4155]
                MethodInvocation [3624,4154]
                    METHOD_INVOCATION_RECEIVER [3624,4146]
                        MethodInvocation [3624,4146]
                            METHOD_INVOCATION_RECEIVER [3624,3626]
                                SimpleName: ff [3624,3626]
                            SimpleName: newFiber [3627,3635]
                            METHOD_INVOCATION_ARGUMENTS [3636,4145]
                                ClassInstanceCreation [3636,4145]
                                    ParameterizedType [3640,3665]
                                        SimpleType [3640,3659]
                                            SimpleName: SuspendableCallable [3640,3659]
                                        SimpleType [3660,3664]
                                            SimpleName: Void [3660,3664]
                                    AnonymousClassDeclaration [3668,4145]
                                        MethodDeclaration [3683,4134]
                                            MarkerAnnotation [3683,3692]
                                                SimpleName: Override [3684,3692]
                                            Modifier: public [3706,3712]
                                            SimpleType [3713,3717]
                                                SimpleName: Void [3713,3717]
                                            SimpleName: run [3718,3721]
                                            SimpleType [3731,3747]
                                                SimpleName: SuspendExecution [3731,3747]
                                            SimpleType [3749,3769]
                                                SimpleName: InterruptedException [3749,3769]
                                            Block [3770,4134]
                                                TryStatement [3789,4089]
                                                    Block [3793,3918]
                                                        ExpressionStatement [3816,3865]
                                                            MethodInvocation [3816,3864]
                                                                METHOD_INVOCATION_RECEIVER [3816,3850]
                                                                    ParenthesizedExpression [3816,3850]
                                                                        CastExpression [3817,3849]
                                                                            SimpleType [3818,3836]
                                                                                SimpleName: SuspendableAction2 [3818,3836]
                                                                            SimpleName: transformer [3838,3849]
                                                                SimpleName: call [3851,3855]
                                                                METHOD_INVOCATION_ARGUMENTS [3856,3863]
                                                                    SimpleName: in [3856,3858]
                                                                    SimpleName: out [3860,3863]
                                                        ExpressionStatement [3887,3899]
                                                            MethodInvocation [3887,3898]
                                                                METHOD_INVOCATION_RECEIVER [3887,3890]
                                                                    SimpleName: out [3887,3890]
                                                                SimpleName: close [3891,3896]
                                                    CatchClause [3919,4013]
                                                        SingleVariableDeclaration [3926,3945]
                                                            SimpleType [3926,3943]
                                                                SimpleName: ProducerException [3926,3943]
                                                            SimpleName: e [3944,3945]
                                                        Block [3947,4013]
                                                            ExpressionStatement [3970,3994]
                                                                MethodInvocation [3970,3993]
                                                                    METHOD_INVOCATION_RECEIVER [3970,3973]
                                                                        SimpleName: out [3970,3973]
                                                                    SimpleName: close [3974,3979]
                                                                    METHOD_INVOCATION_ARGUMENTS [3980,3992]
                                                                        MethodInvocation [3980,3992]
                                                                            METHOD_INVOCATION_RECEIVER [3980,3981]
                                                                                SimpleName: e [3980,3981]
                                                                            SimpleName: getCause [3982,3990]
                                                    CatchClause [4014,4089]
                                                        SingleVariableDeclaration [4021,4032]
                                                            SimpleType [4021,4030]
                                                                SimpleName: Throwable [4021,4030]
                                                            SimpleName: t [4031,4032]
                                                        Block [4034,4089]
                                                            ExpressionStatement [4057,4070]
                                                                MethodInvocation [4057,4069]
                                                                    METHOD_INVOCATION_RECEIVER [4057,4060]
                                                                        SimpleName: out [4057,4060]
                                                                    SimpleName: close [4061,4066]
                                                                    METHOD_INVOCATION_ARGUMENTS [4067,4068]
                                                                        SimpleName: t [4067,4068]
                                                ReturnStatement [4107,4119]
                                                    NullLiteral [4114,4118]
                    SimpleName: start [4147,4152]
    MethodDeclaration [4170,4380]
        MarkerAnnotation [4170,4179]
            SimpleName: Override [4171,4179]
        Modifier: public [4185,4191]
        PrimitiveType: void [4192,4196]
        SimpleName: subscribe [4197,4206]
        SingleVariableDeclaration [4207,4230]
            ParameterizedType [4207,4228]
                SimpleType [4207,4217]
                    SimpleName: Subscriber [4207,4217]
                WildcardType [4218,4227]
                    SimpleType [4226,4227]
                        SimpleName: R [4226,4227]
            SimpleName: s [4229,4230]
        Block [4232,4380]
            TryStatement [4243,4373]
                Block [4247,4322]
                    ExpressionStatement [4262,4285]
                        MethodInvocation [4262,4284]
                            METHOD_INVOCATION_RECEIVER [4262,4271]
                                SimpleName: publisher [4262,4271]
                            SimpleName: subscribe [4272,4281]
                            METHOD_INVOCATION_ARGUMENTS [4282,4283]
                                SimpleName: s [4282,4283]
                    ExpressionStatement [4299,4311]
                        MethodInvocation [4299,4310]
                            SimpleName: connected [4299,4308]
                CatchClause [4323,4373]
                    SingleVariableDeclaration [4330,4359]
                        SimpleType [4330,4357]
                            SimpleName: FailedSubscriptionException [4330,4357]
                        SimpleName: e [4358,4359]
                    Block [4361,4373]
    MethodDeclaration [4388,4630]
        MarkerAnnotation [4388,4397]
            SimpleName: Override [4389,4397]
        Modifier: public [4403,4409]
        PrimitiveType: void [4410,4414]
        SimpleName: onSubscribe [4415,4426]
        SingleVariableDeclaration [4427,4441]
            SimpleType [4427,4439]
                SimpleName: Subscription [4427,4439]
            SimpleName: s [4440,4441]
        Block [4443,4630]
            TryStatement [4454,4623]
                Block [4458,4572]
                    ExpressionStatement [4473,4499]
                        MethodInvocation [4473,4498]
                            METHOD_INVOCATION_RECEIVER [4473,4483]
                                SimpleName: subscriber [4473,4483]
                            SimpleName: onSubscribe [4484,4495]
                            METHOD_INVOCATION_ARGUMENTS [4496,4497]
                                SimpleName: s [4496,4497]
                    ExpressionStatement [4513,4535]
                        Assignment [4513,4534]
                            FieldAccess [4513,4530]
                                ThisExpression [4513,4517]
                                SimpleName: subscription [4518,4530]
                            ASSIGNMENT_OPERATOR: = [4531,4532]
                            SimpleName: s [4533,4534]
                    ExpressionStatement [4549,4561]
                        MethodInvocation [4549,4560]
                            SimpleName: connected [4549,4558]
                CatchClause [4573,4623]
                    SingleVariableDeclaration [4580,4609]
                        SimpleType [4580,4607]
                            SimpleName: FailedSubscriptionException [4580,4607]
                        SimpleName: e [4608,4609]
                    Block [4611,4623]
    MethodDeclaration [4638,4728]
        MarkerAnnotation [4638,4647]
            SimpleName: Override [4639,4647]
        Modifier: public [4653,4659]
        PrimitiveType: void [4660,4664]
        SimpleName: onNext [4665,4671]
        SingleVariableDeclaration [4672,4681]
            SimpleType [4672,4673]
                SimpleName: T [4672,4673]
            SimpleName: element [4674,4681]
        Block [4683,4728]
            ExpressionStatement [4694,4721]
                MethodInvocation [4694,4720]
                    METHOD_INVOCATION_RECEIVER [4694,4704]
                        SimpleName: subscriber [4694,4704]
                    SimpleName: onNext [4705,4711]
                    METHOD_INVOCATION_ARGUMENTS [4712,4719]
                        SimpleName: element [4712,4719]
    MethodDeclaration [4736,4832]
        MarkerAnnotation [4736,4745]
            SimpleName: Override [4737,4745]
        Modifier: public [4751,4757]
        PrimitiveType: void [4758,4762]
        SimpleName: onError [4763,4770]
        SingleVariableDeclaration [4771,4786]
            SimpleType [4771,4780]
                SimpleName: Throwable [4771,4780]
            SimpleName: cause [4781,4786]
        Block [4788,4832]
            ExpressionStatement [4799,4825]
                MethodInvocation [4799,4824]
                    METHOD_INVOCATION_RECEIVER [4799,4809]
                        SimpleName: subscriber [4799,4809]
                    SimpleName: onError [4810,4817]
                    METHOD_INVOCATION_ARGUMENTS [4818,4823]
                        SimpleName: cause [4818,4823]
    MethodDeclaration [4840,4922]
        MarkerAnnotation [4840,4849]
            SimpleName: Override [4841,4849]
        Modifier: public [4855,4861]
        PrimitiveType: void [4862,4866]
        SimpleName: onComplete [4867,4877]
        Block [4880,4922]
            ExpressionStatement [4891,4915]
                MethodInvocation [4891,4914]
                    METHOD_INVOCATION_RECEIVER [4891,4901]
                        SimpleName: subscriber [4891,4901]
                    SimpleName: onComplete [4902,4912]
    FieldDeclaration [4930,5158]
        Modifier: private [4930,4937]
        Modifier: static [4938,4944]
        Modifier: final [4945,4950]
        SimpleType [4951,4963]
            SimpleName: FiberFactory [4951,4963]
        VariableDeclarationFragment [4964,4983]
            SimpleName: defaultFiberFactory [4964,4983]
    TypeDeclaration [5162,5244]
        Modifier: private [5162,5169]
        Modifier: static [5170,5176]
        TYPE_DECLARATION_KIND: class [5177,5182]
        SimpleName: FailedSubscriptionException [5183,5210]
        SimpleType [5219,5235]
            SimpleName: RuntimeException [5219,5235]
to
CompilationUnit [0,16622]
at 65
===
insert-tree
---
TypeDeclaration [24659,26832]
    Modifier: public [24659,24665]
    TYPE_DECLARATION_KIND: class [24666,24671]
    SimpleName: ChannelProcessorTest [24672,24692]
    ParameterizedType [24701,24739]
        SimpleType [24701,24730]
            SimpleName: IdentityProcessorVerification [24701,24730]
        SimpleType [24731,24738]
            SimpleName: Integer [24731,24738]
    FieldDeclaration [24747,24803]
        Modifier: private [24747,24754]
        Modifier: static [24755,24761]
        Modifier: final [24762,24767]
        PrimitiveType: long [24768,24772]
        VariableDeclarationFragment [24773,24802]
            SimpleName: DEFAULT_TIMEOUT_MILLIS [24773,24795]
            NumberLiteral: 300L [24798,24802]
    FieldDeclaration [24809,24885]
        Modifier: public [24809,24815]
        Modifier: static [24816,24822]
        Modifier: final [24823,24828]
        PrimitiveType: long [24829,24833]
        VariableDeclarationFragment [24834,24884]
            SimpleName: PUBLISHER_REFERENCE_CLEANUP_TIMEOUT_MILLIS [24834,24876]
            NumberLiteral: 1000L [24879,24884]
    FieldDeclaration [24893,24937]
        Modifier: private [24893,24900]
        Modifier: final [24901,24906]
        SimpleType [24907,24921]
            SimpleName: OverflowPolicy [24907,24921]
        VariableDeclarationFragment [24922,24936]
            SimpleName: overflowPolicy [24922,24936]
    FieldDeclaration [24943,24971]
        Modifier: private [24943,24950]
        Modifier: final [24951,24956]
        PrimitiveType: boolean [24957,24964]
        VariableDeclarationFragment [24965,24970]
            SimpleName: batch [24965,24970]
    MethodDeclaration [24979,25324]
        NormalAnnotation [24979,25012]
            SimpleName: Factory [24980,24987]
            MemberValuePair [24988,25011]
                SimpleName: dataProvider [24988,25000]
                StringLiteral: "params" [25003,25011]
        Modifier: public [25018,25024]
        SimpleName: ChannelProcessorTest [25025,25045]
        SingleVariableDeclaration [25046,25075]
            SimpleType [25046,25060]
                SimpleName: OverflowPolicy [25046,25060]
            SimpleName: overflowPolicy [25061,25075]
        SingleVariableDeclaration [25077,25090]
            PrimitiveType: boolean [25077,25084]
            SimpleName: batch [25085,25090]
        Block [25092,25324]
            SuperConstructorInvocation [25144,25239]
                ClassInstanceCreation [25150,25193]
                    SimpleType [25154,25169]
                        SimpleName: TestEnvironment [25154,25169]
                    SimpleName: DEFAULT_TIMEOUT_MILLIS [25170,25192]
                SimpleName: PUBLISHER_REFERENCE_CLEANUP_TIMEOUT_MILLIS [25195,25237]
            ExpressionStatement [25251,25288]
                Assignment [25251,25287]
                    FieldAccess [25251,25270]
                        ThisExpression [25251,25255]
                        SimpleName: overflowPolicy [25256,25270]
                    ASSIGNMENT_OPERATOR: = [25271,25272]
                    SimpleName: overflowPolicy [25273,25287]
            ExpressionStatement [25298,25317]
                Assignment [25298,25316]
                    FieldAccess [25298,25308]
                        ThisExpression [25298,25302]
                        SimpleName: batch [25303,25308]
                    ASSIGNMENT_OPERATOR: = [25309,25310]
                    SimpleName: batch [25311,25316]
    MethodDeclaration [25332,25674]
        NormalAnnotation [25332,25362]
            SimpleName: DataProvider [25333,25345]
            MemberValuePair [25346,25361]
                SimpleName: name [25346,25350]
                StringLiteral: "params" [25353,25361]
        Modifier: public [25368,25374]
        Modifier: static [25375,25381]
        ArrayType [25382,25392]
            SimpleType [25382,25388]
                SimpleName: Object [25382,25388]
            Dimension [25388,25390]
            Dimension [25390,25392]
        SimpleName: data [25393,25397]
        Block [25400,25674]
            ReturnStatement [25411,25667]
                ArrayCreation [25418,25666]
                    ArrayType [25422,25432]
                        SimpleType [25422,25428]
                            SimpleName: Object [25422,25428]
                        Dimension [25428,25430]
                        Dimension [25430,25432]
                    ArrayInitializer [25432,25666]
                        ArrayInitializer [25447,25476]
                            QualifiedName: OverflowPolicy.BLOCK [25448,25468]
                            BooleanLiteral: false [25470,25475]
    MethodDeclaration [25682,26333]
        MarkerAnnotation [25682,25691]
            SimpleName: Override [25683,25691]
        Modifier: public [25697,25703]
        ParameterizedType [25704,25731]
            SimpleType [25704,25713]
                SimpleName: Processor [25704,25713]
            SimpleType [25714,25721]
                SimpleName: Integer [25714,25721]
            SimpleType [25723,25730]
                SimpleName: Integer [25723,25730]
        SimpleName: createIdentityProcessor [25732,25755]
        SingleVariableDeclaration [25756,25770]
            PrimitiveType: int [25756,25759]
            SimpleName: bufferSize [25760,25770]
        Block [25772,26333]
            ReturnStatement [25783,26326]
                MethodInvocation [25790,26325]
                    METHOD_INVOCATION_RECEIVER [25790,25805]
                        SimpleName: ReactiveStreams [25790,25805]
                    SimpleName: toProcessor [25806,25817]
                    METHOD_INVOCATION_ARGUMENTS [25818,26324]
                        NullLiteral [25818,25822]
                        SimpleName: bufferSize [25824,25834]
                        SimpleName: overflowPolicy [25836,25850]
                        SimpleName: batch [25852,25857]
                        ClassInstanceCreation [25859,26324]
                            ParameterizedType [25863,25922]
                                SimpleType [25863,25881]
                                    SimpleName: SuspendableAction2 [25863,25881]
                                ParameterizedType [25882,25902]
                                    SimpleType [25882,25893]
                                        SimpleName: ReceivePort [25882,25893]
                                    SimpleType [25894,25901]
                                        SimpleName: Integer [25894,25901]
                                ParameterizedType [25904,25921]
                                    SimpleType [25904,25912]
                                        SimpleName: SendPort [25904,25912]
                                    SimpleType [25913,25920]
                                        SimpleName: Integer [25913,25920]
                            AnonymousClassDeclaration [25925,26324]
                                MethodDeclaration [25942,26313]
                                    MarkerAnnotation [25942,25951]
                                        SimpleName: Override [25943,25951]
                                    Modifier: public [25965,25971]
                                    PrimitiveType: void [25972,25976]
                                    SimpleName: call [25977,25981]
                                    SingleVariableDeclaration [25982,26005]
                                        ParameterizedType [25982,26002]
                                            SimpleType [25982,25993]
                                                SimpleName: ReceivePort [25982,25993]
                                            SimpleType [25994,26001]
                                                SimpleName: Integer [25994,26001]
                                        SimpleName: in [26003,26005]
                                    SingleVariableDeclaration [26007,26028]
                                        ParameterizedType [26007,26024]
                                            SimpleType [26007,26015]
                                                SimpleName: SendPort [26007,26015]
                                            SimpleType [26016,26023]
                                                SimpleName: Integer [26016,26023]
                                        SimpleName: out [26025,26028]
                                    SimpleType [26037,26053]
                                        SimpleName: SuspendExecution [26037,26053]
                                    SimpleType [26055,26075]
                                        SimpleName: InterruptedException [26055,26075]
                                    Block [26076,26313]
                                        ForStatement [26095,26268]
                                            VariableDeclarationExpression [26100,26115]
                                                SimpleType [26100,26107]
                                                    SimpleName: Integer [26100,26107]
                                                VariableDeclarationFragment [26108,26115]
                                                    SimpleName: element [26108,26115]
                                            ParenthesizedExpression [26117,26151]
                                                InfixExpression [26118,26150]
                                                    ParenthesizedExpression [26118,26142]
                                                        Assignment [26119,26141]
                                                            SimpleName: element [26119,26126]
                                                            ASSIGNMENT_OPERATOR: = [26127,26128]
                                                            MethodInvocation [26129,26141]
                                                                METHOD_INVOCATION_RECEIVER [26129,26131]
                                                                    SimpleName: in [26129,26131]
                                                                SimpleName: receive [26132,26139]
                                                    INFIX_EXPRESSION_OPERATOR: != [26143,26145]
                                                    NullLiteral [26146,26150]
                                            Block [26154,26268]
                                                ExpressionStatement [26177,26195]
                                                    MethodInvocation [26177,26194]
                                                        METHOD_INVOCATION_RECEIVER [26177,26180]
                                                            SimpleName: out [26177,26180]
                                                        SimpleName: send [26181,26185]
                                                        METHOD_INVOCATION_ARGUMENTS [26186,26193]
                                                            SimpleName: element [26186,26193]
                                                ExpressionStatement [26217,26233]
                                                    MethodInvocation [26217,26232]
                                                        METHOD_INVOCATION_RECEIVER [26217,26222]
                                                            SimpleName: Fiber [26217,26222]
                                                        SimpleName: sleep [26223,26228]
                                                        METHOD_INVOCATION_ARGUMENTS [26229,26231]
                                                            NumberLiteral: 10 [26229,26231]
                                        ExpressionStatement [26286,26298]
                                            MethodInvocation [26286,26297]
                                                METHOD_INVOCATION_RECEIVER [26286,26289]
                                                    SimpleName: out [26286,26289]
                                                SimpleName: close [26290,26295]
    MethodDeclaration [26341,26421]
        MarkerAnnotation [26341,26350]
            SimpleName: Override [26342,26350]
        Modifier: public [26356,26362]
        PrimitiveType: long [26363,26367]
        SimpleName: maxSupportedSubscribers [26368,26391]
        Block [26394,26421]
            ReturnStatement [26405,26414]
                NumberLiteral: 1 [26412,26413]
    MethodDeclaration [26429,26548]
        MarkerAnnotation [26429,26438]
            SimpleName: Override [26430,26438]
        Modifier: public [26444,26450]
        ParameterizedType [26451,26469]
            SimpleType [26451,26460]
                SimpleName: Publisher [26451,26460]
            SimpleType [26461,26468]
                SimpleName: Integer [26461,26468]
        SimpleName: createFailedPublisher [26470,26491]
        Block [26494,26548]
            ReturnStatement [26505,26541]
                MethodInvocation [26512,26540]
                    SimpleName: createDummyFailedPublisher [26512,26538]
    MethodDeclaration [26556,26601]
        MarkerAnnotation [26556,26561]
            SimpleName: Test [26557,26561]
        Modifier: public [26567,26573]
        PrimitiveType: void [26574,26578]
        SimpleName: testNothing [26579,26590]
        Block [26593,26601]
    MethodDeclaration [26609,26731]
        MarkerAnnotation [26609,26618]
            SimpleName: Override [26610,26618]
        Modifier: public [26624,26630]
        SimpleType [26631,26646]
            SimpleName: ExecutorService [26631,26646]
        SimpleName: publisherExecutorService [26647,26671]
        Block [26674,26731]
            ReturnStatement [26685,26724]
                MethodInvocation [26692,26723]
                    METHOD_INVOCATION_RECEIVER [26692,26701]
                        SimpleName: Executors [26692,26701]
                    SimpleName: newFixedThreadPool [26702,26720]
                    METHOD_INVOCATION_ARGUMENTS [26721,26722]
                        NumberLiteral: 3 [26721,26722]
    MethodDeclaration [26739,26829]
        MarkerAnnotation [26739,26748]
            SimpleName: Override [26740,26748]
        Modifier: public [26754,26760]
        SimpleType [26761,26768]
            SimpleName: Integer [26761,26768]
        SimpleName: createElement [26769,26782]
        SingleVariableDeclaration [26783,26794]
            PrimitiveType: int [26783,26786]
            SimpleName: element [26787,26794]
        Block [26796,26829]
            ReturnStatement [26807,26822]
                SimpleName: element [26814,26821]
to
CompilationUnit [0,16622]
at 69
===
insert-node
---
MethodDeclaration [7229,7389]
to
TypeDeclaration [1023,2387]
at 10
===
insert-node
---
MethodDeclaration [10373,10449]
to
TypeDeclaration [3629,6956]
at 13
===
insert-tree
---
MethodDeclaration [19954,21541]
    Javadoc [19954,21062]
        TagElement [19966,20137]
            TextElement: Turns a  [19966,19974]
            TagElement [19974,20060]
                MethodRef [19981,20047]
                    SimpleName: Channels [19981,19989]
                    SimpleName: fiberTransform [19990,20004]
                    MethodRefParameter [20005,20016]
                        SimpleType [20005,20016]
                            SimpleName: ReceivePort [20005,20016]
                    MethodRefParameter [20018,20026]
                        SimpleType [20018,20026]
                            SimpleName: SendPort [20018,20026]
                    MethodRefParameter [20028,20046]
                        SimpleType [20028,20046]
                            SimpleName: SuspendableAction2 [20028,20046]
                TextElement:  transformer [20047,20059]
            TextElement:  into a  [20060,20068]
            TagElement [20068,20085]
                SimpleName: Publisher [20075,20084]
            TextElement: . [20085,20086]
            TextElement: The transformer will run in its own fiber. [20095,20137]
        TagElement [20154,20222]
            TextElement: < [20161,20162]
            SimpleName: T [20162,20163]
            TextElement: > [20163,20164]
            TextElement:          the type of elements flowing into the transformer [20164,20222]
        TagElement [20231,20301]
            TextElement: < [20238,20239]
            SimpleName: R [20239,20240]
            TextElement: > [20240,20241]
            TextElement:          the type of elements flowing out of the transformer [20241,20301]
        TagElement [20310,20434]
            SimpleName: ff [20317,20319]
            TextElement:           the  [20319,20333]
            TagElement [20333,20353]
                SimpleName: FiberFactory [20340,20352]
            TextElement:  to create the internal fiber(s); if  [20353,20390]
            TagElement [20390,20402]
                TextElement:  null [20396,20401]
            TextElement:  then a default factory is used. [20402,20434]
        TagElement [20443,20568]
            SimpleName: bufferSize [20450,20460]
            TextElement:   the size of the buffer of the internal channel; may be  [20460,20517]
            TagElement [20517,20527]
                TextElement:  -1 [20523,20526]
            TextElement:  for unbounded, but may not be  [20527,20558]
            TagElement [20558,20567]
                TextElement:  0 [20564,20566]
            TextElement: ) [20567,20568]
        TagElement [20577,20647]
            SimpleName: policy [20584,20590]
            TextElement:       the  [20590,20600]
            TagElement [20600,20622]
                SimpleName: OverflowPolicy [20607,20621]
            TextElement:  of the internal channel. [20622,20647]
        TagElement [20656,20880]
            SimpleName: batch [20663,20668]
            TextElement:        if the channel has a bounded buffer, whether to request further elements from the publisher in batches [20668,20777]
            TextElement: whenever the channel's buffer is depleted, or after consuming each element. [20805,20880]
        TagElement [20889,20986]
            SimpleName: transformer [20896,20907]
            TextElement:  a function that reads from it's input channel and writes to its output channel [20907,20986]
        TagElement [20995,21053]
            TextElement:  a  [21002,21005]
            TagElement [21005,21022]
                TextElement:  Processor [21011,21021]
            TextElement:  running the given transformer. [21022,21053]
    Modifier: public [21068,21074]
    Modifier: static [21075,21081]
    TypeParameter [21083,21084]
        SimpleName: T [21083,21084]
    TypeParameter [21086,21087]
        SimpleName: R [21086,21087]
    ParameterizedType [21089,21104]
        SimpleType [21089,21098]
            SimpleName: Processor [21089,21098]
        SimpleType [21099,21100]
            SimpleName: T [21099,21100]
        SimpleType [21102,21103]
            SimpleName: R [21102,21103]
    SimpleName: toProcessor [21105,21116]
    SingleVariableDeclaration [21117,21132]
        SimpleType [21117,21129]
            SimpleName: FiberFactory [21117,21129]
        SimpleName: ff [21130,21132]
    SingleVariableDeclaration [21134,21148]
        PrimitiveType: int [21134,21137]
        SimpleName: bufferSize [21138,21148]
    SingleVariableDeclaration [21150,21171]
        SimpleType [21150,21164]
            SimpleName: OverflowPolicy [21150,21164]
        SimpleName: policy [21165,21171]
    SingleVariableDeclaration [21173,21186]
        PrimitiveType: boolean [21173,21180]
        SimpleName: batch [21181,21186]
    SingleVariableDeclaration [21188,21285]
        ParameterizedType [21188,21273]
            SimpleType [21188,21206]
                SimpleName: SuspendableAction2 [21188,21206]
            WildcardType [21207,21239]
                ParameterizedType [21217,21239]
                    SimpleType [21217,21228]
                        SimpleName: ReceivePort [21217,21228]
                    WildcardType [21229,21238]
                        SimpleType [21237,21238]
                            SimpleName: T [21237,21238]
            WildcardType [21241,21272]
                ParameterizedType [21251,21272]
                    SimpleType [21251,21259]
                        SimpleName: SendPort [21251,21259]
                    WildcardType [21260,21271]
                        SimpleType [21270,21271]
                            SimpleName: R [21270,21271]
        SimpleName: transformer [21274,21285]
    Block [21287,21541]
        VariableDeclarationStatement [21298,21372]
            Modifier: final [21298,21303]
            ParameterizedType [21304,21314]
                SimpleType [21304,21311]
                    SimpleName: Channel [21304,21311]
                SimpleType [21312,21313]
                    SimpleName: T [21312,21313]
            VariableDeclarationFragment [21315,21371]
                SimpleName: in [21315,21317]
                MethodInvocation [21320,21371]
                    METHOD_INVOCATION_RECEIVER [21320,21328]
                        SimpleName: Channels [21320,21328]
                    SimpleName: newChannel [21329,21339]
                    METHOD_INVOCATION_ARGUMENTS [21340,21370]
                        SimpleName: bufferSize [21340,21350]
                        SimpleName: policy [21352,21358]
                        BooleanLiteral: true [21360,21364]
                        BooleanLiteral: true [21366,21370]
        VariableDeclarationStatement [21382,21457]
            Modifier: final [21382,21387]
            ParameterizedType [21388,21398]
                SimpleType [21388,21395]
                    SimpleName: Channel [21388,21395]
                SimpleType [21396,21397]
                    SimpleName: R [21396,21397]
            VariableDeclarationFragment [21399,21456]
                SimpleName: out [21399,21402]
                MethodInvocation [21405,21456]
                    METHOD_INVOCATION_RECEIVER [21405,21413]
                        SimpleName: Channels [21405,21413]
                    SimpleName: newChannel [21414,21424]
                    METHOD_INVOCATION_ARGUMENTS [21425,21455]
                        SimpleName: bufferSize [21425,21435]
                        SimpleName: policy [21437,21443]
                        BooleanLiteral: true [21445,21449]
                        BooleanLiteral: true [21451,21455]
        ReturnStatement [21467,21534]
            ClassInstanceCreation [21474,21533]
                ParameterizedType [21478,21500]
                    SimpleType [21478,21494]
                        SimpleName: ChannelProcessor [21478,21494]
                    SimpleType [21495,21496]
                        SimpleName: T [21495,21496]
                    SimpleType [21498,21499]
                        SimpleName: R [21498,21499]
                SimpleName: ff [21501,21503]
                SimpleName: batch [21505,21510]
                SimpleName: in [21512,21514]
                SimpleName: out [21516,21519]
                SimpleName: transformer [21521,21532]
to
TypeDeclaration [8061,14286]
at 9
===
insert-tree
---
MethodDeclaration [21549,23293]
    Javadoc [21549,22844]
        TagElement [21561,21861]
            TextElement: Turns a  [21561,21569]
            TagElement [21569,21655]
                MethodRef [21576,21642]
                    SimpleName: Channels [21576,21584]
                    SimpleName: fiberTransform [21585,21599]
                    MethodRefParameter [21600,21611]
                        SimpleType [21600,21611]
                            SimpleName: ReceivePort [21600,21611]
                    MethodRefParameter [21613,21621]
                        SimpleType [21613,21621]
                            SimpleName: SendPort [21613,21621]
                    MethodRefParameter [21623,21641]
                        SimpleType [21623,21641]
                            SimpleName: SuspendableAction2 [21623,21641]
                TextElement:  transformer [21642,21654]
            TextElement:  into a  [21655,21663]
            TagElement [21663,21680]
                SimpleName: Publisher [21670,21679]
            TextElement: . [21680,21681]
            TextElement: The transformer will run in its own fiber. [21690,21732]
            TextElement: <p> [21741,21744]
            TextElement: Same as calling  [21753,21769]
            TagElement [21778,21919]
                MethodRef [21785,21861]
                    SimpleName: toProcessor [21786,21797]
                    MethodRefParameter [21798,21810]
                        SimpleType [21798,21810]
                            SimpleName: FiberFactory [21798,21810]
                    MethodRefParameter [21812,21815]
                        PrimitiveType: int [21812,21815]
                    MethodRefParameter [21817,21831]
                        SimpleType [21817,21831]
                            SimpleName: OverflowPolicy [21817,21831]
                    MethodRefParameter [21833,21840]
                        PrimitiveType: boolean [21833,21840]
                    MethodRefParameter [21842,21860]
                        SimpleType [21842,21860]
                            SimpleName: SuspendableAction2 [21842,21860]
                TextElement:  toProcessor(null, bufferSize, policy, false, transformer) [21861,21919]
        TagElement [21936,22004]
            TextElement: < [21943,21944]
            SimpleName: T [21944,21945]
            TextElement: > [21945,21946]
            TextElement:          the type of elements flowing into the transformer [21946,22004]
        TagElement [22013,22083]
            TextElement: < [22020,22021]
            SimpleName: R [22021,22022]
            TextElement: > [22022,22023]
            TextElement:          the type of elements flowing out of the transformer [22023,22083]
        TagElement [22092,22216]
            SimpleName: ff [22099,22101]
            TextElement:           the  [22101,22115]
            TagElement [22115,22135]
                SimpleName: FiberFactory [22122,22134]
            TextElement:  to create the internal fiber(s); if  [22135,22172]
            TagElement [22172,22184]
                TextElement:  null [22178,22183]
            TextElement:  then a default factory is used. [22184,22216]
        TagElement [22225,22350]
            SimpleName: bufferSize [22232,22242]
            TextElement:   the size of the buffer of the internal channel; may be  [22242,22299]
            TagElement [22299,22309]
                TextElement:  -1 [22305,22308]
            TextElement:  for unbounded, but may not be  [22309,22340]
            TagElement [22340,22349]
                TextElement:  0 [22346,22348]
            TextElement: ) [22349,22350]
        TagElement [22359,22429]
            SimpleName: policy [22366,22372]
            TextElement:       the  [22372,22382]
            TagElement [22382,22404]
                SimpleName: OverflowPolicy [22389,22403]
            TextElement:  of the internal channel. [22404,22429]
        TagElement [22438,22662]
            SimpleName: batch [22445,22450]
            TextElement:        if the channel has a bounded buffer, whether to request further elements from the publisher in batches [22450,22559]
            TextElement: whenever the channel's buffer is depleted, or after consuming each element. [22587,22662]
        TagElement [22671,22768]
            SimpleName: transformer [22678,22689]
            TextElement:  a function that reads from it's input channel and writes to its output channel [22689,22768]
        TagElement [22777,22835]
            TextElement:  a  [22784,22787]
            TagElement [22787,22804]
                TextElement:  Processor [22793,22803]
            TextElement:  running the given transformer. [22804,22835]
    Modifier: public [22850,22856]
    Modifier: static [22857,22863]
    TypeParameter [22865,22866]
        SimpleName: T [22865,22866]
    TypeParameter [22868,22869]
        SimpleName: R [22868,22869]
    ParameterizedType [22871,22886]
        SimpleType [22871,22880]
            SimpleName: Processor [22871,22880]
        SimpleType [22881,22882]
            SimpleName: T [22881,22882]
        SimpleType [22884,22885]
            SimpleName: R [22884,22885]
    SimpleName: toProcessor [22887,22898]
    SingleVariableDeclaration [22899,22913]
        PrimitiveType: int [22899,22902]
        SimpleName: bufferSize [22903,22913]
    SingleVariableDeclaration [22915,22936]
        SimpleType [22915,22929]
            SimpleName: OverflowPolicy [22915,22929]
        SimpleName: policy [22930,22936]
    SingleVariableDeclaration [22938,23035]
        ParameterizedType [22938,23023]
            SimpleType [22938,22956]
                SimpleName: SuspendableAction2 [22938,22956]
            WildcardType [22957,22989]
                ParameterizedType [22967,22989]
                    SimpleType [22967,22978]
                        SimpleName: ReceivePort [22967,22978]
                    WildcardType [22979,22988]
                        SimpleType [22987,22988]
                            SimpleName: T [22987,22988]
            WildcardType [22991,23022]
                ParameterizedType [23001,23022]
                    SimpleType [23001,23009]
                        SimpleName: SendPort [23001,23009]
                    WildcardType [23010,23021]
                        SimpleType [23020,23021]
                            SimpleName: R [23020,23021]
        SimpleName: transformer [23024,23035]
    Block [23037,23293]
        VariableDeclarationStatement [23048,23122]
            Modifier: final [23048,23053]
            ParameterizedType [23054,23064]
                SimpleType [23054,23061]
                    SimpleName: Channel [23054,23061]
                SimpleType [23062,23063]
                    SimpleName: T [23062,23063]
            VariableDeclarationFragment [23065,23121]
                SimpleName: in [23065,23067]
                MethodInvocation [23070,23121]
                    METHOD_INVOCATION_RECEIVER [23070,23078]
                        SimpleName: Channels [23070,23078]
                    SimpleName: newChannel [23079,23089]
                    METHOD_INVOCATION_ARGUMENTS [23090,23120]
                        SimpleName: bufferSize [23090,23100]
                        SimpleName: policy [23102,23108]
                        BooleanLiteral: true [23110,23114]
                        BooleanLiteral: true [23116,23120]
        VariableDeclarationStatement [23132,23207]
            Modifier: final [23132,23137]
            ParameterizedType [23138,23148]
                SimpleType [23138,23145]
                    SimpleName: Channel [23138,23145]
                SimpleType [23146,23147]
                    SimpleName: R [23146,23147]
            VariableDeclarationFragment [23149,23206]
                SimpleName: out [23149,23152]
                MethodInvocation [23155,23206]
                    METHOD_INVOCATION_RECEIVER [23155,23163]
                        SimpleName: Channels [23155,23163]
                    SimpleName: newChannel [23164,23174]
                    METHOD_INVOCATION_ARGUMENTS [23175,23205]
                        SimpleName: bufferSize [23175,23185]
                        SimpleName: policy [23187,23193]
                        BooleanLiteral: true [23195,23199]
                        BooleanLiteral: true [23201,23205]
        ReturnStatement [23217,23286]
            ClassInstanceCreation [23224,23285]
                ParameterizedType [23228,23250]
                    SimpleType [23228,23244]
                        SimpleName: ChannelProcessor [23228,23244]
                    SimpleType [23245,23246]
                        SimpleName: T [23245,23246]
                    SimpleType [23248,23249]
                        SimpleName: R [23248,23249]
                NullLiteral [23251,23255]
                BooleanLiteral: false [23257,23262]
                SimpleName: in [23264,23266]
                SimpleName: out [23268,23271]
                SimpleName: transformer [23273,23284]
to
TypeDeclaration [8061,14286]
at 10
===
insert-tree
---
MethodDeclaration [29296,29903]
    Modifier: public [29296,29302]
    Modifier: static [29303,29309]
    TypeParameter [29311,29312]
        SimpleName: T [29311,29312]
    ParameterizedType [29314,29326]
        SimpleType [29314,29323]
            SimpleName: Publisher [29314,29323]
        SimpleType [29324,29325]
            SimpleName: T [29324,29325]
    SimpleName: createDummyFailedPublisher [29327,29353]
    Block [29356,29903]
        ReturnStatement [29367,29896]
            ClassInstanceCreation [29374,29895]
                ParameterizedType [29378,29390]
                    SimpleType [29378,29387]
                        SimpleName: Publisher [29378,29387]
                    SimpleType [29388,29389]
                        SimpleName: T [29388,29389]
                AnonymousClassDeclaration [29393,29895]
                    MethodDeclaration [29408,29884]
                        MarkerAnnotation [29408,29417]
                            SimpleName: Override [29409,29417]
                        Modifier: public [29431,29437]
                        PrimitiveType: void [29438,29442]
                        SimpleName: subscribe [29443,29452]
                        SingleVariableDeclaration [29453,29476]
                            ParameterizedType [29453,29474]
                                SimpleType [29453,29463]
                                    SimpleName: Subscriber [29453,29463]
                                WildcardType [29464,29473]
                                    SimpleType [29472,29473]
                                        SimpleName: T [29472,29473]
                            SimpleName: s [29475,29476]
                        Block [29478,29884]
                            ExpressionStatement [29497,29757]
                                MethodInvocation [29497,29756]
                                    METHOD_INVOCATION_RECEIVER [29497,29498]
                                        SimpleName: s [29497,29498]
                                    SimpleName: onSubscribe [29499,29510]
                                    METHOD_INVOCATION_ARGUMENTS [29511,29755]
                                        ClassInstanceCreation [29511,29755]
                                            SimpleType [29515,29527]
                                                SimpleName: Subscription [29515,29527]
                                            AnonymousClassDeclaration [29530,29755]
                                                MethodDeclaration [29553,29636]
                                                    MarkerAnnotation [29553,29562]
                                                        SimpleName: Override [29554,29562]
                                                    Modifier: public [29584,29590]
                                                    PrimitiveType: void [29591,29595]
                                                    SimpleName: request [29596,29603]
                                                    SingleVariableDeclaration [29604,29610]
                                                        PrimitiveType: long [29604,29608]
                                                        SimpleName: n [29609,29610]
                                                    Block [29612,29636]
                                                MethodDeclaration [29660,29736]
                                                    MarkerAnnotation [29660,29669]
                                                        SimpleName: Override [29661,29669]
                                                    Modifier: public [29691,29697]
                                                    PrimitiveType: void [29698,29702]
                                                    SimpleName: cancel [29703,29709]
                                                    Block [29712,29736]
                            ExpressionStatement [29775,29869]
                                MethodInvocation [29775,29868]
                                    METHOD_INVOCATION_RECEIVER [29775,29776]
                                        SimpleName: s [29775,29776]
                                    SimpleName: onError [29777,29784]
                                    METHOD_INVOCATION_ARGUMENTS [29785,29867]
                                        ClassInstanceCreation [29785,29867]
                                            SimpleType [29789,29805]
                                                SimpleName: RuntimeException [29789,29805]
                                            InfixExpression [29806,29866]
                                                StringLiteral: "Can't subscribe subscriber: " [29806,29836]
                                                INFIX_EXPRESSION_OPERATOR: + [29837,29838]
                                                SimpleName: s [29839,29840]
                                                StringLiteral: ", because of reasons." [29843,29866]
to
TypeDeclaration [15164,16620]
at 5
===
insert-node
---
Modifier: protected [7229,7238]
to
MethodDeclaration [7229,7389]
at 0
===
insert-node
---
PrimitiveType: void [7239,7243]
to
MethodDeclaration [7229,7389]
at 1
===
insert-node
---
SimpleName: failedSubscribe [7244,7259]
to
MethodDeclaration [7229,7389]
at 2
===
insert-tree
---
SingleVariableDeclaration [7260,7283]
    ParameterizedType [7260,7281]
        SimpleType [7260,7270]
            SimpleName: Subscriber [7260,7270]
        WildcardType [7271,7280]
            SimpleType [7279,7280]
                SimpleName: T [7279,7280]
    SimpleName: s [7282,7283]
to
MethodDeclaration [7229,7389]
at 3
===
insert-tree
---
SingleVariableDeclaration [7285,7296]
    SimpleType [7285,7294]
        SimpleName: Throwable [7285,7294]
    SimpleName: t [7295,7296]
to
MethodDeclaration [7229,7389]
at 4
===
insert-node
---
Block [7298,7389]
to
MethodDeclaration [7229,7389]
at 5
===
insert-node
---
Modifier: protected [10373,10382]
to
MethodDeclaration [10373,10449]
at 0
===
insert-node
---
PrimitiveType: void [10383,10387]
to
MethodDeclaration [10373,10449]
at 1
===
insert-node
---
SimpleName: failedSubscribe [10388,10403]
to
MethodDeclaration [10373,10449]
at 2
===
insert-tree
---
SingleVariableDeclaration [10404,10418]
    SimpleType [10404,10416]
        SimpleName: Subscription [10404,10416]
    SimpleName: s [10417,10418]
to
MethodDeclaration [10373,10449]
at 3
===
insert-node
---
Block [10420,10449]
to
MethodDeclaration [10373,10449]
at 4
===
insert-node
---
ExpressionStatement [7309,7359]
to
Block [7298,7389]
at 0
===
insert-node
---
ExpressionStatement [7369,7382]
to
Block [7298,7389]
at 1
===
move-tree
---
ExpressionStatement [4809,4820]
    MethodInvocation [4809,4819]
        METHOD_INVOCATION_RECEIVER [4809,4810]
            SimpleName: s [4809,4810]
        SimpleName: cancel [4811,4817]
to
Block [10420,10449]
at 0
===
insert-node
---
MethodInvocation [7309,7358]
to
ExpressionStatement [7309,7359]
at 0
===
insert-node
---
MethodInvocation [7369,7381]
to
ExpressionStatement [7369,7382]
at 0
===
insert-tree
---
ExpressionStatement [10231,10250]
    MethodInvocation [10231,10249]
        SimpleName: failedSubscribe [10231,10246]
        METHOD_INVOCATION_ARGUMENTS [10247,10248]
            SimpleName: s [10247,10248]
to
IfStatement [4731,4928]
at 1
===
move-tree
---
METHOD_INVOCATION_RECEIVER [1937,1938]
    SimpleName: s [1937,1938]
to
MethodInvocation [7309,7358]
at 0
===
insert-node
---
SimpleName: onSubscribe [7311,7322]
to
MethodInvocation [7309,7358]
at 1
===
insert-tree
---
METHOD_INVOCATION_ARGUMENTS [7323,7357]
    MethodInvocation [7323,7357]
        SimpleName: newChannelSubscription [7323,7345]
        METHOD_INVOCATION_ARGUMENTS [7346,7356]
            SimpleName: s [7346,7347]
            SimpleName: channel [7349,7356]
to
MethodInvocation [7309,7358]
at 2
===
move-tree
---
METHOD_INVOCATION_RECEIVER [1744,1745]
    SimpleName: s [1744,1745]
to
MethodInvocation [7369,7381]
at 0
===
insert-node
---
SimpleName: onError [7371,7378]
to
MethodInvocation [7369,7381]
at 1
===
insert-tree
---
METHOD_INVOCATION_ARGUMENTS [7379,7380]
    SimpleName: t [7379,7380]
to
MethodInvocation [7369,7381]
at 2
===
insert-node
---
ThrowStatement [6993,7042]
to
IfStatement [1661,1890]
at 1
===
move-tree
---
ClassInstanceCreation [1754,1796]
    SimpleType [1758,1774]
        SimpleName: RuntimeException [1758,1774]
    StringLiteral: "already subscribed" [1775,1795]
to
ThrowStatement [6993,7042]
at 0
===
insert-node
---
SimpleName: failedSubscribe [7181,7196]
to
MethodInvocation [1937,1949]
at 0
===
insert-node
---
METHOD_INVOCATION_ARGUMENTS [7197,7201]
to
MethodInvocation [1937,1949]
at 1
===
insert-node
---
SimpleName: s [7197,7198]
to
METHOD_INVOCATION_ARGUMENTS [7197,7201]
at 0
===
move-tree
---
SimpleName: e [1947,1948]
to
METHOD_INVOCATION_ARGUMENTS [7197,7201]
at 1
===
delete-node
---
SimpleName: onError [1746,1753]
===
delete-node
---
METHOD_INVOCATION_ARGUMENTS [1754,1796]
===
delete-node
---
MethodInvocation [1744,1797]
===
delete-node
---
ExpressionStatement [1744,1798]
===
delete-node
---
SimpleName: onError [1939,1946]
===
delete-node
---
METHOD_INVOCATION_ARGUMENTS [1947,1948]
