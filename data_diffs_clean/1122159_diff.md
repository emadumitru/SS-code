===
move-tree
---
ImportDeclaration [75862,75897]
    QualifiedName: java.util.concurrent.Future [75869,75896]
to
CompilationUnit [0,184386]
at 93
===
move-tree
---
ImportDeclaration [165510,165535]
    QualifiedName: java.util.HashMap [165517,165534]
to
CompilationUnit [0,184386]
at 193
===
move-tree
---
ImportDeclaration [165537,165558]
    QualifiedName: java.util.Map [165544,165557]
to
CompilationUnit [0,184386]
at 193
===
move-tree
---
ImportDeclaration [165560,165603]
    QualifiedName: java.util.concurrent.CountDownLatch [165567,165602]
to
CompilationUnit [0,184386]
at 193
===
move-tree
---
ImportDeclaration [165605,165640]
    QualifiedName: java.util.concurrent.Future [165612,165639]
to
CompilationUnit [0,184386]
at 193
===
insert-node
---
TypeDeclaration [991,1255]
to
CompilationUnit [0,184386]
at 244
===
insert-node
---
Modifier: public [991,997]
to
TypeDeclaration [991,1255]
at 0
===
insert-node
---
TYPE_DECLARATION_KIND: interface [998,1007]
to
TypeDeclaration [991,1255]
at 1
===
insert-node
---
SimpleName: Locking [1008,1015]
to
TypeDeclaration [991,1255]
at 2
===
insert-node
---
MethodDeclaration [1024,1076]
to
TypeDeclaration [991,1255]
at 3
===
insert-node
---
MethodDeclaration [1082,1134]
to
TypeDeclaration [991,1255]
at 4
===
insert-node
---
MethodDeclaration [1142,1194]
to
TypeDeclaration [991,1255]
at 5
===
insert-node
---
MethodDeclaration [1200,1252]
to
TypeDeclaration [991,1255]
at 6
===
insert-node
---
Modifier: public [3977,3983]
to
TypeDeclaration [3993,19393]
at 0
===
insert-node
---
TYPE_DECLARATION_KIND: class [3984,3989]
to
TypeDeclaration [3993,19393]
at 1
===
insert-node
---
SimpleName: LockingStatementOperations [3990,4016]
to
TypeDeclaration [3993,19393]
at 2
===
insert-node
---
Modifier: public [23366,23372]
to
TypeDeclaration [23390,56536]
at 0
===
insert-node
---
TYPE_DECLARATION_KIND: class [23373,23378]
to
TypeDeclaration [23390,56536]
at 1
===
insert-node
---
SimpleName: OperationsFacade [23379,23395]
to
TypeDeclaration [23390,56536]
at 2
===
insert-node
---
MethodDeclaration [64238,64384]
to
TypeDeclaration [64289,65519]
at 6
===
insert-node
---
MethodDeclaration [64535,64667]
to
TypeDeclaration [64289,65519]
at 9
===
insert-node
---
Modifier: public [88247,88253]
to
TypeDeclaration [92127,106305]
at 1
===
insert-node
---
TYPE_DECLARATION_KIND: class [88254,88259]
to
TypeDeclaration [92127,106305]
at 2
===
insert-node
---
SimpleName: MasterImpl [88260,88270]
to
TypeDeclaration [92127,106305]
at 3
===
insert-node
---
TYPE_DECLARATION_KIND: class [107684,107689]
to
TypeDeclaration [111130,122383]
at 1
===
insert-node
---
SimpleName: SlaveLocksClient [107690,107706]
to
TypeDeclaration [111130,122383]
at 2
===
insert-node
---
MethodDeclaration [109400,110314]
to
TypeDeclaration [111130,122383]
at 17
===
insert-node
---
MethodDeclaration [110322,111264]
to
TypeDeclaration [111130,122383]
at 18
===
insert-node
---
MethodDeclaration [111452,111621]
to
TypeDeclaration [111130,122383]
at 24
===
insert-node
---
Modifier: public [119245,119251]
to
TypeDeclaration [124013,155317]
at 1
===
insert-node
---
TYPE_DECLARATION_KIND: class [119252,119257]
to
TypeDeclaration [124013,155317]
at 2
===
insert-node
---
SimpleName: ForsetiClient [119258,119271]
to
TypeDeclaration [124013,155317]
at 3
===
insert-node
---
Modifier: public [155344,155350]
to
TypeDeclaration [167203,175710]
at 0
===
insert-node
---
TYPE_DECLARATION_KIND: class [155351,155356]
to
TypeDeclaration [167203,175710]
at 1
===
insert-node
---
SimpleName: MasterImplTest [155357,155371]
to
TypeDeclaration [167203,175710]
at 2
===
insert-node
---
PrimitiveType: void [1024,1028]
to
MethodDeclaration [1024,1076]
at 0
===
insert-node
---
SimpleName: acquireExclusive [1029,1045]
to
MethodDeclaration [1024,1076]
at 1
===
move-tree
---
SingleVariableDeclaration [1047,1064]
    SimpleType [1047,1059]
        SimpleName: ResourceType [1047,1059]
    SimpleName: type [1060,1064]
to
MethodDeclaration [1024,1076]
at 2
===
insert-tree
---
SingleVariableDeclaration [1066,1073]
    PrimitiveType: long [1066,1070]
    SimpleName: id [1071,1073]
to
MethodDeclaration [1024,1076]
at 3
===
insert-node
---
PrimitiveType: void [1082,1086]
to
MethodDeclaration [1082,1134]
at 0
===
insert-node
---
SimpleName: acquireShared [1087,1100]
to
MethodDeclaration [1082,1134]
at 1
===
move-tree
---
SingleVariableDeclaration [1109,1126]
    SimpleType [1109,1121]
        SimpleName: ResourceType [1109,1121]
    SimpleName: type [1122,1126]
to
MethodDeclaration [1082,1134]
at 2
===
insert-tree
---
SingleVariableDeclaration [1124,1131]
    PrimitiveType: long [1124,1128]
    SimpleName: id [1129,1131]
to
MethodDeclaration [1082,1134]
at 3
===
insert-node
---
PrimitiveType: void [1142,1146]
to
MethodDeclaration [1142,1194]
at 0
===
insert-node
---
SimpleName: releaseExclusive [1147,1163]
to
MethodDeclaration [1142,1194]
at 1
===
move-tree
---
SingleVariableDeclaration [1173,1190]
    SimpleType [1173,1185]
        SimpleName: ResourceType [1173,1185]
    SimpleName: type [1186,1190]
to
MethodDeclaration [1142,1194]
at 2
===
insert-tree
---
SingleVariableDeclaration [1184,1191]
    PrimitiveType: long [1184,1188]
    SimpleName: id [1189,1191]
to
MethodDeclaration [1142,1194]
at 3
===
insert-node
---
PrimitiveType: void [1200,1204]
to
MethodDeclaration [1200,1252]
at 0
===
insert-node
---
SimpleName: releaseShared [1205,1218]
to
MethodDeclaration [1200,1252]
at 1
===
move-tree
---
SingleVariableDeclaration [1235,1252]
    SimpleType [1235,1247]
        SimpleName: ResourceType [1235,1247]
    SimpleName: type [1248,1252]
to
MethodDeclaration [1200,1252]
at 2
===
insert-tree
---
SingleVariableDeclaration [1242,1249]
    PrimitiveType: long [1242,1246]
    SimpleName: id [1247,1249]
to
MethodDeclaration [1200,1252]
at 3
===
move-tree
---
SingleVariableDeclaration [46787,46797]
    VARARGS_TYPE [46787,46794]
        PrimitiveType: long [46787,46791]
    SimpleName: id [46795,46797]
to
MethodDeclaration [46717,46906]
at 5
===
move-tree
---
SingleVariableDeclaration [46981,46991]
    VARARGS_TYPE [46981,46988]
        PrimitiveType: long [46981,46985]
    SimpleName: id [46989,46991]
to
MethodDeclaration [46914,47097]
at 5
===
move-tree
---
SingleVariableDeclaration [47175,47185]
    VARARGS_TYPE [47175,47182]
        PrimitiveType: long [47175,47179]
    SimpleName: id [47183,47185]
to
MethodDeclaration [47105,47294]
at 5
===
move-tree
---
SingleVariableDeclaration [47369,47379]
    VARARGS_TYPE [47369,47376]
        PrimitiveType: long [47369,47373]
    SimpleName: id [47377,47379]
to
MethodDeclaration [47302,47485]
at 5
===
update-node
---
SimpleName: acquireExclusive [64525,64541]
replace acquireExclusive by acquireShared
===
move-tree
---
SingleVariableDeclaration [64576,64595]
    VARARGS_TYPE [64576,64583]
        PrimitiveType: long [64576,64580]
    SimpleName: resourceIds [64584,64595]
to
MethodDeclaration [64498,64646]
at 5
===
move-tree
---
MarkerAnnotation [64654,64663]
    SimpleName: Override [64655,64663]
to
MethodDeclaration [64238,64384]
at 0
===
insert-node
---
Modifier: public [64253,64259]
to
MethodDeclaration [64238,64384]
at 1
===
insert-node
---
PrimitiveType: void [64260,64264]
to
MethodDeclaration [64238,64384]
at 2
===
insert-node
---
SimpleName: acquireExclusive [64265,64281]
to
MethodDeclaration [64238,64384]
at 3
===
move-tree
---
SingleVariableDeclaration [64702,64733]
    SimpleType [64702,64720]
        QualifiedName: Locks.ResourceType [64702,64720]
    SimpleName: resourceType [64721,64733]
to
MethodDeclaration [64238,64384]
at 4
===
insert-tree
---
SingleVariableDeclaration [64316,64331]
    PrimitiveType: long [64316,64320]
    SimpleName: resourceId [64321,64331]
to
MethodDeclaration [64238,64384]
at 5
===
move-tree
---
SimpleType [113500,113527]
    SimpleName: AcquireLockTimeoutException [113500,113527]
to
MethodDeclaration [64238,64384]
at 6
===
insert-node
---
Block [64374,64384]
to
MethodDeclaration [64238,64384]
at 7
===
update-node
---
SimpleName: trySharedLock [64831,64844]
replace trySharedLock by tryExclusiveLock
===
move-tree
---
SingleVariableDeclaration [64879,64898]
    VARARGS_TYPE [64879,64886]
        PrimitiveType: long [64879,64883]
    SimpleName: resourceIds [64887,64898]
to
MethodDeclaration [64801,64937]
at 5
===
move-tree
---
MarkerAnnotation [64945,64954]
    SimpleName: Override [64946,64954]
to
MethodDeclaration [64535,64667]
at 0
===
insert-node
---
Modifier: public [64550,64556]
to
MethodDeclaration [64535,64667]
at 1
===
insert-node
---
PrimitiveType: boolean [64557,64564]
to
MethodDeclaration [64535,64667]
at 2
===
insert-node
---
SimpleName: trySharedLock [64565,64578]
to
MethodDeclaration [64535,64667]
at 3
===
move-tree
---
SingleVariableDeclaration [64987,65018]
    SimpleType [64987,65005]
        QualifiedName: Locks.ResourceType [64987,65005]
    SimpleName: resourceType [65006,65018]
to
MethodDeclaration [64535,64667]
at 4
===
insert-tree
---
SingleVariableDeclaration [64613,64628]
    PrimitiveType: long [64613,64617]
    SimpleName: resourceId [64618,64628]
to
MethodDeclaration [64535,64667]
at 5
===
move-tree
---
Block [64762,64793]
    ReturnStatement [64773,64786]
        BooleanLiteral: false [64780,64785]
to
MethodDeclaration [64535,64667]
at 6
===
move-tree
---
MarkerAnnotation [71917,71926]
    SimpleName: Override [71918,71926]
to
MethodDeclaration [64945,65055]
at 0
===
move-tree
---
SingleVariableDeclaration [65108,65139]
    SimpleType [65108,65126]
        QualifiedName: Locks.ResourceType [65108,65126]
    SimpleName: resourceType [65127,65139]
to
MethodDeclaration [64945,65055]
at 4
===
move-tree
---
SingleVariableDeclaration [65020,65039]
    VARARGS_TYPE [65020,65027]
        PrimitiveType: long [65020,65024]
    SimpleName: resourceIds [65028,65039]
to
MethodDeclaration [64945,65055]
at 5
===
move-tree
---
MarkerAnnotation [118048,118057]
    SimpleName: Override [118049,118057]
to
MethodDeclaration [65063,65176]
at 0
===
move-tree
---
SingleVariableDeclaration [64387,64418]
    SimpleType [64387,64405]
        QualifiedName: Locks.ResourceType [64387,64405]
    SimpleName: resourceType [64406,64418]
to
MethodDeclaration [65063,65176]
at 5
===
move-tree
---
SingleVariableDeclaration [65141,65160]
    VARARGS_TYPE [65141,65148]
        PrimitiveType: long [65141,65145]
    SimpleName: resourceIds [65149,65160]
to
MethodDeclaration [65063,65176]
at 6
===
move-tree
---
SingleVariableDeclaration [67637,67652]
    PrimitiveType: long [67637,67641]
    SimpleName: resourceId [67642,67652]
to
MethodDeclaration [67430,68089]
at 5
===
move-tree
---
SingleVariableDeclaration [68310,68325]
    PrimitiveType: long [68310,68314]
    SimpleName: resourceId [68315,68325]
to
MethodDeclaration [68097,68763]
at 5
===
move-tree
---
SingleVariableDeclaration [68987,69002]
    PrimitiveType: long [68987,68991]
    SimpleName: resourceId [68992,69002]
to
MethodDeclaration [68771,69578]
at 5
===
move-tree
---
Block [69028,69549]
    VariableDeclarationStatement [69043,69096]
        SimpleType [69043,69055]
            SimpleName: LockResource [69043,69055]
        VariableDeclarationFragment [69056,69095]
            SimpleName: resource [69056,69064]
            MethodInvocation [69067,69095]
                METHOD_INVOCATION_RECEIVER [69067,69077]
                    SimpleName: localLocks [69067,69077]
                SimpleName: get [69078,69081]
                METHOD_INVOCATION_ARGUMENTS [69083,69093]
                    SimpleName: resourceId [69083,69093]
    IfStatement [69110,69235]
        InfixExpression [69114,69130]
            SimpleName: resource [69114,69122]
            INFIX_EXPRESSION_OPERATOR: != [69123,69125]
            NullLiteral [69126,69130]
        Block [69146,69235]
            ExpressionStatement [69165,69193]
                MethodInvocation [69165,69192]
                    METHOD_INVOCATION_RECEIVER [69165,69173]
                        SimpleName: resource [69165,69173]
                    SimpleName: acquireReference [69174,69190]
            ContinueStatement [69211,69220]
    ExpressionStatement [69251,69307]
        Assignment [69251,69306]
            SimpleName: resource [69251,69259]
            ASSIGNMENT_OPERATOR: = [69260,69261]
            ClassInstanceCreation [69262,69306]
                SimpleType [69266,69278]
                    SimpleName: LockResource [69266,69278]
                SimpleName: resourceType [69280,69292]
                SimpleName: resourceId [69294,69304]
    IfStatement [69321,69538]
        MethodInvocation [69324,69373]
            METHOD_INVOCATION_RECEIVER [69324,69331]
                SimpleName: manager [69324,69331]
            SimpleName: tryWriteLock [69332,69344]
            METHOD_INVOCATION_ARGUMENTS [69346,69371]
                SimpleName: resource [69346,69354]
                SimpleName: lockTransaction [69356,69371]
        Block [69388,69459]
            ExpressionStatement [69407,69444]
                MethodInvocation [69407,69443]
                    METHOD_INVOCATION_RECEIVER [69407,69417]
                        SimpleName: localLocks [69407,69417]
                    SimpleName: put [69418,69421]
                    METHOD_INVOCATION_ARGUMENTS [69422,69442]
                        SimpleName: resourceId [69422,69432]
                        SimpleName: resource [69434,69442]
        Block [69491,69538]
            ReturnStatement [69510,69523]
                BooleanLiteral: false [69517,69522]
to
MethodDeclaration [68771,69578]
at 6
===
move-tree
---
SingleVariableDeclaration [69796,69811]
    PrimitiveType: long [69796,69800]
    SimpleName: resourceId [69801,69811]
to
MethodDeclaration [69586,70386]
at 5
===
move-tree
---
Block [69837,70357]
    VariableDeclarationStatement [69852,69905]
        SimpleType [69852,69864]
            SimpleName: LockResource [69852,69864]
        VariableDeclarationFragment [69865,69904]
            SimpleName: resource [69865,69873]
            MethodInvocation [69876,69904]
                METHOD_INVOCATION_RECEIVER [69876,69886]
                    SimpleName: localLocks [69876,69886]
                SimpleName: get [69887,69890]
                METHOD_INVOCATION_ARGUMENTS [69892,69902]
                    SimpleName: resourceId [69892,69902]
    IfStatement [69919,70044]
        InfixExpression [69923,69939]
            SimpleName: resource [69923,69931]
            INFIX_EXPRESSION_OPERATOR: != [69932,69934]
            NullLiteral [69935,69939]
        Block [69955,70044]
            ExpressionStatement [69974,70002]
                MethodInvocation [69974,70001]
                    METHOD_INVOCATION_RECEIVER [69974,69982]
                        SimpleName: resource [69974,69982]
                    SimpleName: acquireReference [69983,69999]
            ContinueStatement [70020,70029]
    ExpressionStatement [70060,70116]
        Assignment [70060,70115]
            SimpleName: resource [70060,70068]
            ASSIGNMENT_OPERATOR: = [70069,70070]
            ClassInstanceCreation [70071,70115]
                SimpleType [70075,70087]
                    SimpleName: LockResource [70075,70087]
                SimpleName: resourceType [70089,70101]
                SimpleName: resourceId [70103,70113]
    IfStatement [70130,70346]
        MethodInvocation [70133,70181]
            METHOD_INVOCATION_RECEIVER [70133,70140]
                SimpleName: manager [70133,70140]
            SimpleName: tryReadLock [70141,70152]
            METHOD_INVOCATION_ARGUMENTS [70154,70179]
                SimpleName: resource [70154,70162]
                SimpleName: lockTransaction [70164,70179]
        Block [70196,70267]
            ExpressionStatement [70215,70252]
                MethodInvocation [70215,70251]
                    METHOD_INVOCATION_RECEIVER [70215,70225]
                        SimpleName: localLocks [70215,70225]
                    SimpleName: put [70226,70229]
                    METHOD_INVOCATION_ARGUMENTS [70230,70250]
                        SimpleName: resourceId [70230,70240]
                        SimpleName: resource [70242,70250]
        Block [70299,70346]
            ReturnStatement [70318,70331]
                BooleanLiteral: false [70325,70330]
to
MethodDeclaration [69586,70386]
at 6
===
move-tree
---
SingleVariableDeclaration [70601,70616]
    PrimitiveType: long [70601,70605]
    SimpleName: resourceId [70606,70616]
to
MethodDeclaration [70394,70987]
at 5
===
move-tree
---
Block [70642,70980]
    VariableDeclarationStatement [70657,70710]
        SimpleType [70657,70669]
            SimpleName: LockResource [70657,70669]
        VariableDeclarationFragment [70670,70709]
            SimpleName: resource [70670,70678]
            MethodInvocation [70681,70709]
                METHOD_INVOCATION_RECEIVER [70681,70691]
                    SimpleName: localLocks [70681,70691]
                SimpleName: get [70692,70695]
                METHOD_INVOCATION_ARGUMENTS [70697,70707]
                    SimpleName: resourceId [70697,70707]
    IfStatement [70724,70818]
        InfixExpression [70728,70760]
            MethodInvocation [70728,70755]
                METHOD_INVOCATION_RECEIVER [70728,70736]
                    SimpleName: resource [70728,70736]
                SimpleName: releaseReference [70737,70753]
            INFIX_EXPRESSION_OPERATOR: != [70756,70758]
            NumberLiteral: 0 [70759,70760]
        Block [70775,70818]
            ContinueStatement [70794,70803]
    ExpressionStatement [70832,70864]
        MethodInvocation [70832,70863]
            METHOD_INVOCATION_RECEIVER [70832,70842]
                SimpleName: localLocks [70832,70842]
            SimpleName: remove [70843,70849]
            METHOD_INVOCATION_ARGUMENTS [70851,70861]
                SimpleName: resourceId [70851,70861]
    ExpressionStatement [70880,70969]
        MethodInvocation [70880,70968]
            METHOD_INVOCATION_RECEIVER [70880,70887]
                SimpleName: manager [70880,70887]
            SimpleName: releaseReadLock [70888,70903]
            METHOD_INVOCATION_ARGUMENTS [70905,70966]
                ClassInstanceCreation [70905,70949]
                    SimpleType [70909,70921]
                        SimpleName: LockResource [70909,70921]
                    SimpleName: resourceType [70923,70935]
                    SimpleName: resourceId [70937,70947]
                SimpleName: lockTransaction [70951,70966]
to
MethodDeclaration [70394,70987]
at 6
===
move-tree
---
SingleVariableDeclaration [71208,71223]
    PrimitiveType: long [71208,71212]
    SimpleName: resourceId [71213,71223]
to
MethodDeclaration [70995,71595]
at 5
===
move-tree
---
Block [71249,71588]
    VariableDeclarationStatement [71264,71317]
        SimpleType [71264,71276]
            SimpleName: LockResource [71264,71276]
        VariableDeclarationFragment [71277,71316]
            SimpleName: resource [71277,71285]
            MethodInvocation [71288,71316]
                METHOD_INVOCATION_RECEIVER [71288,71298]
                    SimpleName: localLocks [71288,71298]
                SimpleName: get [71299,71302]
                METHOD_INVOCATION_ARGUMENTS [71304,71314]
                    SimpleName: resourceId [71304,71314]
    IfStatement [71331,71425]
        InfixExpression [71335,71367]
            MethodInvocation [71335,71362]
                METHOD_INVOCATION_RECEIVER [71335,71343]
                    SimpleName: resource [71335,71343]
                SimpleName: releaseReference [71344,71360]
            INFIX_EXPRESSION_OPERATOR: != [71363,71365]
            NumberLiteral: 0 [71366,71367]
        Block [71382,71425]
            ContinueStatement [71401,71410]
    ExpressionStatement [71439,71471]
        MethodInvocation [71439,71470]
            METHOD_INVOCATION_RECEIVER [71439,71449]
                SimpleName: localLocks [71439,71449]
            SimpleName: remove [71450,71456]
            METHOD_INVOCATION_ARGUMENTS [71458,71468]
                SimpleName: resourceId [71458,71468]
    ExpressionStatement [71487,71577]
        MethodInvocation [71487,71576]
            METHOD_INVOCATION_RECEIVER [71487,71494]
                SimpleName: manager [71487,71494]
            SimpleName: releaseWriteLock [71495,71511]
            METHOD_INVOCATION_ARGUMENTS [71513,71574]
                ClassInstanceCreation [71513,71557]
                    SimpleType [71517,71529]
                        SimpleName: LockResource [71517,71529]
                    SimpleName: resourceType [71531,71543]
                    SimpleName: resourceId [71545,71555]
                SimpleName: lockTransaction [71559,71574]
to
MethodDeclaration [70995,71595]
at 6
===
move-tree
---
MarkerAnnotation [71755,71764]
    SimpleName: Override [71756,71764]
to
MethodDeclaration [71603,71747]
at 0
===
update-node
---
SimpleName: releaseAllShared [71630,71646]
replace releaseAllShared by releaseAll
===
move-tree
---
MarkerAnnotation [114280,114289]
    SimpleName: Override [114281,114289]
to
MethodDeclaration [109400,110314]
at 0
===
insert-node
---
Modifier: public [109415,109421]
to
MethodDeclaration [109400,110314]
at 1
===
insert-node
---
PrimitiveType: void [109422,109426]
to
MethodDeclaration [109400,110314]
at 2
===
insert-node
---
SimpleName: acquireShared [109427,109440]
to
MethodDeclaration [109400,110314]
at 3
===
move-tree
---
SingleVariableDeclaration [114325,114356]
    SimpleType [114325,114343]
        QualifiedName: Locks.ResourceType [114325,114343]
    SimpleName: resourceType [114344,114356]
to
MethodDeclaration [109400,110314]
at 4
===
insert-tree
---
SingleVariableDeclaration [109475,109490]
    PrimitiveType: long [109475,109479]
    SimpleName: resourceId [109480,109490]
to
MethodDeclaration [109400,110314]
at 5
===
move-tree
---
SimpleType [114400,114427]
    SimpleName: AcquireLockTimeoutException [114400,114427]
to
MethodDeclaration [109400,110314]
at 6
===
insert-node
---
Block [109533,110314]
to
MethodDeclaration [109400,110314]
at 7
===
move-tree
---
MarkerAnnotation [116005,116014]
    SimpleName: Override [116006,116014]
to
MethodDeclaration [110322,111264]
at 0
===
insert-node
---
Modifier: public [110337,110343]
to
MethodDeclaration [110322,111264]
at 1
===
insert-node
---
PrimitiveType: void [110344,110348]
to
MethodDeclaration [110322,111264]
at 2
===
insert-node
---
SimpleName: acquireExclusive [110349,110365]
to
MethodDeclaration [110322,111264]
at 3
===
move-tree
---
SingleVariableDeclaration [113438,113469]
    SimpleType [113438,113456]
        QualifiedName: Locks.ResourceType [113438,113456]
    SimpleName: resourceType [113457,113469]
to
MethodDeclaration [110322,111264]
at 4
===
insert-tree
---
SingleVariableDeclaration [110400,110415]
    PrimitiveType: long [110400,110404]
    SimpleName: resourceId [110405,110415]
to
MethodDeclaration [110322,111264]
at 5
===
move-tree
---
SimpleType [64449,64476]
    SimpleName: AcquireLockTimeoutException [64449,64476]
to
MethodDeclaration [110322,111264]
at 6
===
insert-node
---
Block [110471,111264]
to
MethodDeclaration [110322,111264]
at 7
===
update-node
---
SimpleName: trySharedLock [116219,116232]
replace trySharedLock by tryExclusiveLock
===
move-tree
---
SingleVariableDeclaration [116267,116286]
    VARARGS_TYPE [116267,116274]
        PrimitiveType: long [116267,116271]
    SimpleName: resourceIds [116275,116286]
to
MethodDeclaration [116189,116362]
at 5
===
move-tree
---
MarkerAnnotation [65063,65072]
    SimpleName: Override [65064,65072]
to
MethodDeclaration [111452,111621]
at 0
===
insert-node
---
Modifier: public [111467,111473]
to
MethodDeclaration [111452,111621]
at 1
===
insert-node
---
PrimitiveType: boolean [111474,111481]
to
MethodDeclaration [111452,111621]
at 2
===
insert-node
---
SimpleName: trySharedLock [111482,111495]
to
MethodDeclaration [111452,111621]
at 3
===
move-tree
---
SingleVariableDeclaration [116053,116084]
    SimpleType [116053,116071]
        QualifiedName: Locks.ResourceType [116053,116071]
    SimpleName: resourceType [116072,116084]
to
MethodDeclaration [111452,111621]
at 4
===
insert-tree
---
SingleVariableDeclaration [111530,111545]
    PrimitiveType: long [111530,111534]
    SimpleName: resourceId [111535,111545]
to
MethodDeclaration [111452,111621]
at 5
===
move-tree
---
Block [116113,116181]
    ThrowStatement [116124,116174]
        MethodInvocation [116130,116173]
            SimpleName: newUnsupportedDirectTryLockUsageException [116130,116171]
to
MethodDeclaration [111452,111621]
at 6
===
move-tree
---
SingleVariableDeclaration [116574,116589]
    PrimitiveType: long [116574,116578]
    SimpleName: resourceId [116579,116589]
to
MethodDeclaration [116370,117130]
at 5
===
move-tree
---
Block [116615,117123]
    VariableDeclarationStatement [116630,116680]
        SimpleType [116630,116643]
            SimpleName: AtomicInteger [116630,116643]
        VariableDeclarationFragment [116644,116679]
            SimpleName: counter [116644,116651]
            MethodInvocation [116654,116679]
                METHOD_INVOCATION_RECEIVER [116654,116661]
                    SimpleName: lockMap [116654,116661]
                SimpleName: get [116662,116665]
                METHOD_INVOCATION_ARGUMENTS [116667,116677]
                    SimpleName: resourceId [116667,116677]
    IfStatement [116694,116920]
        InfixExpression [116697,116712]
            SimpleName: counter [116697,116704]
            INFIX_EXPRESSION_OPERATOR: == [116705,116707]
            NullLiteral [116708,116712]
        Block [116727,116920]
            ThrowStatement [116746,116905]
                ClassInstanceCreation [116752,116904]
                    SimpleType [116756,116777]
                        SimpleName: IllegalStateException [116756,116777]
                    InfixExpression [116779,116902]
                        ThisExpression [116779,116783]
                        INFIX_EXPRESSION_OPERATOR: + [116784,116785]
                        StringLiteral: " cannot release lock it does not hold: EXCLUSIVE " [116786,116837]
                        SimpleName: resourceType [116865,116877]
                        StringLiteral: "[" [116880,116883]
                        SimpleName: resourceId [116886,116896]
                        StringLiteral: "]" [116899,116902]
    IfStatement [116934,117112]
        InfixExpression [116937,116967]
            MethodInvocation [116937,116962]
                METHOD_INVOCATION_RECEIVER [116937,116944]
                    SimpleName: counter [116937,116944]
                SimpleName: decrementAndGet [116945,116960]
            INFIX_EXPRESSION_OPERATOR: == [116963,116965]
            NumberLiteral: 0 [116966,116967]
        Block [116982,117112]
            ExpressionStatement [117001,117030]
                MethodInvocation [117001,117029]
                    METHOD_INVOCATION_RECEIVER [117001,117008]
                        SimpleName: lockMap [117001,117008]
                    SimpleName: remove [117009,117015]
                    METHOD_INVOCATION_ARGUMENTS [117017,117027]
                        SimpleName: resourceId [117017,117027]
            ExpressionStatement [117048,117097]
                MethodInvocation [117048,117096]
                    METHOD_INVOCATION_RECEIVER [117048,117054]
                        SimpleName: client [117048,117054]
                    SimpleName: releaseShared [117055,117068]
                    METHOD_INVOCATION_ARGUMENTS [117070,117094]
                        SimpleName: resourceType [117070,117082]
                        SimpleName: resourceId [117084,117094]
to
MethodDeclaration [116370,117130]
at 6
===
move-tree
---
SingleVariableDeclaration [117348,117363]
    PrimitiveType: long [117348,117352]
    SimpleName: resourceId [117353,117363]
to
MethodDeclaration [117138,117907]
at 5
===
move-tree
---
Block [117389,117900]
    VariableDeclarationStatement [117404,117454]
        SimpleType [117404,117417]
            SimpleName: AtomicInteger [117404,117417]
        VariableDeclarationFragment [117418,117453]
            SimpleName: counter [117418,117425]
            MethodInvocation [117428,117453]
                METHOD_INVOCATION_RECEIVER [117428,117435]
                    SimpleName: lockMap [117428,117435]
                SimpleName: get [117436,117439]
                METHOD_INVOCATION_ARGUMENTS [117441,117451]
                    SimpleName: resourceId [117441,117451]
    IfStatement [117468,117694]
        InfixExpression [117471,117486]
            SimpleName: counter [117471,117478]
            INFIX_EXPRESSION_OPERATOR: == [117479,117481]
            NullLiteral [117482,117486]
        Block [117501,117694]
            ThrowStatement [117520,117679]
                ClassInstanceCreation [117526,117678]
                    SimpleType [117530,117551]
                        SimpleName: IllegalStateException [117530,117551]
                    InfixExpression [117553,117676]
                        ThisExpression [117553,117557]
                        INFIX_EXPRESSION_OPERATOR: + [117558,117559]
                        StringLiteral: " cannot release lock it does not hold: EXCLUSIVE " [117560,117611]
                        SimpleName: resourceType [117639,117651]
                        StringLiteral: "[" [117654,117657]
                        SimpleName: resourceId [117660,117670]
                        StringLiteral: "]" [117673,117676]
    IfStatement [117708,117889]
        InfixExpression [117711,117741]
            MethodInvocation [117711,117736]
                METHOD_INVOCATION_RECEIVER [117711,117718]
                    SimpleName: counter [117711,117718]
                SimpleName: decrementAndGet [117719,117734]
            INFIX_EXPRESSION_OPERATOR: == [117737,117739]
            NumberLiteral: 0 [117740,117741]
        Block [117756,117889]
            ExpressionStatement [117775,117804]
                MethodInvocation [117775,117803]
                    METHOD_INVOCATION_RECEIVER [117775,117782]
                        SimpleName: lockMap [117775,117782]
                    SimpleName: remove [117783,117789]
                    METHOD_INVOCATION_ARGUMENTS [117791,117801]
                        SimpleName: resourceId [117791,117801]
            ExpressionStatement [117822,117874]
                MethodInvocation [117822,117873]
                    METHOD_INVOCATION_RECEIVER [117822,117828]
                        SimpleName: client [117822,117828]
                    SimpleName: releaseExclusive [117829,117845]
                    METHOD_INVOCATION_ARGUMENTS [117847,117871]
                        SimpleName: resourceType [117847,117859]
                        SimpleName: resourceId [117861,117871]
to
MethodDeclaration [117138,117907]
at 6
===
move-tree
---
SingleVariableDeclaration [119230,119249]
    VARARGS_TYPE [119230,119238]
        PrimitiveType: long [119230,119234]
    SimpleName: resourceId [119239,119249]
to
MethodDeclaration [119160,119907]
at 4
===
move-tree
---
SingleVariableDeclaration [119990,120008]
    VARARGS_TYPE [119990,119997]
        PrimitiveType: long [119990,119994]
    SimpleName: resourceId [119998,120008]
to
MethodDeclaration [119915,120332]
at 4
===
move-tree
---
SingleVariableDeclaration [127277,127292]
    PrimitiveType: long [127277,127281]
    SimpleName: resourceId [127282,127292]
to
MethodDeclaration [126746,130561]
at 5
===
move-tree
---
Block [127318,130554]
    VariableDeclarationStatement [127403,127452]
        PrimitiveType: int [127403,127406]
        VariableDeclarationFragment [127407,127451]
            SimpleName: heldCount [127407,127416]
            MethodInvocation [127419,127451]
                METHOD_INVOCATION_RECEIVER [127419,127433]
                    SimpleName: heldShareLocks [127419,127433]
                SimpleName: get [127434,127437]
                METHOD_INVOCATION_ARGUMENTS [127439,127449]
                    SimpleName: resourceId [127439,127449]
    IfStatement [127466,127704]
        InfixExpression [127469,127484]
            SimpleName: heldCount [127469,127478]
            INFIX_EXPRESSION_OPERATOR: != [127479,127481]
            PrefixExpression [127482,127484]
                PREFIX_EXPRESSION_OPERATOR: - [127482,127483]
                NumberLiteral: 1 [127483,127484]
        Block [127499,127704]
            ExpressionStatement [127614,127662]
                MethodInvocation [127614,127661]
                    METHOD_INVOCATION_RECEIVER [127614,127628]
                        SimpleName: heldShareLocks [127614,127628]
                    SimpleName: put [127629,127632]
                    METHOD_INVOCATION_ARGUMENTS [127634,127659]
                        SimpleName: resourceId [127634,127644]
                        InfixExpression [127646,127659]
                            SimpleName: heldCount [127646,127655]
                            INFIX_EXPRESSION_OPERATOR: + [127656,127657]
                            NumberLiteral: 1 [127658,127659]
            ContinueStatement [127680,127689]
    IfStatement [127785,128189]
        MethodInvocation [127789,127833]
            METHOD_INVOCATION_RECEIVER [127789,127807]
                SimpleName: heldExclusiveLocks [127789,127807]
            SimpleName: containsKey [127808,127819]
            METHOD_INVOCATION_ARGUMENTS [127821,127831]
                SimpleName: resourceId [127821,127831]
        Block [127849,128189]
            ExpressionStatement [128111,128147]
                MethodInvocation [128111,128146]
                    METHOD_INVOCATION_RECEIVER [128111,128125]
                        SimpleName: heldShareLocks [128111,128125]
                    SimpleName: put [128126,128129]
                    METHOD_INVOCATION_ARGUMENTS [128131,128144]
                        SimpleName: resourceId [128131,128141]
                        NumberLiteral: 1 [128143,128144]
            ContinueStatement [128165,128174]
    VariableDeclarationStatement [128291,128305]
        PrimitiveType: int [128291,128294]
        VariableDeclarationFragment [128295,128304]
            SimpleName: tries [128295,128300]
            NumberLiteral: 0 [128303,128304]
    VariableDeclarationStatement [128319,128350]
        SimpleType [128319,128329]
            SimpleName: SharedLock [128319,128329]
        VariableDeclarationFragment [128330,128349]
            SimpleName: mySharedLock [128330,128342]
            NullLiteral [128345,128349]
    WhileStatement [128393,130323]
        BooleanLiteral: true [128399,128403]
        Block [128418,130323]
            VariableDeclarationStatement [128509,128574]
                SimpleType [128509,128532]
                    QualifiedName: ForsetiLockManager.Lock [128509,128532]
                VariableDeclarationFragment [128533,128573]
                    SimpleName: existingLock [128533,128545]
                    MethodInvocation [128548,128573]
                        METHOD_INVOCATION_RECEIVER [128548,128555]
                            SimpleName: lockMap [128548,128555]
                        SimpleName: get [128556,128559]
                        METHOD_INVOCATION_ARGUMENTS [128561,128571]
                            SimpleName: resourceId [128561,128571]
            IfStatement [128622,130001]
                InfixExpression [128625,128645]
                    SimpleName: existingLock [128625,128637]
                    INFIX_EXPRESSION_OPERATOR: == [128638,128640]
                    NullLiteral [128641,128645]
                Block [128664,129230]
                    IfStatement [128743,128877]
                        InfixExpression [128746,128766]
                            SimpleName: mySharedLock [128746,128758]
                            INFIX_EXPRESSION_OPERATOR: == [128759,128761]
                            NullLiteral [128762,128766]
                        Block [128789,128877]
                            ExpressionStatement [128816,128854]
                                Assignment [128816,128853]
                                    SimpleName: mySharedLock [128816,128828]
                                    ASSIGNMENT_OPERATOR: = [128829,128830]
                                    ClassInstanceCreation [128831,128853]
                                        SimpleType [128835,128845]
                                            SimpleName: SharedLock [128835,128845]
                                        ThisExpression [128847,128851]
                    IfStatement [128901,129211]
                        InfixExpression [128904,128959]
                            MethodInvocation [128904,128951]
                                METHOD_INVOCATION_RECEIVER [128904,128911]
                                    SimpleName: lockMap [128904,128911]
                                SimpleName: putIfAbsent [128912,128923]
                                METHOD_INVOCATION_ARGUMENTS [128925,128949]
                                    SimpleName: resourceId [128925,128935]
                                    SimpleName: mySharedLock [128937,128949]
                            INFIX_EXPRESSION_OPERATOR: == [128952,128954]
                            NullLiteral [128955,128959]
                        Block [128982,129104]
                            BreakStatement [129075,129081]
                        Block [129152,129211]
                            ContinueStatement [129179,129188]
                IfStatement [129347,130001]
                    InstanceofExpression [129350,129384]
                        SimpleName: existingLock [129350,129362]
                        SimpleType [129374,129384]
                            SimpleName: SharedLock [129374,129384]
                    Block [129403,129604]
                        IfStatement [129426,129585]
                            MethodInvocation [129429,129469]
                                METHOD_INVOCATION_RECEIVER [129429,129455]
                                    ParenthesizedExpression [129429,129455]
                                        CastExpression [129430,129454]
                                            SimpleType [129431,129441]
                                                SimpleName: SharedLock [129431,129441]
                                            SimpleName: existingLock [129442,129454]
                                SimpleName: acquire [129456,129463]
                                METHOD_INVOCATION_ARGUMENTS [129464,129468]
                                    ThisExpression [129464,129468]
                            Block [129492,129585]
                                BreakStatement [129556,129562]
                    IfStatement [129696,130001]
                        InstanceofExpression [129699,129736]
                            SimpleName: existingLock [129699,129711]
                            SimpleType [129723,129736]
                                SimpleName: ExclusiveLock [129723,129736]
                        Block [129755,129839]
                        Block [129879,130001]
                            ThrowStatement [129902,129982]
                                ClassInstanceCreation [129908,129981]
                                    SimpleType [129912,129941]
                                        SimpleName: UnsupportedOperationException [129912,129941]
                                    InfixExpression [129943,129979]
                                        StringLiteral: "Unknown lock type: " [129943,129964]
                                        INFIX_EXPRESSION_OPERATOR: + [129965,129966]
                                        SimpleName: existingLock [129967,129979]
            ExpressionStatement [130076,130131]
                MethodInvocation [130076,130130]
                    METHOD_INVOCATION_RECEIVER [130076,130113]
                        ArrayAccess [130076,130113]
                            SimpleName: waitStrategies [130076,130090]
                            MethodInvocation [130091,130112]
                                METHOD_INVOCATION_RECEIVER [130091,130103]
                                    SimpleName: resourceType [130091,130103]
                                SimpleName: typeId [130104,130110]
                    SimpleName: apply [130114,130119]
                    METHOD_INVOCATION_ARGUMENTS [130121,130128]
                        PostfixExpression [130121,130128]
                            SimpleName: tries [130121,130126]
                            POSTFIX_EXPRESSION_OPERATOR: ++ [130126,130128]
            ExpressionStatement [130249,130308]
                MethodInvocation [130249,130307]
                    SimpleName: markAsWaitingFor [130249,130265]
                    METHOD_INVOCATION_ARGUMENTS [130267,130305]
                        SimpleName: existingLock [130267,130279]
                        SimpleName: resourceType [130281,130293]
                        SimpleName: resourceId [130295,130305]
    ExpressionStatement [130399,130415]
        MethodInvocation [130399,130414]
            SimpleName: clearWaitList [130399,130412]
    ExpressionStatement [130507,130543]
        MethodInvocation [130507,130542]
            METHOD_INVOCATION_RECEIVER [130507,130521]
                SimpleName: heldShareLocks [130507,130521]
            SimpleName: put [130522,130525]
            METHOD_INVOCATION_ARGUMENTS [130527,130540]
                SimpleName: resourceId [130527,130537]
                NumberLiteral: 1 [130539,130540]
to
MethodDeclaration [126746,130561]
at 8
===
move-tree
---
SingleVariableDeclaration [131023,131038]
    PrimitiveType: long [131023,131027]
    SimpleName: resourceId [131028,131038]
to
MethodDeclaration [130569,132501]
at 5
===
move-tree
---
Block [131064,132494]
    VariableDeclarationStatement [131079,131123]
        PrimitiveType: int [131079,131082]
        VariableDeclarationFragment [131083,131122]
            SimpleName: heldCount [131083,131092]
            MethodInvocation [131095,131122]
                METHOD_INVOCATION_RECEIVER [131095,131104]
                    SimpleName: heldLocks [131095,131104]
                SimpleName: get [131105,131108]
                METHOD_INVOCATION_ARGUMENTS [131110,131120]
                    SimpleName: resourceId [131110,131120]
    IfStatement [131137,131370]
        InfixExpression [131140,131155]
            SimpleName: heldCount [131140,131149]
            INFIX_EXPRESSION_OPERATOR: != [131150,131152]
            PrefixExpression [131153,131155]
                PREFIX_EXPRESSION_OPERATOR: - [131153,131154]
                NumberLiteral: 1 [131154,131155]
        Block [131170,131370]
            ExpressionStatement [131285,131328]
                MethodInvocation [131285,131327]
                    METHOD_INVOCATION_RECEIVER [131285,131294]
                        SimpleName: heldLocks [131285,131294]
                    SimpleName: put [131295,131298]
                    METHOD_INVOCATION_ARGUMENTS [131300,131325]
                        SimpleName: resourceId [131300,131310]
                        InfixExpression [131312,131325]
                            SimpleName: heldCount [131312,131321]
                            INFIX_EXPRESSION_OPERATOR: + [131322,131323]
                            NumberLiteral: 1 [131324,131325]
            ContinueStatement [131346,131355]
    VariableDeclarationStatement [131423,131460]
        SimpleType [131423,131446]
            QualifiedName: ForsetiLockManager.Lock [131423,131446]
        VariableDeclarationFragment [131447,131459]
            SimpleName: existingLock [131447,131459]
    VariableDeclarationStatement [131474,131488]
        PrimitiveType: int [131474,131477]
        VariableDeclarationFragment [131478,131487]
            SimpleName: tries [131478,131483]
            NumberLiteral: 0 [131486,131487]
    WhileStatement [131502,132406]
        InfixExpression [131509,131584]
            ParenthesizedExpression [131509,131576]
                Assignment [131510,131575]
                    SimpleName: existingLock [131510,131522]
                    ASSIGNMENT_OPERATOR: = [131523,131524]
                    MethodInvocation [131525,131575]
                        METHOD_INVOCATION_RECEIVER [131525,131532]
                            SimpleName: lockMap [131525,131532]
                        SimpleName: putIfAbsent [131533,131544]
                        METHOD_INVOCATION_ARGUMENTS [131546,131573]
                            SimpleName: resourceId [131546,131556]
                            SimpleName: myExclusiveLock [131558,131573]
            INFIX_EXPRESSION_OPERATOR: != [131577,131579]
            NullLiteral [131580,131584]
        Block [131599,132406]
            IfStatement [131836,132239]
                InfixExpression [131840,131888]
                    InfixExpression [131840,131850]
                        SimpleName: tries [131840,131845]
                        INFIX_EXPRESSION_OPERATOR: > [131846,131847]
                        NumberLiteral: 50 [131848,131850]
                    INFIX_EXPRESSION_OPERATOR: && [131851,131853]
                    InstanceofExpression [131854,131888]
                        SimpleName: existingLock [131854,131866]
                        SimpleType [131878,131888]
                            SimpleName: SharedLock [131878,131888]
                Block [131907,132239]
                    VariableDeclarationStatement [131987,132037]
                        SimpleType [131987,131997]
                            SimpleName: SharedLock [131987,131997]
                        VariableDeclarationFragment [131998,132036]
                            SimpleName: sharedLock [131998,132008]
                            CastExpression [132011,132036]
                                SimpleType [132012,132022]
                                    SimpleName: SharedLock [132012,132022]
                                SimpleName: existingLock [132024,132036]
                    IfStatement [132059,132220]
                        MethodInvocation [132064,132140]
                            SimpleName: tryUpgradeSharedToExclusive [132064,132091]
                            METHOD_INVOCATION_ARGUMENTS [132093,132138]
                                SimpleName: resourceType [132093,132105]
                                SimpleName: lockMap [132107,132114]
                                SimpleName: resourceId [132116,132126]
                                SimpleName: sharedLock [132128,132138]
                        Block [132164,132220]
                            BreakStatement [132191,132197]
            ExpressionStatement [132259,132314]
                MethodInvocation [132259,132313]
                    METHOD_INVOCATION_RECEIVER [132259,132296]
                        ArrayAccess [132259,132296]
                            SimpleName: waitStrategies [132259,132273]
                            MethodInvocation [132274,132295]
                                METHOD_INVOCATION_RECEIVER [132274,132286]
                                    SimpleName: resourceType [132274,132286]
                                SimpleName: typeId [132287,132293]
                    SimpleName: apply [132297,132302]
                    METHOD_INVOCATION_ARGUMENTS [132304,132311]
                        PostfixExpression [132304,132311]
                            SimpleName: tries [132304,132309]
                            POSTFIX_EXPRESSION_OPERATOR: ++ [132309,132311]
            ExpressionStatement [132332,132391]
                MethodInvocation [132332,132390]
                    SimpleName: markAsWaitingFor [132332,132348]
                    METHOD_INVOCATION_ARGUMENTS [132350,132388]
                        SimpleName: existingLock [132350,132362]
                        SimpleName: resourceType [132364,132376]
                        SimpleName: resourceId [132378,132388]
    ExpressionStatement [132422,132438]
        MethodInvocation [132422,132437]
            SimpleName: clearWaitList [132422,132435]
    ExpressionStatement [132452,132483]
        MethodInvocation [132452,132482]
            METHOD_INVOCATION_RECEIVER [132452,132461]
                SimpleName: heldLocks [132452,132461]
            SimpleName: put [132462,132465]
            METHOD_INVOCATION_ARGUMENTS [132467,132480]
                SimpleName: resourceId [132467,132477]
                NumberLiteral: 1 [132479,132480]
to
MethodDeclaration [130569,132501]
at 8
===
move-tree
---
SingleVariableDeclaration [132818,132833]
    PrimitiveType: long [132818,132822]
    SimpleName: resourceId [132823,132833]
to
MethodDeclaration [132509,134294]
at 5
===
move-tree
---
Block [132859,134265]
    VariableDeclarationStatement [132874,132918]
        PrimitiveType: int [132874,132877]
        VariableDeclarationFragment [132878,132917]
            SimpleName: heldCount [132878,132887]
            MethodInvocation [132890,132917]
                METHOD_INVOCATION_RECEIVER [132890,132899]
                    SimpleName: heldLocks [132890,132899]
                SimpleName: get [132900,132903]
                METHOD_INVOCATION_ARGUMENTS [132905,132915]
                    SimpleName: resourceId [132905,132915]
    IfStatement [132932,133165]
        InfixExpression [132935,132950]
            SimpleName: heldCount [132935,132944]
            INFIX_EXPRESSION_OPERATOR: != [132945,132947]
            PrefixExpression [132948,132950]
                PREFIX_EXPRESSION_OPERATOR: - [132948,132949]
                NumberLiteral: 1 [132949,132950]
        Block [132965,133165]
            ExpressionStatement [133080,133123]
                MethodInvocation [133080,133122]
                    METHOD_INVOCATION_RECEIVER [133080,133089]
                        SimpleName: heldLocks [133080,133089]
                    SimpleName: put [133090,133093]
                    METHOD_INVOCATION_ARGUMENTS [133095,133120]
                        SimpleName: resourceId [133095,133105]
                        InfixExpression [133107,133120]
                            SimpleName: heldCount [133107,133116]
                            INFIX_EXPRESSION_OPERATOR: + [133117,133118]
                            NumberLiteral: 1 [133119,133120]
            ContinueStatement [133141,133150]
    VariableDeclarationStatement [133218,133247]
        SimpleType [133218,133241]
            QualifiedName: ForsetiLockManager.Lock [133218,133241]
        VariableDeclarationFragment [133242,133246]
            SimpleName: lock [133242,133246]
    IfStatement [133261,134207]
        InfixExpression [133264,133331]
            ParenthesizedExpression [133264,133323]
                Assignment [133265,133322]
                    SimpleName: lock [133265,133269]
                    ASSIGNMENT_OPERATOR: = [133270,133271]
                    MethodInvocation [133272,133322]
                        METHOD_INVOCATION_RECEIVER [133272,133279]
                            SimpleName: lockMap [133272,133279]
                        SimpleName: putIfAbsent [133280,133291]
                        METHOD_INVOCATION_ARGUMENTS [133293,133320]
                            SimpleName: resourceId [133293,133303]
                            SimpleName: myExclusiveLock [133305,133320]
            INFIX_EXPRESSION_OPERATOR: != [133324,133326]
            NullLiteral [133327,133331]
        Block [133346,134207]
            IfStatement [133365,134161]
                InfixExpression [133368,133463]
                    InstanceofExpression [133368,133394]
                        SimpleName: lock [133368,133372]
                        SimpleType [133384,133394]
                            SimpleName: SharedLock [133384,133394]
                    INFIX_EXPRESSION_OPERATOR: && [133395,133397]
                    MethodInvocation [133398,133463]
                        METHOD_INVOCATION_RECEIVER [133398,133437]
                            ArrayAccess [133398,133437]
                                SimpleName: sharedLockCounts [133398,133414]
                                MethodInvocation [133415,133436]
                                    METHOD_INVOCATION_RECEIVER [133415,133427]
                                        SimpleName: resourceType [133415,133427]
                                    SimpleName: typeId [133428,133434]
                        SimpleName: containsKey [133438,133449]
                        METHOD_INVOCATION_ARGUMENTS [133451,133461]
                            SimpleName: resourceId [133451,133461]
                Block [133482,134161]
                    VariableDeclarationStatement [133505,133547]
                        SimpleType [133505,133515]
                            SimpleName: SharedLock [133505,133515]
                        VariableDeclarationFragment [133516,133546]
                            SimpleName: sharedLock [133516,133526]
                            CastExpression [133529,133546]
                                SimpleType [133530,133540]
                                    SimpleName: SharedLock [133530,133540]
                                SimpleName: lock [133542,133546]
                    IfStatement [133569,134142]
                        MethodInvocation [133572,133611]
                            METHOD_INVOCATION_RECEIVER [133572,133582]
                                SimpleName: sharedLock [133572,133582]
                            SimpleName: tryAcquireUpdateLock [133583,133603]
                            METHOD_INVOCATION_ARGUMENTS [133605,133609]
                                ThisExpression [133605,133609]
                        Block [133634,134142]
                            IfStatement [133661,134119]
                                InfixExpression [133664,133697]
                                    MethodInvocation [133664,133692]
                                        METHOD_INVOCATION_RECEIVER [133664,133674]
                                            SimpleName: sharedLock [133664,133674]
                                        SimpleName: numberOfHolders [133675,133690]
                                    INFIX_EXPRESSION_OPERATOR: == [133693,133695]
                                    NumberLiteral: 1 [133696,133697]
                                Block [133724,133925]
                                    ExpressionStatement [133755,133798]
                                        MethodInvocation [133755,133797]
                                            METHOD_INVOCATION_RECEIVER [133755,133762]
                                                SimpleName: lockMap [133755,133762]
                                            SimpleName: put [133763,133766]
                                            METHOD_INVOCATION_ARGUMENTS [133768,133795]
                                                SimpleName: resourceId [133768,133778]
                                                SimpleName: myExclusiveLock [133780,133795]
                                    ExpressionStatement [133828,133859]
                                        MethodInvocation [133828,133858]
                                            METHOD_INVOCATION_RECEIVER [133828,133837]
                                                SimpleName: heldLocks [133828,133837]
                                            SimpleName: put [133838,133841]
                                            METHOD_INVOCATION_ARGUMENTS [133843,133856]
                                                SimpleName: resourceId [133843,133853]
                                                NumberLiteral: 1 [133855,133856]
                                    ContinueStatement [133889,133898]
                                Block [133981,134119]
                                    ExpressionStatement [134012,134049]
                                        MethodInvocation [134012,134048]
                                            METHOD_INVOCATION_RECEIVER [134012,134022]
                                                SimpleName: sharedLock [134012,134022]
                                            SimpleName: releaseUpdateLock [134023,134040]
                                            METHOD_INVOCATION_ARGUMENTS [134042,134046]
                                                ThisExpression [134042,134046]
                                    ReturnStatement [134079,134092]
                                        BooleanLiteral: false [134086,134091]
            ReturnStatement [134179,134192]
                BooleanLiteral: false [134186,134191]
    ExpressionStatement [134223,134254]
        MethodInvocation [134223,134253]
            METHOD_INVOCATION_RECEIVER [134223,134232]
                SimpleName: heldLocks [134223,134232]
            SimpleName: put [134233,134236]
            METHOD_INVOCATION_ARGUMENTS [134238,134251]
                SimpleName: resourceId [134238,134248]
                NumberLiteral: 1 [134250,134251]
to
MethodDeclaration [132509,134294]
at 6
===
move-tree
---
SingleVariableDeclaration [135578,135593]
    PrimitiveType: long [135578,135582]
    SimpleName: resourceId [135583,135593]
to
MethodDeclaration [135172,137967]
at 5
===
move-tree
---
Block [135619,137938]
    VariableDeclarationStatement [135634,135683]
        PrimitiveType: int [135634,135637]
        VariableDeclarationFragment [135638,135682]
            SimpleName: heldCount [135638,135647]
            MethodInvocation [135650,135682]
                METHOD_INVOCATION_RECEIVER [135650,135664]
                    SimpleName: heldShareLocks [135650,135664]
                SimpleName: get [135665,135668]
                METHOD_INVOCATION_ARGUMENTS [135670,135680]
                    SimpleName: resourceId [135670,135680]
    IfStatement [135697,135935]
        InfixExpression [135700,135715]
            SimpleName: heldCount [135700,135709]
            INFIX_EXPRESSION_OPERATOR: != [135710,135712]
            PrefixExpression [135713,135715]
                PREFIX_EXPRESSION_OPERATOR: - [135713,135714]
                NumberLiteral: 1 [135714,135715]
        Block [135730,135935]
            ExpressionStatement [135845,135893]
                MethodInvocation [135845,135892]
                    METHOD_INVOCATION_RECEIVER [135845,135859]
                        SimpleName: heldShareLocks [135845,135859]
                    SimpleName: put [135860,135863]
                    METHOD_INVOCATION_ARGUMENTS [135865,135890]
                        SimpleName: resourceId [135865,135875]
                        InfixExpression [135877,135890]
                            SimpleName: heldCount [135877,135886]
                            INFIX_EXPRESSION_OPERATOR: + [135887,135888]
                            NumberLiteral: 1 [135889,135890]
            ContinueStatement [135911,135920]
    IfStatement [135951,136355]
        MethodInvocation [135955,135999]
            METHOD_INVOCATION_RECEIVER [135955,135973]
                SimpleName: heldExclusiveLocks [135955,135973]
            SimpleName: containsKey [135974,135985]
            METHOD_INVOCATION_ARGUMENTS [135987,135997]
                SimpleName: resourceId [135987,135997]
        Block [136015,136355]
            ExpressionStatement [136277,136313]
                MethodInvocation [136277,136312]
                    METHOD_INVOCATION_RECEIVER [136277,136291]
                        SimpleName: heldShareLocks [136277,136291]
                    SimpleName: put [136292,136295]
                    METHOD_INVOCATION_ARGUMENTS [136297,136310]
                        SimpleName: resourceId [136297,136307]
                        NumberLiteral: 1 [136309,136310]
            ContinueStatement [136331,136340]
    WhileStatement [136371,137877]
        BooleanLiteral: true [136377,136381]
        Block [136396,137877]
            VariableDeclarationStatement [136415,136480]
                SimpleType [136415,136438]
                    QualifiedName: ForsetiLockManager.Lock [136415,136438]
                VariableDeclarationFragment [136439,136479]
                    SimpleName: existingLock [136439,136451]
                    MethodInvocation [136454,136479]
                        METHOD_INVOCATION_RECEIVER [136454,136461]
                            SimpleName: lockMap [136454,136461]
                        SimpleName: get [136462,136465]
                        METHOD_INVOCATION_ARGUMENTS [136467,136477]
                            SimpleName: resourceId [136467,136477]
            IfStatement [136498,137862]
                InfixExpression [136501,136521]
                    SimpleName: existingLock [136501,136513]
                    INFIX_EXPRESSION_OPERATOR: == [136514,136516]
                    NullLiteral [136517,136521]
                Block [136540,136820]
                    IfStatement [136619,136801]
                        InfixExpression [136622,136685]
                            MethodInvocation [136622,136677]
                                METHOD_INVOCATION_RECEIVER [136622,136629]
                                    SimpleName: lockMap [136622,136629]
                                SimpleName: putIfAbsent [136630,136641]
                                METHOD_INVOCATION_ARGUMENTS [136643,136675]
                                    SimpleName: resourceId [136643,136653]
                                    ClassInstanceCreation [136655,136675]
                                        SimpleType [136659,136669]
                                            SimpleName: SharedLock [136659,136669]
                                        ThisExpression [136670,136674]
                            INFIX_EXPRESSION_OPERATOR: == [136678,136680]
                            NullLiteral [136681,136685]
                        Block [136708,136801]
                            BreakStatement [136772,136778]
                IfStatement [136843,137862]
                    InstanceofExpression [136846,136880]
                        SimpleName: existingLock [136846,136858]
                        SimpleType [136870,136880]
                            SimpleName: SharedLock [136870,136880]
                    Block [136899,137563]
                        IfStatement [137225,137544]
                            MethodInvocation [137228,137268]
                                METHOD_INVOCATION_RECEIVER [137228,137254]
                                    ParenthesizedExpression [137228,137254]
                                        CastExpression [137229,137253]
                                            SimpleType [137230,137240]
                                                SimpleName: SharedLock [137230,137240]
                                            SimpleName: existingLock [137241,137253]
                                SimpleName: acquire [137255,137262]
                                METHOD_INVOCATION_ARGUMENTS [137263,137267]
                                    ThisExpression [137263,137267]
                            Block [137291,137384]
                                BreakStatement [137355,137361]
                            IfStatement [137411,137544]
                                MethodInvocation [137415,137457]
                                    METHOD_INVOCATION_RECEIVER [137415,137442]
                                        ParenthesizedExpression [137415,137442]
                                            CastExpression [137416,137441]
                                                SimpleType [137417,137427]
                                                    SimpleName: SharedLock [137417,137427]
                                                SimpleName: existingLock [137429,137441]
                                    SimpleName: isUpdateLock [137443,137455]
                                Block [137481,137544]
                                    ReturnStatement [137508,137521]
                                        BooleanLiteral: false [137515,137520]
                    IfStatement [137586,137862]
                        InstanceofExpression [137589,137626]
                            SimpleName: existingLock [137589,137601]
                            SimpleType [137613,137626]
                                SimpleName: ExclusiveLock [137613,137626]
                        Block [137645,137700]
                            ReturnStatement [137668,137681]
                                BooleanLiteral: false [137675,137680]
                        Block [137740,137862]
                            ThrowStatement [137763,137843]
                                ClassInstanceCreation [137769,137842]
                                    SimpleType [137773,137802]
                                        SimpleName: UnsupportedOperationException [137773,137802]
                                    InfixExpression [137804,137840]
                                        StringLiteral: "Unknown lock type: " [137804,137825]
                                        INFIX_EXPRESSION_OPERATOR: + [137826,137827]
                                        SimpleName: existingLock [137828,137840]
    ExpressionStatement [137891,137927]
        MethodInvocation [137891,137926]
            METHOD_INVOCATION_RECEIVER [137891,137905]
                SimpleName: heldShareLocks [137891,137905]
            SimpleName: put [137906,137909]
            METHOD_INVOCATION_ARGUMENTS [137911,137924]
                SimpleName: resourceId [137911,137921]
                NumberLiteral: 1 [137923,137924]
to
MethodDeclaration [135172,137967]
at 6
===
move-tree
---
SingleVariableDeclaration [138094,138109]
    PrimitiveType: long [138094,138098]
    SimpleName: resourceId [138099,138109]
to
MethodDeclaration [137975,138599]
at 5
===
move-tree
---
Block [138135,138592]
    IfStatement [138150,138299]
        MethodInvocation [138155,138240]
            SimpleName: releaseLocalLock [138155,138171]
            METHOD_INVOCATION_ARGUMENTS [138173,138238]
                SimpleName: resourceType [138173,138185]
                SimpleName: resourceId [138187,138197]
                ArrayAccess [138199,138238]
                    SimpleName: sharedLockCounts [138199,138215]
                    MethodInvocation [138216,138237]
                        METHOD_INVOCATION_RECEIVER [138216,138228]
                            SimpleName: resourceType [138216,138228]
                        SimpleName: typeId [138229,138235]
        Block [138256,138299]
            ContinueStatement [138275,138284]
    IfStatement [138393,138581]
        PrefixExpression [138397,138466]
            PREFIX_EXPRESSION_OPERATOR: ! [138397,138398]
            MethodInvocation [138398,138466]
                METHOD_INVOCATION_RECEIVER [138398,138440]
                    ArrayAccess [138398,138440]
                        SimpleName: exclusiveLockCounts [138398,138417]
                        MethodInvocation [138418,138439]
                            METHOD_INVOCATION_RECEIVER [138418,138430]
                                SimpleName: resourceType [138418,138430]
                            SimpleName: typeId [138431,138437]
                SimpleName: containsKey [138441,138452]
                METHOD_INVOCATION_ARGUMENTS [138454,138464]
                    SimpleName: resourceId [138454,138464]
        Block [138482,138581]
            ExpressionStatement [138501,138566]
                MethodInvocation [138501,138565]
                    SimpleName: releaseGlobalLock [138501,138518]
                    METHOD_INVOCATION_ARGUMENTS [138520,138563]
                        ArrayAccess [138520,138551]
                            SimpleName: lockMaps [138520,138528]
                            MethodInvocation [138529,138550]
                                METHOD_INVOCATION_RECEIVER [138529,138541]
                                    SimpleName: resourceType [138529,138541]
                                SimpleName: typeId [138542,138548]
                        SimpleName: resourceId [138553,138563]
to
MethodDeclaration [137975,138599]
at 6
===
move-tree
---
SingleVariableDeclaration [138729,138744]
    PrimitiveType: long [138729,138733]
    SimpleName: resourceId [138734,138744]
to
MethodDeclaration [138607,139387]
at 5
===
move-tree
---
Block [138770,139380]
    IfStatement [138785,138937]
        MethodInvocation [138790,138878]
            SimpleName: releaseLocalLock [138790,138806]
            METHOD_INVOCATION_ARGUMENTS [138808,138876]
                SimpleName: resourceType [138808,138820]
                SimpleName: resourceId [138822,138832]
                ArrayAccess [138834,138876]
                    SimpleName: exclusiveLockCounts [138834,138853]
                    MethodInvocation [138854,138875]
                        METHOD_INVOCATION_RECEIVER [138854,138866]
                            SimpleName: resourceType [138854,138866]
                        SimpleName: typeId [138867,138873]
        Block [138894,138937]
            ContinueStatement [138913,138922]
    IfStatement [138953,139369]
        MethodInvocation [138957,139022]
            METHOD_INVOCATION_RECEIVER [138957,138996]
                ArrayAccess [138957,138996]
                    SimpleName: sharedLockCounts [138957,138973]
                    MethodInvocation [138974,138995]
                        METHOD_INVOCATION_RECEIVER [138974,138986]
                            SimpleName: resourceType [138974,138986]
                        SimpleName: typeId [138987,138993]
            SimpleName: containsKey [138997,139008]
            METHOD_INVOCATION_ARGUMENTS [139010,139020]
                SimpleName: resourceId [139010,139020]
        Block [139038,139238]
            ExpressionStatement [139149,139223]
                MethodInvocation [139149,139222]
                    METHOD_INVOCATION_RECEIVER [139149,139180]
                        ArrayAccess [139149,139180]
                            SimpleName: lockMaps [139149,139157]
                            MethodInvocation [139158,139179]
                                METHOD_INVOCATION_RECEIVER [139158,139170]
                                    SimpleName: resourceType [139158,139170]
                                SimpleName: typeId [139171,139177]
                    SimpleName: put [139181,139184]
                    METHOD_INVOCATION_ARGUMENTS [139186,139220]
                        SimpleName: resourceId [139186,139196]
                        ClassInstanceCreation [139198,139220]
                            SimpleType [139202,139212]
                                SimpleName: SharedLock [139202,139212]
                            ThisExpression [139214,139218]
        Block [139270,139369]
            ExpressionStatement [139289,139354]
                MethodInvocation [139289,139353]
                    SimpleName: releaseGlobalLock [139289,139306]
                    METHOD_INVOCATION_ARGUMENTS [139308,139351]
                        ArrayAccess [139308,139339]
                            SimpleName: lockMaps [139308,139316]
                            MethodInvocation [139317,139338]
                                METHOD_INVOCATION_RECEIVER [139317,139329]
                                    SimpleName: resourceType [139317,139329]
                                SimpleName: typeId [139330,139336]
                        SimpleName: resourceId [139341,139351]
to
MethodDeclaration [138607,139387]
at 6
===
move-tree
---
PrimitiveType: long [18410,18414]
to
SingleVariableDeclaration [18410,18427]
at 0
===
move-tree
---
PrimitiveType: long [18617,18621]
to
SingleVariableDeclaration [18617,18634]
at 0
===
move-tree
---
PrimitiveType: long [18817,18821]
to
SingleVariableDeclaration [18817,18834]
at 0
===
move-tree
---
PrimitiveType: long [19009,19013]
to
SingleVariableDeclaration [19009,19026]
at 0
===
move-tree
---
PrimitiveType: long [46787,46791]
to
SingleVariableDeclaration [46787,46797]
at 0
===
move-tree
---
PrimitiveType: long [46981,46985]
to
SingleVariableDeclaration [46981,46991]
at 0
===
move-tree
---
PrimitiveType: long [47175,47179]
to
SingleVariableDeclaration [47175,47185]
at 0
===
move-tree
---
PrimitiveType: long [47369,47373]
to
SingleVariableDeclaration [47369,47379]
at 0
===
move-tree
---
PrimitiveType: long [57718,57722]
to
SingleVariableDeclaration [57718,57735]
at 0
===
move-tree
---
PrimitiveType: long [57820,57824]
to
SingleVariableDeclaration [57820,57837]
at 0
===
move-tree
---
PrimitiveType: long [57923,57927]
to
SingleVariableDeclaration [57923,57932]
at 0
===
move-tree
---
PrimitiveType: long [58013,58017]
to
SingleVariableDeclaration [58013,58022]
at 0
===
move-tree
---
SingleVariableDeclaration [61391,61411]
    VARARGS_TYPE [61391,61399]
        PrimitiveType: long [61391,61395]
    SimpleName: resourceIds [61400,61411]
to
MethodDeclaration [61103,61448]
at 4
===
move-tree
---
SingleVariableDeclaration [61838,61858]
    VARARGS_TYPE [61838,61846]
        PrimitiveType: long [61838,61842]
    SimpleName: resourceIds [61847,61858]
to
MethodDeclaration [61460,61895]
at 4
===
move-tree
---
SingleVariableDeclaration [62072,62092]
    VARARGS_TYPE [62072,62080]
        PrimitiveType: long [62072,62076]
    SimpleName: resourceIds [62081,62092]
to
MethodDeclaration [61907,62095]
at 4
===
move-tree
---
SingleVariableDeclaration [62266,62286]
    VARARGS_TYPE [62266,62274]
        PrimitiveType: long [62266,62270]
    SimpleName: resourceIds [62275,62286]
to
MethodDeclaration [62107,62289]
at 4
===
move-tree
---
SingleVariableDeclaration [152977,152992]
    PrimitiveType: long [152977,152981]
    SimpleName: resourceId [152982,152992]
to
MethodDeclaration [62301,62416]
at 4
===
move-tree
---
SingleVariableDeclaration [151203,151218]
    PrimitiveType: long [151203,151207]
    SimpleName: resourceId [151208,151218]
to
MethodDeclaration [62428,62549]
at 4
===
move-tree
---
PrimitiveType: long [64576,64580]
to
SingleVariableDeclaration [64576,64595]
at 0
===
update-node
---
SimpleName: resourceIds [64584,64595]
replace resourceIds by resourceId
===
move-tree
---
PrimitiveType: long [64879,64883]
to
SingleVariableDeclaration [64879,64898]
at 0
===
update-node
---
SimpleName: resourceIds [64887,64898]
replace resourceIds by resourceId
===
move-tree
---
PrimitiveType: long [65020,65024]
to
SingleVariableDeclaration [65020,65039]
at 0
===
update-node
---
SimpleName: resourceIds [65028,65039]
replace resourceIds by resourceId
===
move-tree
---
PrimitiveType: long [65141,65145]
to
SingleVariableDeclaration [65141,65160]
at 0
===
update-node
---
SimpleName: resourceIds [65149,65160]
replace resourceIds by resourceId
===
move-tree
---
VariableDeclarationStatement [67693,67746]
    SimpleType [67693,67705]
        SimpleName: LockResource [67693,67705]
    VariableDeclarationFragment [67706,67745]
        SimpleName: resource [67706,67714]
        MethodInvocation [67717,67745]
            METHOD_INVOCATION_RECEIVER [67717,67727]
                SimpleName: localLocks [67717,67727]
            SimpleName: get [67728,67731]
            METHOD_INVOCATION_ARGUMENTS [67733,67743]
                SimpleName: resourceId [67733,67743]
to
Block [67532,68089]
at 1
===
insert-node
---
IfStatement [67279,67587]
to
Block [67532,68089]
at 2
===
move-tree
---
VariableDeclarationStatement [68366,68419]
    SimpleType [68366,68378]
        SimpleName: LockResource [68366,68378]
    VariableDeclarationFragment [68379,68418]
        SimpleName: resource [68379,68387]
        MethodInvocation [68390,68418]
            METHOD_INVOCATION_RECEIVER [68390,68400]
                SimpleName: localLocks [68390,68400]
            SimpleName: get [68401,68404]
            METHOD_INVOCATION_ARGUMENTS [68406,68416]
                SimpleName: resourceId [68406,68416]
to
Block [68202,68763]
at 1
===
insert-node
---
IfStatement [67868,68175]
to
Block [68202,68763]
at 2
===
move-tree
---
VariableDeclarationStatement [68890,68971]
    ParameterizedType [68890,68926]
        SimpleType [68890,68912]
            SimpleName: PrimitiveLongObjectMap [68890,68912]
        SimpleType [68913,68925]
            SimpleName: LockResource [68913,68925]
    VariableDeclarationFragment [68927,68970]
        SimpleName: localLocks [68927,68937]
        MethodInvocation [68940,68970]
            SimpleName: localExclusive [68940,68954]
            METHOD_INVOCATION_ARGUMENTS [68956,68968]
                SimpleName: resourceType [68956,68968]
to
Block [69028,69549]
at 0
===
insert-node
---
IfStatement [68459,68943]
to
Block [69028,69549]
at 2
===
move-tree
---
VariableDeclarationStatement [69702,69780]
    ParameterizedType [69702,69738]
        SimpleType [69702,69724]
            SimpleName: PrimitiveLongObjectMap [69702,69724]
        SimpleType [69725,69737]
            SimpleName: LockResource [69725,69737]
    VariableDeclarationFragment [69739,69779]
        SimpleName: localLocks [69739,69749]
        MethodInvocation [69752,69779]
            SimpleName: localShared [69752,69763]
            METHOD_INVOCATION_ARGUMENTS [69765,69777]
                SimpleName: resourceType [69765,69777]
to
Block [69837,70357]
at 0
===
insert-node
---
IfStatement [69221,69704]
to
Block [69837,70357]
at 2
===
move-tree
---
VariableDeclarationStatement [70507,70585]
    ParameterizedType [70507,70543]
        SimpleType [70507,70529]
            SimpleName: PrimitiveLongObjectMap [70507,70529]
        SimpleType [70530,70542]
            SimpleName: LockResource [70530,70542]
    VariableDeclarationFragment [70544,70584]
        SimpleName: localLocks [70544,70554]
        MethodInvocation [70557,70584]
            SimpleName: localShared [70557,70568]
            METHOD_INVOCATION_ARGUMENTS [70570,70582]
                SimpleName: resourceType [70570,70582]
to
Block [70642,70980]
at 0
===
move-tree
---
VariableDeclarationStatement [71111,71192]
    ParameterizedType [71111,71147]
        SimpleType [71111,71133]
            SimpleName: PrimitiveLongObjectMap [71111,71133]
        SimpleType [71134,71146]
            SimpleName: LockResource [71134,71146]
    VariableDeclarationFragment [71148,71191]
        SimpleName: localLocks [71148,71158]
        MethodInvocation [71161,71191]
            SimpleName: localExclusive [71161,71175]
            METHOD_INVOCATION_ARGUMENTS [71177,71189]
                SimpleName: resourceType [71177,71189]
to
Block [71249,71588]
at 0
===
move-tree
---
ExpressionStatement [71820,71869]
    MethodInvocation [71820,71868]
        METHOD_INVOCATION_RECEIVER [71820,71834]
            SimpleName: exclusiveLocks [71820,71834]
        SimpleName: visitEntries [71835,71847]
        METHOD_INVOCATION_ARGUMENTS [71849,71866]
            SimpleName: typeWriteReleaser [71849,71866]
to
Block [71654,71747]
at 0
===
move-tree
---
ExpressionStatement [71879,71902]
    MethodInvocation [71879,71901]
        METHOD_INVOCATION_RECEIVER [71879,71893]
            SimpleName: exclusiveLocks [71879,71893]
        SimpleName: clear [71894,71899]
to
Block [71654,71747]
at 2
===
move-tree
---
PrimitiveType: long [108492,108496]
to
SingleVariableDeclaration [108492,108510]
at 0
===
update-node
---
SimpleName: resourceIds [108499,108510]
replace resourceIds by resourceId
===
move-tree
---
PrimitiveType: long [108858,108862]
to
SingleVariableDeclaration [108858,108876]
at 0
===
update-node
---
SimpleName: resourceIds [108865,108876]
replace resourceIds by resourceId
===
move-tree
---
VariableDeclarationStatement [113544,113619]
    ParameterizedType [113544,113568]
        SimpleType [113544,113547]
            SimpleName: Map [113544,113547]
        SimpleType [113548,113552]
            SimpleName: Long [113548,113552]
        SimpleType [113554,113567]
            SimpleName: AtomicInteger [113554,113567]
    VariableDeclarationFragment [113569,113618]
        SimpleName: lockMap [113569,113576]
        MethodInvocation [113579,113618]
            SimpleName: getLockMap [113579,113589]
            METHOD_INVOCATION_ARGUMENTS [113591,113616]
                SimpleName: sharedLocks [113591,113602]
                SimpleName: resourceType [113604,113616]
to
Block [109533,110314]
at 0
===
insert-node
---
VariableDeclarationStatement [109629,109687]
to
Block [109533,110314]
at 1
===
insert-node
---
IfStatement [109697,110307]
to
Block [109533,110314]
at 2
===
move-tree
---
VariableDeclarationStatement [114444,114522]
    ParameterizedType [114444,114468]
        SimpleType [114444,114447]
            SimpleName: Map [114444,114447]
        SimpleType [114448,114452]
            SimpleName: Long [114448,114452]
        SimpleType [114454,114467]
            SimpleName: AtomicInteger [114454,114467]
    VariableDeclarationFragment [114469,114521]
        SimpleName: lockMap [114469,114476]
        MethodInvocation [114479,114521]
            SimpleName: getLockMap [114479,114489]
            METHOD_INVOCATION_ARGUMENTS [114491,114519]
                SimpleName: exclusiveLocks [114491,114505]
                SimpleName: resourceType [114507,114519]
to
Block [110471,111264]
at 0
===
insert-node
---
VariableDeclarationStatement [110572,110630]
to
Block [110471,111264]
at 1
===
insert-node
---
IfStatement [110640,111257]
to
Block [110471,111264]
at 2
===
move-tree
---
PrimitiveType: long [116267,116271]
to
SingleVariableDeclaration [116267,116286]
at 0
===
update-node
---
SimpleName: resourceIds [116275,116286]
replace resourceIds by resourceId
===
move-tree
---
VariableDeclarationStatement [116483,116558]
    ParameterizedType [116483,116507]
        SimpleType [116483,116486]
            SimpleName: Map [116483,116486]
        SimpleType [116487,116491]
            SimpleName: Long [116487,116491]
        SimpleType [116493,116506]
            SimpleName: AtomicInteger [116493,116506]
    VariableDeclarationFragment [116508,116557]
        SimpleName: lockMap [116508,116515]
        MethodInvocation [116518,116557]
            SimpleName: getLockMap [116518,116528]
            METHOD_INVOCATION_ARGUMENTS [116530,116555]
                SimpleName: sharedLocks [116530,116541]
                SimpleName: resourceType [116543,116555]
to
Block [116615,117123]
at 0
===
move-tree
---
VariableDeclarationStatement [117254,117332]
    ParameterizedType [117254,117278]
        SimpleType [117254,117257]
            SimpleName: Map [117254,117257]
        SimpleType [117258,117262]
            SimpleName: Long [117258,117262]
        SimpleType [117264,117277]
            SimpleName: AtomicInteger [117264,117277]
    VariableDeclarationFragment [117279,117331]
        SimpleName: lockMap [117279,117286]
        MethodInvocation [117289,117331]
            SimpleName: getLockMap [117289,117299]
            METHOD_INVOCATION_ARGUMENTS [117301,117329]
                SimpleName: exclusiveLocks [117301,117315]
                SimpleName: resourceType [117317,117329]
to
Block [117389,117900]
at 0
===
move-tree
---
PrimitiveType: long [119230,119234]
to
SingleVariableDeclaration [119230,119249]
at 0
===
move-tree
---
PrimitiveType: long [119990,119994]
to
SingleVariableDeclaration [119990,120008]
at 0
===
move-tree
---
VariableDeclarationStatement [126948,127035]
    ParameterizedType [126948,126992]
        SimpleType [126948,126961]
            SimpleName: ConcurrentMap [126948,126961]
        SimpleType [126962,126966]
            SimpleName: Long [126962,126966]
        SimpleType [126968,126991]
            QualifiedName: ForsetiLockManager.Lock [126968,126991]
    VariableDeclarationFragment [126993,127034]
        SimpleName: lockMap [126993,127000]
        ArrayAccess [127003,127034]
            SimpleName: lockMaps [127003,127011]
            MethodInvocation [127012,127033]
                METHOD_INVOCATION_RECEIVER [127012,127024]
                    SimpleName: resourceType [127012,127024]
                SimpleName: typeId [127025,127031]
to
Block [127318,130554]
at 0
===
move-tree
---
VariableDeclarationStatement [127088,127165]
    SimpleType [127088,127107]
        SimpleName: PrimitiveLongIntMap [127088,127107]
    VariableDeclarationFragment [127108,127164]
        SimpleName: heldShareLocks [127108,127122]
        ArrayAccess [127125,127164]
            SimpleName: sharedLockCounts [127125,127141]
            MethodInvocation [127142,127163]
                METHOD_INVOCATION_RECEIVER [127142,127154]
                    SimpleName: resourceType [127142,127154]
                SimpleName: typeId [127155,127161]
to
Block [127318,130554]
at 1
===
move-tree
---
VariableDeclarationStatement [127175,127259]
    SimpleType [127175,127194]
        SimpleName: PrimitiveLongIntMap [127175,127194]
    VariableDeclarationFragment [127195,127258]
        SimpleName: heldExclusiveLocks [127195,127213]
        ArrayAccess [127216,127258]
            SimpleName: exclusiveLockCounts [127216,127235]
            MethodInvocation [127236,127257]
                METHOD_INVOCATION_RECEIVER [127236,127248]
                    SimpleName: resourceType [127236,127248]
                SimpleName: typeId [127249,127255]
to
Block [127318,130554]
at 2
===
move-tree
---
VariableDeclarationStatement [130833,130920]
    ParameterizedType [130833,130877]
        SimpleType [130833,130846]
            SimpleName: ConcurrentMap [130833,130846]
        SimpleType [130847,130851]
            SimpleName: Long [130847,130851]
        SimpleType [130853,130876]
            QualifiedName: ForsetiLockManager.Lock [130853,130876]
    VariableDeclarationFragment [130878,130919]
        SimpleName: lockMap [130878,130885]
        ArrayAccess [130888,130919]
            SimpleName: lockMaps [130888,130896]
            MethodInvocation [130897,130918]
                METHOD_INVOCATION_RECEIVER [130897,130909]
                    SimpleName: resourceType [130897,130909]
                SimpleName: typeId [130910,130916]
to
Block [131064,132494]
at 0
===
move-tree
---
VariableDeclarationStatement [130930,131005]
    SimpleType [130930,130949]
        SimpleName: PrimitiveLongIntMap [130930,130949]
    VariableDeclarationFragment [130950,131004]
        SimpleName: heldLocks [130950,130959]
        ArrayAccess [130962,131004]
            SimpleName: exclusiveLockCounts [130962,130981]
            MethodInvocation [130982,131003]
                METHOD_INVOCATION_RECEIVER [130982,130994]
                    SimpleName: resourceType [130982,130994]
                SimpleName: typeId [130995,131001]
to
Block [131064,132494]
at 1
===
move-tree
---
VariableDeclarationStatement [132628,132715]
    ParameterizedType [132628,132672]
        SimpleType [132628,132641]
            SimpleName: ConcurrentMap [132628,132641]
        SimpleType [132642,132646]
            SimpleName: Long [132642,132646]
        SimpleType [132648,132671]
            QualifiedName: ForsetiLockManager.Lock [132648,132671]
    VariableDeclarationFragment [132673,132714]
        SimpleName: lockMap [132673,132680]
        ArrayAccess [132683,132714]
            SimpleName: lockMaps [132683,132691]
            MethodInvocation [132692,132713]
                METHOD_INVOCATION_RECEIVER [132692,132704]
                    SimpleName: resourceType [132692,132704]
                SimpleName: typeId [132705,132711]
to
Block [132859,134265]
at 0
===
move-tree
---
VariableDeclarationStatement [132725,132800]
    SimpleType [132725,132744]
        SimpleName: PrimitiveLongIntMap [132725,132744]
    VariableDeclarationFragment [132745,132799]
        SimpleName: heldLocks [132745,132754]
        ArrayAccess [132757,132799]
            SimpleName: exclusiveLockCounts [132757,132776]
            MethodInvocation [132777,132798]
                METHOD_INVOCATION_RECEIVER [132777,132789]
                    SimpleName: resourceType [132777,132789]
                SimpleName: typeId [132790,132796]
to
Block [132859,134265]
at 1
===
move-tree
---
ReturnStatement [134275,134287]
    BooleanLiteral: true [134282,134286]
to
Block [132859,134265]
at 7
===
move-tree
---
VariableDeclarationStatement [135288,135379]
    ParameterizedType [135288,135332]
        SimpleType [135288,135301]
            SimpleName: ConcurrentMap [135288,135301]
        SimpleType [135302,135306]
            SimpleName: Long [135302,135306]
        SimpleType [135308,135331]
            QualifiedName: ForsetiLockManager.Lock [135308,135331]
    VariableDeclarationFragment [135333,135378]
        SimpleName: lockMap [135333,135340]
        ArrayAccess [135347,135378]
            SimpleName: lockMaps [135347,135355]
            MethodInvocation [135356,135377]
                METHOD_INVOCATION_RECEIVER [135356,135368]
                    SimpleName: resourceType [135356,135368]
                SimpleName: typeId [135369,135375]
to
Block [135619,137938]
at 0
===
move-tree
---
VariableDeclarationStatement [135389,135466]
    SimpleType [135389,135408]
        SimpleName: PrimitiveLongIntMap [135389,135408]
    VariableDeclarationFragment [135409,135465]
        SimpleName: heldShareLocks [135409,135423]
        ArrayAccess [135426,135465]
            SimpleName: sharedLockCounts [135426,135442]
            MethodInvocation [135443,135464]
                METHOD_INVOCATION_RECEIVER [135443,135455]
                    SimpleName: resourceType [135443,135455]
                SimpleName: typeId [135456,135462]
to
Block [135619,137938]
at 1
===
move-tree
---
VariableDeclarationStatement [135476,135560]
    SimpleType [135476,135495]
        SimpleName: PrimitiveLongIntMap [135476,135495]
    VariableDeclarationFragment [135496,135559]
        SimpleName: heldExclusiveLocks [135496,135514]
        ArrayAccess [135517,135559]
            SimpleName: exclusiveLockCounts [135517,135536]
            MethodInvocation [135537,135558]
                METHOD_INVOCATION_RECEIVER [135537,135549]
                    SimpleName: resourceType [135537,135549]
                SimpleName: typeId [135550,135556]
to
Block [135619,137938]
at 2
===
move-tree
---
ReturnStatement [137948,137960]
    BooleanLiteral: true [137955,137959]
to
Block [135619,137938]
at 8
===
move-tree
---
PrimitiveType: long [61391,61395]
to
SingleVariableDeclaration [61391,61411]
at 0
===
update-node
---
SimpleName: resourceIds [61400,61411]
replace resourceIds by resourceId
===
move-tree
---
PrimitiveType: long [61838,61842]
to
SingleVariableDeclaration [61838,61858]
at 0
===
update-node
---
SimpleName: resourceIds [61847,61858]
replace resourceIds by resourceId
===
move-tree
---
PrimitiveType: long [62072,62076]
to
SingleVariableDeclaration [62072,62092]
at 0
===
update-node
---
SimpleName: resourceIds [62081,62092]
replace resourceIds by resourceId
===
move-tree
---
PrimitiveType: long [62266,62270]
to
SingleVariableDeclaration [62266,62286]
at 0
===
update-node
---
SimpleName: resourceIds [62275,62286]
replace resourceIds by resourceId
===
move-tree
---
InfixExpression [69114,69130]
    SimpleName: resource [69114,69122]
    INFIX_EXPRESSION_OPERATOR: != [69123,69125]
    NullLiteral [69126,69130]
to
IfStatement [67279,67587]
at 0
===
move-tree
---
Block [69146,69235]
    ExpressionStatement [69165,69193]
        MethodInvocation [69165,69192]
            METHOD_INVOCATION_RECEIVER [69165,69173]
                SimpleName: resource [69165,69173]
            SimpleName: acquireReference [69174,69190]
    ContinueStatement [69211,69220]
to
IfStatement [67279,67587]
at 1
===
move-tree
---
Block [67678,68082]
    VariableDeclarationStatement [67693,67746]
        SimpleType [67693,67705]
            SimpleName: LockResource [67693,67705]
        VariableDeclarationFragment [67706,67745]
            SimpleName: resource [67706,67714]
            MethodInvocation [67717,67745]
                METHOD_INVOCATION_RECEIVER [67717,67727]
                    SimpleName: localLocks [67717,67727]
                SimpleName: get [67728,67731]
                METHOD_INVOCATION_ARGUMENTS [67733,67743]
                    SimpleName: resourceId [67733,67743]
    IfStatement [67760,67885]
        InfixExpression [67764,67780]
            SimpleName: resource [67764,67772]
            INFIX_EXPRESSION_OPERATOR: != [67773,67775]
            NullLiteral [67776,67780]
        Block [67796,67885]
            ExpressionStatement [67815,67843]
                MethodInvocation [67815,67842]
                    METHOD_INVOCATION_RECEIVER [67815,67823]
                        SimpleName: resource [67815,67823]
                    SimpleName: acquireReference [67824,67840]
            ContinueStatement [67861,67870]
    ExpressionStatement [67901,67957]
        Assignment [67901,67956]
            SimpleName: resource [67901,67909]
            ASSIGNMENT_OPERATOR: = [67910,67911]
            ClassInstanceCreation [67912,67956]
                SimpleType [67916,67928]
                    SimpleName: LockResource [67916,67928]
                SimpleName: resourceType [67930,67942]
                SimpleName: resourceId [67944,67954]
    ExpressionStatement [67971,68020]
        MethodInvocation [67971,68019]
            METHOD_INVOCATION_RECEIVER [67971,67978]
                SimpleName: manager [67971,67978]
            SimpleName: getReadLock [67979,67990]
            METHOD_INVOCATION_ARGUMENTS [67992,68017]
                SimpleName: resource [67992,68000]
                SimpleName: lockTransaction [68002,68017]
    ExpressionStatement [68034,68071]
        MethodInvocation [68034,68070]
            METHOD_INVOCATION_RECEIVER [68034,68044]
                SimpleName: localLocks [68034,68044]
            SimpleName: put [68045,68048]
            METHOD_INVOCATION_ARGUMENTS [68049,68069]
                SimpleName: resourceId [68049,68059]
                SimpleName: resource [68061,68069]
to
IfStatement [67279,67587]
at 2
===
move-tree
---
InfixExpression [69923,69939]
    SimpleName: resource [69923,69931]
    INFIX_EXPRESSION_OPERATOR: != [69932,69934]
    NullLiteral [69935,69939]
to
IfStatement [67868,68175]
at 0
===
move-tree
---
Block [69955,70044]
    ExpressionStatement [69974,70002]
        MethodInvocation [69974,70001]
            METHOD_INVOCATION_RECEIVER [69974,69982]
                SimpleName: resource [69974,69982]
            SimpleName: acquireReference [69983,69999]
    ContinueStatement [70020,70029]
to
IfStatement [67868,68175]
at 1
===
move-tree
---
Block [68351,68756]
    VariableDeclarationStatement [68366,68419]
        SimpleType [68366,68378]
            SimpleName: LockResource [68366,68378]
        VariableDeclarationFragment [68379,68418]
            SimpleName: resource [68379,68387]
            MethodInvocation [68390,68418]
                METHOD_INVOCATION_RECEIVER [68390,68400]
                    SimpleName: localLocks [68390,68400]
                SimpleName: get [68401,68404]
                METHOD_INVOCATION_ARGUMENTS [68406,68416]
                    SimpleName: resourceId [68406,68416]
    IfStatement [68433,68558]
        InfixExpression [68437,68453]
            SimpleName: resource [68437,68445]
            INFIX_EXPRESSION_OPERATOR: != [68446,68448]
            NullLiteral [68449,68453]
        Block [68469,68558]
            ExpressionStatement [68488,68516]
                MethodInvocation [68488,68515]
                    METHOD_INVOCATION_RECEIVER [68488,68496]
                        SimpleName: resource [68488,68496]
                    SimpleName: acquireReference [68497,68513]
            ContinueStatement [68534,68543]
    ExpressionStatement [68574,68630]
        Assignment [68574,68629]
            SimpleName: resource [68574,68582]
            ASSIGNMENT_OPERATOR: = [68583,68584]
            ClassInstanceCreation [68585,68629]
                SimpleType [68589,68601]
                    SimpleName: LockResource [68589,68601]
                SimpleName: resourceType [68603,68615]
                SimpleName: resourceId [68617,68627]
    ExpressionStatement [68644,68694]
        MethodInvocation [68644,68693]
            METHOD_INVOCATION_RECEIVER [68644,68651]
                SimpleName: manager [68644,68651]
            SimpleName: getWriteLock [68652,68664]
            METHOD_INVOCATION_ARGUMENTS [68666,68691]
                SimpleName: resource [68666,68674]
                SimpleName: lockTransaction [68676,68691]
    ExpressionStatement [68708,68745]
        MethodInvocation [68708,68744]
            METHOD_INVOCATION_RECEIVER [68708,68718]
                SimpleName: localLocks [68708,68718]
            SimpleName: put [68719,68722]
            METHOD_INVOCATION_ARGUMENTS [68723,68743]
                SimpleName: resourceId [68723,68733]
                SimpleName: resource [68735,68743]
to
IfStatement [67868,68175]
at 2
===
move-tree
---
InfixExpression [67764,67780]
    SimpleName: resource [67764,67772]
    INFIX_EXPRESSION_OPERATOR: != [67773,67775]
    NullLiteral [67776,67780]
to
IfStatement [68459,68943]
at 0
===
move-tree
---
Block [67796,67885]
    ExpressionStatement [67815,67843]
        MethodInvocation [67815,67842]
            METHOD_INVOCATION_RECEIVER [67815,67823]
                SimpleName: resource [67815,67823]
            SimpleName: acquireReference [67824,67840]
    ContinueStatement [67861,67870]
to
IfStatement [68459,68943]
at 1
===
insert-node
---
Block [68595,68943]
to
IfStatement [68459,68943]
at 2
===
move-tree
---
InfixExpression [68437,68453]
    SimpleName: resource [68437,68445]
    INFIX_EXPRESSION_OPERATOR: != [68446,68448]
    NullLiteral [68449,68453]
to
IfStatement [69221,69704]
at 0
===
move-tree
---
Block [68469,68558]
    ExpressionStatement [68488,68516]
        MethodInvocation [68488,68515]
            METHOD_INVOCATION_RECEIVER [68488,68496]
                SimpleName: resource [68488,68496]
            SimpleName: acquireReference [68497,68513]
    ContinueStatement [68534,68543]
to
IfStatement [69221,69704]
at 1
===
insert-node
---
Block [69357,69704]
to
IfStatement [69221,69704]
at 2
===
insert-tree
---
Block [70532,70565]
    ReturnStatement [70547,70554]
to
IfStatement [71331,71425]
at 1
===
move-tree
---
SimpleType [115509,115522]
    SimpleName: AtomicInteger [115509,115522]
to
VariableDeclarationStatement [109629,109687]
at 0
===
insert-node
---
VariableDeclarationFragment [109643,109686]
to
VariableDeclarationStatement [109629,109687]
at 1
===
insert-tree
---
InfixExpression [109701,109724]
    SimpleName: preExistingLock [109701,109716]
    INFIX_EXPRESSION_OPERATOR: != [109717,109719]
    NullLiteral [109720,109724]
to
IfStatement [109697,110307]
at 0
===
insert-tree
---
Block [109736,109880]
    ExpressionStatement [109835,109869]
        MethodInvocation [109835,109868]
            METHOD_INVOCATION_RECEIVER [109835,109850]
                SimpleName: preExistingLock [109835,109850]
            SimpleName: incrementAndGet [109851,109866]
to
IfStatement [109697,110307]
at 1
===
insert-node
---
IfStatement [109895,110307]
to
IfStatement [109697,110307]
at 2
===
move-tree
---
SimpleType [115265,115278]
    SimpleName: AtomicInteger [115265,115278]
to
VariableDeclarationStatement [110572,110630]
at 0
===
insert-node
---
VariableDeclarationFragment [110586,110629]
to
VariableDeclarationStatement [110572,110630]
at 1
===
insert-tree
---
InfixExpression [110644,110667]
    SimpleName: preExistingLock [110644,110659]
    INFIX_EXPRESSION_OPERATOR: != [110660,110662]
    NullLiteral [110663,110667]
to
IfStatement [110640,111257]
at 0
===
insert-tree
---
Block [110679,110823]
    ExpressionStatement [110778,110812]
        MethodInvocation [110778,110811]
            METHOD_INVOCATION_RECEIVER [110778,110793]
                SimpleName: preExistingLock [110778,110793]
            SimpleName: incrementAndGet [110794,110809]
to
IfStatement [110640,111257]
at 1
===
insert-node
---
IfStatement [110838,111257]
to
IfStatement [110640,111257]
at 2
===
move-tree
---
InfixExpression [135700,135715]
    SimpleName: heldCount [135700,135709]
    INFIX_EXPRESSION_OPERATOR: != [135710,135712]
    PrefixExpression [135713,135715]
        PREFIX_EXPRESSION_OPERATOR: - [135713,135714]
        NumberLiteral: 1 [135714,135715]
to
IfStatement [131137,131370]
at 0
===
move-tree
---
InfixExpression [131140,131155]
    SimpleName: heldCount [131140,131149]
    INFIX_EXPRESSION_OPERATOR: != [131150,131152]
    PrefixExpression [131153,131155]
        PREFIX_EXPRESSION_OPERATOR: - [131153,131154]
        NumberLiteral: 1 [131154,131155]
to
IfStatement [135697,135935]
at 0
===
insert-node
---
Block [140519,140833]
to
ForStatement [150219,150345]
at 2
===
update-node
---
TextElement: this operates under the guarantee that there will be no exclusive locks held by this client, and so it can remove [151564,151677]
replace this operates under the guarantee that there will be no exclusive locks held by this client, and so it can remove by This operates under the guarantee that there will be no exclusive locks held by this client, and so it can remove
===
update-node
---
TextElement: this will not downgrade exclusive locks to shared locks (if the user holds both), instead, it will release the [153467,153577]
replace this will not downgrade exclusive locks to shared locks (if the user holds both), instead, it will release the by This will not downgrade exclusive locks to shared locks (if the user holds both), instead, it will release the
===
insert-tree
---
ReturnStatement [68548,68560]
    BooleanLiteral: true [68555,68559]
to
Block [67796,67885]
at 1
===
move-tree
---
ExpressionStatement [69251,69307]
    Assignment [69251,69306]
        SimpleName: resource [69251,69259]
        ASSIGNMENT_OPERATOR: = [69260,69261]
        ClassInstanceCreation [69262,69306]
            SimpleType [69266,69278]
                SimpleName: LockResource [69266,69278]
            SimpleName: resourceType [69280,69292]
            SimpleName: resourceId [69294,69304]
to
Block [68595,68943]
at 0
===
move-tree
---
IfStatement [69321,69538]
    MethodInvocation [69324,69373]
        METHOD_INVOCATION_RECEIVER [69324,69331]
            SimpleName: manager [69324,69331]
        SimpleName: tryWriteLock [69332,69344]
        METHOD_INVOCATION_ARGUMENTS [69346,69371]
            SimpleName: resource [69346,69354]
            SimpleName: lockTransaction [69356,69371]
    Block [69388,69459]
        ExpressionStatement [69407,69444]
            MethodInvocation [69407,69443]
                METHOD_INVOCATION_RECEIVER [69407,69417]
                    SimpleName: localLocks [69407,69417]
                SimpleName: put [69418,69421]
                METHOD_INVOCATION_ARGUMENTS [69422,69442]
                    SimpleName: resourceId [69422,69432]
                    SimpleName: resource [69434,69442]
    Block [69491,69538]
        ReturnStatement [69510,69523]
            BooleanLiteral: false [69517,69522]
to
Block [68595,68943]
at 1
===
insert-tree
---
ReturnStatement [69310,69322]
    BooleanLiteral: true [69317,69321]
to
Block [68469,68558]
at 1
===
move-tree
---
ExpressionStatement [70060,70116]
    Assignment [70060,70115]
        SimpleName: resource [70060,70068]
        ASSIGNMENT_OPERATOR: = [70069,70070]
        ClassInstanceCreation [70071,70115]
            SimpleType [70075,70087]
                SimpleName: LockResource [70075,70087]
            SimpleName: resourceType [70089,70101]
            SimpleName: resourceId [70103,70113]
to
Block [69357,69704]
at 0
===
move-tree
---
IfStatement [70130,70346]
    MethodInvocation [70133,70181]
        METHOD_INVOCATION_RECEIVER [70133,70140]
            SimpleName: manager [70133,70140]
        SimpleName: tryReadLock [70141,70152]
        METHOD_INVOCATION_ARGUMENTS [70154,70179]
            SimpleName: resource [70154,70162]
            SimpleName: lockTransaction [70164,70179]
    Block [70196,70267]
        ExpressionStatement [70215,70252]
            MethodInvocation [70215,70251]
                METHOD_INVOCATION_RECEIVER [70215,70225]
                    SimpleName: localLocks [70215,70225]
                SimpleName: put [70226,70229]
                METHOD_INVOCATION_ARGUMENTS [70230,70250]
                    SimpleName: resourceId [70230,70240]
                    SimpleName: resource [70242,70250]
    Block [70299,70346]
        ReturnStatement [70318,70331]
            BooleanLiteral: false [70325,70330]
to
Block [69357,69704]
at 1
===
insert-node
---
ReturnStatement [70041,70048]
to
Block [70775,70818]
at 0
===
insert-node
---
EnhancedForStatement [99319,99449]
to
Block [103388,103570]
at 0
===
insert-node
---
EnhancedForStatement [100730,100857]
to
Block [104715,104894]
at 0
===
insert-node
---
SimpleName: preExistingLock [109643,109658]
to
VariableDeclarationFragment [109643,109686]
at 0
===
insert-node
---
MethodInvocation [109661,109686]
to
VariableDeclarationFragment [109643,109686]
at 1
===
insert-tree
---
MethodInvocation [109900,109947]
    SimpleName: getReadLockOnMaster [109900,109919]
    METHOD_INVOCATION_ARGUMENTS [109921,109945]
        SimpleName: resourceType [109921,109933]
        SimpleName: resourceId [109935,109945]
to
IfStatement [109895,110307]
at 0
===
insert-node
---
Block [109959,110307]
to
IfStatement [109895,110307]
at 1
===
insert-node
---
SimpleName: preExistingLock [110586,110601]
to
VariableDeclarationFragment [110586,110629]
at 0
===
insert-node
---
MethodInvocation [110604,110629]
to
VariableDeclarationFragment [110586,110629]
at 1
===
insert-tree
---
MethodInvocation [110843,110895]
    SimpleName: acquireExclusiveOnMaster [110843,110867]
    METHOD_INVOCATION_ARGUMENTS [110869,110893]
        SimpleName: resourceType [110869,110881]
        SimpleName: resourceId [110883,110893]
to
IfStatement [110838,111257]
at 0
===
insert-node
---
Block [110907,111257]
to
IfStatement [110838,111257]
at 1
===
insert-node
---
ReturnStatement [122333,122340]
to
Block [127499,127704]
at 1
===
insert-node
---
ReturnStatement [122784,122791]
to
Block [127849,128189]
at 1
===
insert-node
---
ReturnStatement [125650,125657]
to
Block [131170,131370]
at 1
===
move-tree
---
ReturnStatement [69559,69571]
    BooleanLiteral: true [69566,69570]
to
Block [132965,133165]
at 1
===
move-tree
---
ReturnStatement [70367,70379]
    BooleanLiteral: true [70374,70378]
to
Block [135730,135935]
at 1
===
insert-tree
---
ReturnStatement [129281,129293]
    BooleanLiteral: true [129288,129292]
to
Block [136015,136355]
at 1
===
insert-node
---
ReturnStatement [130991,130998]
to
Block [138256,138299]
at 0
===
insert-node
---
ReturnStatement [131518,131525]
to
Block [138894,138937]
at 0
===
insert-node
---
VariableDeclarationStatement [139922,140146]
to
Block [149714,150004]
at 0
===
insert-node
---
ThrowStatement [140191,140238]
to
Block [149714,150004]
at 2
===
update-node
---
PrimitiveType: int [150225,150228]
replace int by boolean
===
insert-node
---
VariableDeclarationStatement [140534,140557]
to
Block [140519,140833]
at 0
===
insert-node
---
IfStatement [140571,140732]
to
Block [140519,140833]
at 1
===
move-tree
---
ExpressionStatement [150282,150334]
    MethodInvocation [150282,150333]
        METHOD_INVOCATION_RECEIVER [150282,150311]
            MethodInvocation [150282,150311]
                METHOD_INVOCATION_RECEIVER [150282,150284]
                    SimpleName: sb [150282,150284]
                SimpleName: append [150285,150291]
                METHOD_INVOCATION_ARGUMENTS [150293,150309]
                    ConditionalExpression [150293,150309]
                        InfixExpression [150293,150298]
                            SimpleName: i [150293,150294]
                            INFIX_EXPRESSION_OPERATOR: > [150295,150296]
                            NumberLiteral: 0 [150297,150298]
                        StringLiteral: "," [150301,150304]
                        StringLiteral: "" [150307,150309]
        SimpleName: append [150312,150318]
        METHOD_INVOCATION_ARGUMENTS [150320,150331]
            MethodInvocation [150320,150331]
                METHOD_INVOCATION_RECEIVER [150320,150324]
                    SimpleName: iter [150320,150324]
                SimpleName: next [150325,150329]
to
Block [140519,140833]
at 2
===
insert-tree
---
ExpressionStatement [140808,140822]
    Assignment [140808,140821]
        SimpleName: first [140808,140813]
        ASSIGNMENT_OPERATOR: = [140814,140815]
        BooleanLiteral: false [140816,140821]
to
Block [140519,140833]
at 3
===
move-tree
---
Block [70196,70267]
    ExpressionStatement [70215,70252]
        MethodInvocation [70215,70251]
            METHOD_INVOCATION_RECEIVER [70215,70225]
                SimpleName: localLocks [70215,70225]
            SimpleName: put [70226,70229]
            METHOD_INVOCATION_ARGUMENTS [70230,70250]
                SimpleName: resourceId [70230,70240]
                SimpleName: resource [70242,70250]
to
IfStatement [69321,69538]
at 1
===
move-tree
---
Block [69388,69459]
    ExpressionStatement [69407,69444]
        MethodInvocation [69407,69443]
            METHOD_INVOCATION_RECEIVER [69407,69417]
                SimpleName: localLocks [69407,69417]
            SimpleName: put [69418,69421]
            METHOD_INVOCATION_ARGUMENTS [69422,69442]
                SimpleName: resourceId [69422,69432]
                SimpleName: resource [69434,69442]
to
IfStatement [70130,70346]
at 1
===
insert-tree
---
SingleVariableDeclaration [99325,99340]
    PrimitiveType: long [99325,99329]
    SimpleName: resourceId [99330,99340]
to
EnhancedForStatement [99319,99449]
at 0
===
insert-node
---
SimpleName: resourceIds [99343,99354]
to
EnhancedForStatement [99319,99449]
at 1
===
insert-node
---
Block [99370,99449]
to
EnhancedForStatement [99319,99449]
at 2
===
insert-tree
---
SingleVariableDeclaration [100736,100751]
    PrimitiveType: long [100736,100740]
    SimpleName: resourceId [100741,100751]
to
EnhancedForStatement [100730,100857]
at 0
===
insert-node
---
SimpleName: resourceIds [100754,100765]
to
EnhancedForStatement [100730,100857]
at 1
===
insert-node
---
Block [100781,100857]
to
EnhancedForStatement [100730,100857]
at 2
===
update-node
---
SimpleName: resourceIds [108639,108650]
replace resourceIds by resourceId
===
move-tree
---
METHOD_INVOCATION_RECEIVER [148819,148826]
    SimpleName: lockMap [148819,148826]
to
MethodInvocation [109661,109686]
at 0
===
insert-node
---
SimpleName: get [109669,109672]
to
MethodInvocation [109661,109686]
at 1
===
move-tree
---
METHOD_INVOCATION_ARGUMENTS [151282,151292]
    SimpleName: resourceId [151282,151292]
to
MethodInvocation [109661,109686]
at 2
===
insert-node
---
IfStatement [109974,110296]
to
Block [109959,110307]
at 0
===
move-tree
---
METHOD_INVOCATION_RECEIVER [153098,153105]
    SimpleName: lockMap [153098,153105]
to
MethodInvocation [110604,110629]
at 0
===
insert-node
---
SimpleName: get [110612,110615]
to
MethodInvocation [110604,110629]
at 1
===
move-tree
---
METHOD_INVOCATION_ARGUMENTS [153052,153062]
    SimpleName: resourceId [153052,153062]
to
MethodInvocation [110604,110629]
at 2
===
insert-node
---
IfStatement [110922,111246]
to
Block [110907,111257]
at 0
===
insert-tree
---
SimpleType [139922,139928]
    SimpleName: String [139922,139928]
to
VariableDeclarationStatement [139922,140146]
at 0
===
insert-node
---
VariableDeclarationFragment [139929,140145]
to
VariableDeclarationStatement [139922,140146]
at 1
===
insert-node
---
ClassInstanceCreation [140197,140237]
to
ThrowStatement [140191,140238]
at 0
===
update-node
---
SimpleName: i [150229,150230]
replace i by first
===
insert-node
---
BooleanLiteral: true [140486,140490]
to
VariableDeclarationFragment [150229,150234]
at 1
===
insert-node
---
PrimitiveType: int [140534,140537]
to
VariableDeclarationStatement [140534,140557]
at 0
===
insert-node
---
VariableDeclarationFragment [140538,140556]
to
VariableDeclarationStatement [140534,140557]
at 1
===
insert-tree
---
InfixExpression [140574,140586]
    SimpleName: next [140574,140578]
    INFIX_EXPRESSION_OPERATOR: == [140579,140581]
    SimpleName: myId [140582,140586]
to
IfStatement [140571,140732]
at 0
===
move-tree
---
Block [71382,71425]
    ContinueStatement [71401,71410]
to
IfStatement [140571,140732]
at 1
===
insert-tree
---
ReturnStatement [68826,68838]
    BooleanLiteral: true [68833,68837]
to
Block [70196,70267]
at 1
===
insert-tree
---
ReturnStatement [69587,69599]
    BooleanLiteral: true [69594,69598]
to
Block [69388,69459]
at 1
===
move-tree
---
ExpressionStatement [103403,103449]
    MethodInvocation [103403,103448]
        METHOD_INVOCATION_RECEIVER [103403,103410]
            SimpleName: session [103403,103410]
        SimpleName: acquireExclusive [103411,103427]
        METHOD_INVOCATION_ARGUMENTS [103429,103446]
            SimpleName: type [103429,103433]
            SimpleName: resourceIds [103435,103446]
to
Block [99370,99449]
at 0
===
move-tree
---
ExpressionStatement [104730,104773]
    MethodInvocation [104730,104772]
        METHOD_INVOCATION_RECEIVER [104730,104737]
            SimpleName: session [104730,104737]
        SimpleName: acquireShared [104738,104751]
        METHOD_INVOCATION_ARGUMENTS [104753,104770]
            SimpleName: type [104753,104757]
            SimpleName: resourceIds [104759,104770]
to
Block [100781,100857]
at 0
===
insert-node
---
MethodInvocation [109979,110027]
to
IfStatement [109974,110296]
at 0
===
move-tree
---
Block [113974,114069]
    ExpressionStatement [113997,114050]
        MethodInvocation [113997,114049]
            METHOD_INVOCATION_RECEIVER [113997,114004]
                SimpleName: lockMap [113997,114004]
            SimpleName: put [114005,114008]
            METHOD_INVOCATION_ARGUMENTS [114010,114047]
                ArrayAccess [114010,114023]
                    SimpleName: untakenIds [114010,114020]
                    SimpleName: i [114021,114022]
                ClassInstanceCreation [114025,114047]
                    SimpleType [114029,114042]
                        SimpleName: AtomicInteger [114029,114042]
                    NumberLiteral: 1 [114044,114045]
to
IfStatement [109974,110296]
at 1
===
insert-node
---
Block [110159,110296]
to
IfStatement [109974,110296]
at 2
===
insert-node
---
MethodInvocation [110927,110978]
to
IfStatement [110922,111246]
at 0
===
move-tree
---
Block [114885,114980]
    ExpressionStatement [114908,114961]
        MethodInvocation [114908,114960]
            METHOD_INVOCATION_RECEIVER [114908,114915]
                SimpleName: lockMap [114908,114915]
            SimpleName: put [114916,114919]
            METHOD_INVOCATION_ARGUMENTS [114921,114958]
                ArrayAccess [114921,114934]
                    SimpleName: untakenIds [114921,114931]
                    SimpleName: i [114932,114933]
                ClassInstanceCreation [114936,114958]
                    SimpleType [114940,114953]
                        SimpleName: AtomicInteger [114940,114953]
                    NumberLiteral: 1 [114955,114956]
to
IfStatement [110922,111246]
at 1
===
insert-node
---
Block [111110,111246]
to
IfStatement [110922,111246]
at 2
===
insert-node
---
SimpleName: message [139929,139936]
to
VariableDeclarationFragment [139929,140145]
at 0
===
move-tree
---
InfixExpression [149797,149990]
    ThisExpression [149797,149801]
    INFIX_EXPRESSION_OPERATOR: + [149802,149803]
    StringLiteral: " can't acquire " [149804,149821]
    SimpleName: lock [149824,149828]
    StringLiteral: " on " [149831,149837]
    SimpleName: type [149840,149844]
    StringLiteral: "(" [149847,149850]
    SimpleName: resourceId [149851,149861]
    StringLiteral: "), because holders of that lock " [149862,149896]
    StringLiteral: "are waiting for " [149920,149938]
    ThisExpression [149941,149945]
    StringLiteral: ".\n Wait list:" [149948,149964]
    MethodInvocation [149967,149990]
        METHOD_INVOCATION_RECEIVER [149967,149971]
            SimpleName: lock [149967,149971]
        SimpleName: describeWaitList [149972,149988]
to
VariableDeclarationFragment [139929,140145]
at 1
===
move-tree
---
SimpleType [149770,149795]
    SimpleName: DeadlockDetectedException [149770,149795]
to
ClassInstanceCreation [140197,140237]
at 0
===
insert-node
---
SimpleName: message [140228,140235]
to
ClassInstanceCreation [140197,140237]
at 1
===
insert-node
---
SimpleName: next [140538,140542]
to
VariableDeclarationFragment [140538,140556]
at 0
===
move-tree
---
MethodInvocation [150320,150331]
    METHOD_INVOCATION_RECEIVER [150320,150324]
        SimpleName: iter [150320,150324]
    SimpleName: next [150325,150329]
to
VariableDeclarationFragment [140538,140556]
at 1
===
update-node
---
SimpleName: resourceIds [109177,109188]
replace resourceIds by resourceId
===
move-tree
---
SimpleName: resourceIds [109177,109188]
to
METHOD_INVOCATION_ARGUMENTS [109013,109190]
at 4
===
move-tree
---
METHOD_INVOCATION_RECEIVER [113828,113834]
    SimpleName: client [113828,113834]
to
MethodInvocation [109979,110027]
at 0
===
insert-node
---
SimpleName: trySharedLock [109986,109999]
to
MethodInvocation [109979,110027]
at 1
===
insert-tree
---
METHOD_INVOCATION_ARGUMENTS [110001,110025]
    SimpleName: resourceType [110001,110013]
    SimpleName: resourceId [110015,110025]
to
MethodInvocation [109979,110027]
at 2
===
insert-node
---
ThrowStatement [110178,110279]
to
Block [110159,110296]
at 0
===
move-tree
---
METHOD_INVOCATION_RECEIVER [114736,114742]
    SimpleName: client [114736,114742]
to
MethodInvocation [110927,110978]
at 0
===
insert-node
---
SimpleName: tryExclusiveLock [110934,110950]
to
MethodInvocation [110927,110978]
at 1
===
insert-tree
---
METHOD_INVOCATION_ARGUMENTS [110952,110976]
    SimpleName: resourceType [110952,110964]
    SimpleName: resourceId [110966,110976]
to
MethodInvocation [110927,110978]
at 2
===
insert-node
---
ThrowStatement [111129,111231]
to
Block [111110,111246]
at 0
===
insert-node
---
SimpleName: next [140787,140791]
to
METHOD_INVOCATION_ARGUMENTS [150320,150331]
at 0
===
move-tree
---
METHOD_INVOCATION_RECEIVER [104730,104737]
    SimpleName: session [104730,104737]
to
MethodInvocation [103403,103448]
at 0
===
move-tree
---
METHOD_INVOCATION_RECEIVER [103403,103410]
    SimpleName: session [103403,103410]
to
MethodInvocation [104730,104772]
at 0
===
insert-node
---
ClassInstanceCreation [110184,110278]
to
ThrowStatement [110178,110279]
at 0
===
insert-node
---
ClassInstanceCreation [111135,111230]
to
ThrowStatement [111129,111231]
at 0
===
update-node
---
SimpleName: anyVararg [171073,171082]
replace anyVararg by anyLong
===
update-node
---
SimpleName: resourceIds [103435,103446]
replace resourceIds by resourceId
===
update-node
---
SimpleName: resourceIds [104759,104770]
replace resourceIds by resourceId
===
move-tree
---
SimpleType [114145,114175]
    SimpleName: LocalDeadlockDetectedException [114145,114175]
to
ClassInstanceCreation [110184,110278]
at 0
===
insert-node
---
SimpleName: client [110220,110226]
to
ClassInstanceCreation [110184,110278]
at 1
===
insert-node
---
SimpleName: localLockManager [110228,110244]
to
ClassInstanceCreation [110184,110278]
at 2
===
insert-node
---
SimpleName: resourceType [110246,110258]
to
ClassInstanceCreation [110184,110278]
at 3
===
insert-node
---
SimpleName: resourceId [110260,110270]
to
ClassInstanceCreation [110184,110278]
at 4
===
insert-node
---
SimpleName: READ [110272,110276]
to
ClassInstanceCreation [110184,110278]
at 5
===
move-tree
---
SimpleType [115056,115086]
    SimpleName: LocalDeadlockDetectedException [115056,115086]
to
ClassInstanceCreation [111135,111230]
at 0
===
insert-node
---
SimpleName: client [111171,111177]
to
ClassInstanceCreation [111135,111230]
at 1
===
insert-node
---
SimpleName: localLockManager [111179,111195]
to
ClassInstanceCreation [111135,111230]
at 2
===
insert-node
---
SimpleName: resourceType [111197,111209]
to
ClassInstanceCreation [111135,111230]
at 3
===
insert-node
---
SimpleName: resourceId [111211,111221]
to
ClassInstanceCreation [111135,111230]
at 4
===
insert-node
---
SimpleName: WRITE [111223,111228]
to
ClassInstanceCreation [111135,111230]
at 5
===
update-node
---
SimpleName: untakenIds [114010,114020]
replace untakenIds by resourceId
===
move-tree
---
SimpleName: untakenIds [114010,114020]
to
METHOD_INVOCATION_ARGUMENTS [114010,114047]
at 0
===
update-node
---
SimpleName: untakenIds [114921,114931]
replace untakenIds by resourceId
===
move-tree
---
SimpleName: untakenIds [114921,114931]
to
METHOD_INVOCATION_ARGUMENTS [114921,114958]
at 0
===
insert-tree
---
ReturnStatement [127876,127888]
    BooleanLiteral: true [127883,127887]
to
Block [133724,133925]
at 2
===
insert-node
---
ParenthesizedExpression [140757,140765]
to
ConditionalExpression [150293,150309]
at 0
===
insert-node
---
PrefixExpression [140758,140764]
to
ParenthesizedExpression [140757,140765]
at 0
===
insert-node
---
PREFIX_EXPRESSION_OPERATOR: ! [140758,140759]
to
PrefixExpression [140758,140764]
at 0
===
update-node
---
SimpleName: i [150293,150294]
replace i by first
===
move-tree
---
SimpleName: i [150293,150294]
to
PrefixExpression [140758,140764]
at 1
===
delete-tree
---
ImportDeclaration [107309,107333]
    QualifiedName: java.util.Arrays [107316,107332]
===
delete-tree
---
ImportDeclaration [110320,110347]
    QualifiedName: java.util.ArrayList [110327,110346]
===
delete-tree
---
ImportDeclaration [165692,165720]
    QualifiedName: org.mockito.Matchers [165699,165719]
===
delete-node
---
Modifier: public [991,997]
===
delete-node
---
TYPE_DECLARATION_KIND: interface [998,1007]
===
delete-node
---
SimpleName: Locking [1008,1015]
===
delete-node
---
PrimitiveType: void [1024,1028]
===
delete-node
---
SimpleName: acquireExclusive [1029,1045]
===
delete-tree
---
SingleVariableDeclaration [1066,1077]
    SingleVariableDeclaration [1066,1077]
        VARARGS_TYPE [1066,1074]
            PrimitiveType: long [1066,1070]
        SimpleName: id [1075,1077]
===
delete-node
---
MethodDeclaration [1024,1080]
===
delete-node
---
PrimitiveType: void [1086,1090]
===
delete-node
---
SimpleName: acquireShared [1091,1104]
===
delete-tree
---
SingleVariableDeclaration [1128,1139]
    SingleVariableDeclaration [1128,1139]
        VARARGS_TYPE [1128,1136]
            PrimitiveType: long [1128,1132]
        SimpleName: id [1137,1139]
===
delete-node
---
MethodDeclaration [1086,1142]
===
delete-node
---
PrimitiveType: void [1150,1154]
===
delete-node
---
SimpleName: releaseExclusive [1155,1171]
===
delete-tree
---
SingleVariableDeclaration [1192,1203]
    SingleVariableDeclaration [1192,1203]
        VARARGS_TYPE [1192,1200]
            PrimitiveType: long [1192,1196]
        SimpleName: id [1201,1203]
===
delete-node
---
MethodDeclaration [1150,1206]
===
delete-node
---
PrimitiveType: void [1212,1216]
===
delete-node
---
SimpleName: releaseShared [1217,1230]
===
delete-tree
---
SingleVariableDeclaration [1254,1265]
    SingleVariableDeclaration [1254,1265]
        VARARGS_TYPE [1254,1262]
            PrimitiveType: long [1254,1258]
        SimpleName: id [1263,1265]
===
delete-node
---
MethodDeclaration [1212,1268]
===
delete-node
---
TypeDeclaration [991,1271]
===
delete-node
---
Modifier: public [3993,3999]
===
delete-node
---
TYPE_DECLARATION_KIND: class [4000,4005]
===
delete-node
---
SimpleName: LockingStatementOperations [4006,4032]
===
delete-node
---
Dimension [18414,18416]
===
delete-node
---
ArrayType [18410,18416]
===
delete-node
---
Dimension [18621,18623]
===
delete-node
---
ArrayType [18617,18623]
===
delete-node
---
Dimension [18821,18823]
===
delete-node
---
ArrayType [18817,18823]
===
delete-node
---
Dimension [19013,19015]
===
delete-node
---
ArrayType [19009,19015]
===
delete-node
---
Modifier: public [23390,23396]
===
delete-node
---
TYPE_DECLARATION_KIND: class [23397,23402]
===
delete-node
---
SimpleName: OperationsFacade [23403,23419]
===
delete-node
---
VARARGS_TYPE [46787,46794]
===
delete-node
---
SingleVariableDeclaration [46787,46797]
===
delete-node
---
VARARGS_TYPE [46981,46988]
===
delete-node
---
SingleVariableDeclaration [46981,46991]
===
delete-node
---
VARARGS_TYPE [47175,47182]
===
delete-node
---
SingleVariableDeclaration [47175,47185]
===
delete-node
---
VARARGS_TYPE [47369,47376]
===
delete-node
---
SingleVariableDeclaration [47369,47379]
===
delete-node
---
Dimension [57722,57724]
===
delete-node
---
ArrayType [57718,57724]
===
delete-node
---
Dimension [57824,57826]
===
delete-node
---
ArrayType [57820,57826]
===
delete-node
---
Dimension [57927,57929]
===
delete-node
---
ArrayType [57923,57929]
===
delete-node
---
Dimension [58017,58019]
===
delete-node
---
ArrayType [58013,58019]
===
delete-node
---
Modifier: public [60092,60098]
===
delete-node
---
Modifier: public [60397,60403]
===
delete-node
---
Modifier: public [60743,60749]
===
delete-node
---
Modifier: public [61041,61047]
===
delete-node
---
VARARGS_TYPE [61391,61399]
===
delete-node
---
SingleVariableDeclaration [61391,61411]
===
delete-node
---
VARARGS_TYPE [61838,61846]
===
delete-node
---
SingleVariableDeclaration [61838,61858]
===
delete-node
---
VARARGS_TYPE [62072,62080]
===
delete-node
---
SingleVariableDeclaration [62072,62092]
===
delete-node
---
VARARGS_TYPE [62266,62274]
===
delete-node
---
SingleVariableDeclaration [62266,62286]
===
delete-tree
---
SingleVariableDeclaration [62394,62413]
    SingleVariableDeclaration [62394,62413]
        VARARGS_TYPE [62394,62401]
            PrimitiveType: long [62394,62398]
        SimpleName: resourceIds [62402,62413]
===
delete-tree
---
SingleVariableDeclaration [62527,62546]
    SingleVariableDeclaration [62527,62546]
        VARARGS_TYPE [62527,62534]
            PrimitiveType: long [62527,62531]
        SimpleName: resourceIds [62535,62546]
===
delete-tree
---
MethodDeclaration [62561,62627]
    Javadoc [62561,62593]
        TagElement [62565,62591]
            TextElement: Release all shared locks.  [62565,62591]
    PrimitiveType: void [62603,62607]
    SimpleName: releaseAllShared [62608,62624]
===
delete-tree
---
MethodDeclaration [62639,62711]
    Javadoc [62639,62674]
        TagElement [62643,62672]
            TextElement: Release all exclusive locks.  [62643,62672]
    PrimitiveType: void [62684,62688]
    SimpleName: releaseAllExclusive [62689,62708]
===
delete-tree
---
MarkerAnnotation [64345,64354]
    SimpleName: Override [64346,64354]
===
delete-node
---
Modifier: public [64360,64366]
===
delete-node
---
PrimitiveType: void [64367,64371]
===
delete-node
---
SimpleName: acquireShared [64372,64385]
===
delete-tree
---
SingleVariableDeclaration [64420,64439]
    SingleVariableDeclaration [64420,64439]
        VARARGS_TYPE [64420,64427]
            PrimitiveType: long [64420,64424]
        SimpleName: resourceIds [64428,64439]
===
delete-node
---
Block [64482,64490]
===
delete-node
---
MethodDeclaration [64345,64490]
===
delete-node
---
VARARGS_TYPE [64576,64583]
===
delete-node
---
SingleVariableDeclaration [64576,64595]
===
delete-node
---
Modifier: public [64669,64675]
===
delete-node
---
PrimitiveType: boolean [64676,64683]
===
delete-node
---
SimpleName: tryExclusiveLock [64684,64700]
===
delete-tree
---
SingleVariableDeclaration [64735,64754]
    SingleVariableDeclaration [64735,64754]
        VARARGS_TYPE [64735,64742]
            PrimitiveType: long [64735,64739]
        SimpleName: resourceIds [64743,64754]
===
delete-node
---
MethodDeclaration [64654,64793]
===
delete-node
---
VARARGS_TYPE [64879,64886]
===
delete-node
---
SingleVariableDeclaration [64879,64898]
===
delete-node
---
VARARGS_TYPE [65020,65027]
===
delete-node
---
SingleVariableDeclaration [65020,65039]
===
delete-node
---
VARARGS_TYPE [65141,65148]
===
delete-node
---
SingleVariableDeclaration [65141,65160]
===
delete-tree
---
MethodDeclaration [65184,65243]
    MarkerAnnotation [65184,65193]
        SimpleName: Override [65185,65193]
    Modifier: public [65199,65205]
    PrimitiveType: void [65206,65210]
    SimpleName: releaseAllShared [65211,65227]
    Block [65235,65243]
===
delete-tree
---
MethodDeclaration [65251,65313]
    MarkerAnnotation [65251,65260]
        SimpleName: Override [65252,65260]
    Modifier: public [65266,65272]
    PrimitiveType: void [65273,65277]
    SimpleName: releaseAllExclusive [65278,65297]
    Block [65305,65313]
===
delete-tree
---
SingleVariableDeclaration [67505,67524]
    SingleVariableDeclaration [67505,67524]
        VARARGS_TYPE [67505,67512]
            PrimitiveType: long [67505,67509]
        SimpleName: resourceIds [67513,67524]
===
delete-node
---
ContinueStatement [69211,69220]
===
delete-node
---
IfStatement [67760,67885]
===
delete-node
---
SimpleName: resourceIds [67655,67666]
===
delete-node
---
EnhancedForStatement [67631,68082]
===
delete-tree
---
SingleVariableDeclaration [68175,68194]
    SingleVariableDeclaration [68175,68194]
        VARARGS_TYPE [68175,68182]
            PrimitiveType: long [68175,68179]
        SimpleName: resourceIds [68183,68194]
===
delete-node
---
ContinueStatement [70020,70029]
===
delete-node
---
IfStatement [68433,68558]
===
delete-node
---
SimpleName: resourceIds [68328,68339]
===
delete-node
---
EnhancedForStatement [68304,68756]
===
delete-node
---
ContinueStatement [67861,67870]
===
delete-node
---
IfStatement [69110,69235]
===
delete-tree
---
SingleVariableDeclaration [68852,68871]
    SingleVariableDeclaration [68852,68871]
        VARARGS_TYPE [68852,68859]
            PrimitiveType: long [68852,68856]
        SimpleName: resourceIds [68860,68871]
===
delete-node
---
SimpleName: resourceIds [69005,69016]
===
delete-node
---
EnhancedForStatement [68981,69549]
===
delete-node
---
Block [68879,69578]
===
delete-node
---
ContinueStatement [68534,68543]
===
delete-node
---
IfStatement [69919,70044]
===
delete-tree
---
SingleVariableDeclaration [69664,69683]
    SingleVariableDeclaration [69664,69683]
        VARARGS_TYPE [69664,69671]
            PrimitiveType: long [69664,69668]
        SimpleName: resourceIds [69672,69683]
===
delete-node
---
SimpleName: resourceIds [69814,69825]
===
delete-node
---
EnhancedForStatement [69790,70357]
===
delete-node
---
Block [69691,70386]
===
delete-node
---
ContinueStatement [70794,70803]
===
delete-tree
---
SingleVariableDeclaration [70469,70488]
    SingleVariableDeclaration [70469,70488]
        VARARGS_TYPE [70469,70476]
            PrimitiveType: long [70469,70473]
        SimpleName: resourceIds [70477,70488]
===
delete-node
---
SimpleName: resourceIds [70619,70630]
===
delete-node
---
EnhancedForStatement [70595,70980]
===
delete-node
---
Block [70496,70987]
===
delete-tree
---
SingleVariableDeclaration [71073,71092]
    SingleVariableDeclaration [71073,71092]
        VARARGS_TYPE [71073,71080]
            PrimitiveType: long [71073,71077]
        SimpleName: resourceIds [71081,71092]
===
delete-node
---
SimpleName: resourceIds [71226,71237]
===
delete-node
---
EnhancedForStatement [71202,71588]
===
delete-node
---
Block [71100,71595]
===
delete-tree
---
MarkerAnnotation [71603,71612]
    SimpleName: Override [71604,71612]
===
delete-node
---
Modifier: public [71770,71776]
===
delete-node
---
PrimitiveType: void [71777,71781]
===
delete-node
---
SimpleName: releaseAllExclusive [71782,71801]
===
delete-node
---
Block [71809,71909]
===
delete-node
---
MethodDeclaration [71755,71909]
===
delete-node
---
Modifier: public [71932,71938]
===
delete-node
---
PrimitiveType: void [71939,71943]
===
delete-node
---
SimpleName: releaseAll [71944,71954]
===
delete-tree
---
Block [71962,72031]
    ExpressionStatement [71973,71995]
        MethodInvocation [71973,71994]
            SimpleName: releaseAllExclusive [71973,71992]
    ExpressionStatement [72005,72024]
        MethodInvocation [72005,72023]
            SimpleName: releaseAllShared [72005,72021]
===
delete-node
---
MethodDeclaration [71917,72031]
===
delete-tree
---
MethodDeclaration [78590,79336]
    MarkerAnnotation [78590,78595]
        SimpleName: Test [78591,78595]
    Modifier: public [78601,78607]
    PrimitiveType: void [78608,78612]
    SimpleName: shouldReleaseSharedLocks [78613,78637]
    SimpleType [78647,78656]
        SimpleName: Exception [78647,78656]
    Block [78662,79336]
        ExpressionStatement [78690,78727]
            MethodInvocation [78690,78726]
                METHOD_INVOCATION_RECEIVER [78690,78697]
                    SimpleName: clientA [78690,78697]
                SimpleName: acquireExclusive [78698,78714]
                METHOD_INVOCATION_ARGUMENTS [78716,78724]
                    SimpleName: NODE [78716,78720]
                    NumberLiteral: 1l [78722,78724]
        ExpressionStatement [78737,78771]
            MethodInvocation [78737,78770]
                METHOD_INVOCATION_RECEIVER [78737,78744]
                    SimpleName: clientA [78737,78744]
                SimpleName: acquireShared [78745,78758]
                METHOD_INVOCATION_ARGUMENTS [78760,78768]
                    SimpleName: NODE [78760,78764]
                    NumberLiteral: 2l [78766,78768]
        VariableDeclarationStatement [78825,78915]
            ParameterizedType [78825,78839]
                SimpleType [78825,78831]
                    SimpleName: Future [78825,78831]
                SimpleType [78832,78838]
                    SimpleName: Object [78832,78838]
            VariableDeclarationFragment [78840,78914]
                SimpleName: clientBLock [78840,78851]
                MethodInvocation [78854,78914]
                    METHOD_INVOCATION_RECEIVER [78854,78891]
                        MethodInvocation [78854,78891]
                            SimpleName: acquireExclusive [78854,78870]
                            METHOD_INVOCATION_ARGUMENTS [78872,78889]
                                SimpleName: clientB [78872,78879]
                                SimpleName: NODE [78881,78885]
                                NumberLiteral: 2l [78887,78889]
                    SimpleName: callAndAssertWaiting [78892,78912]
        ExpressionStatement [78948,78975]
            MethodInvocation [78948,78974]
                METHOD_INVOCATION_RECEIVER [78948,78955]
                    SimpleName: clientA [78948,78955]
                SimpleName: releaseAllShared [78956,78972]
        ExpressionStatement [79026,79067]
            MethodInvocation [79026,79066]
                SimpleName: assertNotWaiting [79026,79042]
                METHOD_INVOCATION_ARGUMENTS [79044,79064]
                    SimpleName: clientB [79044,79051]
                    SimpleName: clientBLock [79053,79064]
        ExpressionStatement [79113,79188]
            Assignment [79113,79187]
                SimpleName: clientBLock [79113,79124]
                ASSIGNMENT_OPERATOR: = [79125,79126]
                MethodInvocation [79127,79187]
                    METHOD_INVOCATION_RECEIVER [79127,79164]
                        MethodInvocation [79127,79164]
                            SimpleName: acquireExclusive [79127,79143]
                            METHOD_INVOCATION_ARGUMENTS [79145,79162]
                                SimpleName: clientB [79145,79152]
                                SimpleName: NODE [79154,79158]
                                NumberLiteral: 1l [79160,79162]
                    SimpleName: callAndAssertWaiting [79165,79185]
        ExpressionStatement [79221,79242]
            MethodInvocation [79221,79241]
                METHOD_INVOCATION_RECEIVER [79221,79228]
                    SimpleName: clientA [79221,79228]
                SimpleName: releaseAll [79229,79239]
        ExpressionStatement [79288,79329]
            MethodInvocation [79288,79328]
                SimpleName: assertNotWaiting [79288,79304]
                METHOD_INVOCATION_ARGUMENTS [79306,79326]
                    SimpleName: clientB [79306,79313]
                    SimpleName: clientBLock [79315,79326]
===
delete-tree
---
MethodDeclaration [79344,80096]
    MarkerAnnotation [79344,79349]
        SimpleName: Test [79345,79349]
    Modifier: public [79355,79361]
    PrimitiveType: void [79362,79366]
    SimpleName: shouldReleaseExclusiveLocks [79367,79394]
    SimpleType [79404,79413]
        SimpleName: Exception [79404,79413]
    Block [79419,80096]
        ExpressionStatement [79447,79481]
            MethodInvocation [79447,79480]
                METHOD_INVOCATION_RECEIVER [79447,79454]
                    SimpleName: clientA [79447,79454]
                SimpleName: acquireShared [79455,79468]
                METHOD_INVOCATION_ARGUMENTS [79470,79478]
                    SimpleName: NODE [79470,79474]
                    NumberLiteral: 1l [79476,79478]
        ExpressionStatement [79491,79528]
            MethodInvocation [79491,79527]
                METHOD_INVOCATION_RECEIVER [79491,79498]
                    SimpleName: clientA [79491,79498]
                SimpleName: acquireExclusive [79499,79515]
                METHOD_INVOCATION_ARGUMENTS [79517,79525]
                    SimpleName: NODE [79517,79521]
                    NumberLiteral: 2l [79523,79525]
        VariableDeclarationStatement [79582,79672]
            ParameterizedType [79582,79596]
                SimpleType [79582,79588]
                    SimpleName: Future [79582,79588]
                SimpleType [79589,79595]
                    SimpleName: Object [79589,79595]
            VariableDeclarationFragment [79597,79671]
                SimpleName: clientBLock [79597,79608]
                MethodInvocation [79611,79671]
                    METHOD_INVOCATION_RECEIVER [79611,79648]
                        MethodInvocation [79611,79648]
                            SimpleName: acquireExclusive [79611,79627]
                            METHOD_INVOCATION_ARGUMENTS [79629,79646]
                                SimpleName: clientB [79629,79636]
                                SimpleName: NODE [79638,79642]
                                NumberLiteral: 2l [79644,79646]
                    SimpleName: callAndAssertWaiting [79649,79669]
        ExpressionStatement [79705,79735]
            MethodInvocation [79705,79734]
                METHOD_INVOCATION_RECEIVER [79705,79712]
                    SimpleName: clientA [79705,79712]
                SimpleName: releaseAllExclusive [79713,79732]
        ExpressionStatement [79786,79827]
            MethodInvocation [79786,79826]
                SimpleName: assertNotWaiting [79786,79802]
                METHOD_INVOCATION_ARGUMENTS [79804,79824]
                    SimpleName: clientB [79804,79811]
                    SimpleName: clientBLock [79813,79824]
        ExpressionStatement [79873,79948]
            Assignment [79873,79947]
                SimpleName: clientBLock [79873,79884]
                ASSIGNMENT_OPERATOR: = [79885,79886]
                MethodInvocation [79887,79947]
                    METHOD_INVOCATION_RECEIVER [79887,79924]
                        MethodInvocation [79887,79924]
                            SimpleName: acquireExclusive [79887,79903]
                            METHOD_INVOCATION_ARGUMENTS [79905,79922]
                                SimpleName: clientB [79905,79912]
                                SimpleName: NODE [79914,79918]
                                NumberLiteral: 1l [79920,79922]
                    SimpleName: callAndAssertWaiting [79925,79945]
        ExpressionStatement [79981,80002]
            MethodInvocation [79981,80001]
                METHOD_INVOCATION_RECEIVER [79981,79988]
                    SimpleName: clientA [79981,79988]
                SimpleName: releaseAll [79989,79999]
        ExpressionStatement [80048,80089]
            MethodInvocation [80048,80088]
                SimpleName: assertNotWaiting [80048,80064]
                METHOD_INVOCATION_ARGUMENTS [80066,80086]
                    SimpleName: clientB [80066,80073]
                    SimpleName: clientBLock [80075,80086]
===
delete-tree
---
MethodDeclaration [88090,88824]
    MarkerAnnotation [88090,88095]
        SimpleName: Test [88091,88095]
    Modifier: public [88101,88107]
    PrimitiveType: void [88108,88112]
    SimpleName: releaseAllSharedLeavesExclusiveLocksInPlace [88113,88156]
    SimpleType [88166,88175]
        SimpleName: Exception [88166,88175]
    Block [88181,88824]
        ExpressionStatement [88209,88243]
            MethodInvocation [88209,88242]
                METHOD_INVOCATION_RECEIVER [88209,88216]
                    SimpleName: clientA [88209,88216]
                SimpleName: acquireShared [88217,88230]
                METHOD_INVOCATION_ARGUMENTS [88232,88240]
                    SimpleName: NODE [88232,88236]
                    NumberLiteral: 1l [88238,88240]
        ExpressionStatement [88253,88287]
            MethodInvocation [88253,88286]
                METHOD_INVOCATION_RECEIVER [88253,88260]
                    SimpleName: clientA [88253,88260]
                SimpleName: acquireShared [88261,88274]
                METHOD_INVOCATION_ARGUMENTS [88276,88284]
                    SimpleName: NODE [88276,88280]
                    NumberLiteral: 1l [88282,88284]
        ExpressionStatement [88297,88331]
            MethodInvocation [88297,88330]
                METHOD_INVOCATION_RECEIVER [88297,88304]
                    SimpleName: clientA [88297,88304]
                SimpleName: acquireShared [88305,88318]
                METHOD_INVOCATION_ARGUMENTS [88320,88328]
                    SimpleName: NODE [88320,88324]
                    NumberLiteral: 2l [88326,88328]
        ExpressionStatement [88341,88378]
            MethodInvocation [88341,88377]
                METHOD_INVOCATION_RECEIVER [88341,88348]
                    SimpleName: clientA [88341,88348]
                SimpleName: acquireExclusive [88349,88365]
                METHOD_INVOCATION_ARGUMENTS [88367,88375]
                    SimpleName: NODE [88367,88371]
                    NumberLiteral: 1l [88373,88375]
        VariableDeclarationStatement [88432,88519]
            ParameterizedType [88432,88446]
                SimpleType [88432,88438]
                    SimpleName: Future [88432,88438]
                SimpleType [88439,88445]
                    SimpleName: Object [88439,88445]
            VariableDeclarationFragment [88447,88518]
                SimpleName: clientBLock [88447,88458]
                MethodInvocation [88461,88518]
                    METHOD_INVOCATION_RECEIVER [88461,88495]
                        MethodInvocation [88461,88495]
                            SimpleName: acquireShared [88461,88474]
                            METHOD_INVOCATION_ARGUMENTS [88476,88493]
                                SimpleName: clientB [88476,88483]
                                SimpleName: NODE [88485,88489]
                                NumberLiteral: 1l [88491,88493]
                    SimpleName: callAndAssertWaiting [88496,88516]
        ExpressionStatement [88552,88579]
            MethodInvocation [88552,88578]
                METHOD_INVOCATION_RECEIVER [88552,88559]
                    SimpleName: clientA [88552,88559]
                SimpleName: releaseAllShared [88560,88576]
        ExpressionStatement [88639,88677]
            MethodInvocation [88639,88676]
                SimpleName: assertWaiting [88639,88652]
                METHOD_INVOCATION_ARGUMENTS [88654,88674]
                    SimpleName: clientB [88654,88661]
                    SimpleName: clientBLock [88663,88674]
        ExpressionStatement [88710,88747]
            MethodInvocation [88710,88746]
                METHOD_INVOCATION_RECEIVER [88710,88717]
                    SimpleName: clientA [88710,88717]
                SimpleName: releaseExclusive [88718,88734]
                METHOD_INVOCATION_ARGUMENTS [88736,88744]
                    SimpleName: NODE [88736,88740]
                    NumberLiteral: 1l [88742,88744]
        ExpressionStatement [88776,88817]
            MethodInvocation [88776,88816]
                SimpleName: assertNotWaiting [88776,88792]
                METHOD_INVOCATION_ARGUMENTS [88794,88814]
                    SimpleName: clientB [88794,88801]
                    SimpleName: clientBLock [88803,88814]
===
delete-tree
---
MethodDeclaration [88832,89575]
    MarkerAnnotation [88832,88837]
        SimpleName: Test [88833,88837]
    Modifier: public [88843,88849]
    PrimitiveType: void [88850,88854]
    SimpleName: releaseAllExclusiveLeavesSharedLocksInPlace [88855,88898]
    SimpleType [88908,88917]
        SimpleName: Exception [88908,88917]
    Block [88923,89575]
        ExpressionStatement [88951,88985]
            MethodInvocation [88951,88984]
                METHOD_INVOCATION_RECEIVER [88951,88958]
                    SimpleName: clientA [88951,88958]
                SimpleName: acquireShared [88959,88972]
                METHOD_INVOCATION_ARGUMENTS [88974,88982]
                    SimpleName: NODE [88974,88978]
                    NumberLiteral: 1l [88980,88982]
        ExpressionStatement [88995,89032]
            MethodInvocation [88995,89031]
                METHOD_INVOCATION_RECEIVER [88995,89002]
                    SimpleName: clientA [88995,89002]
                SimpleName: acquireExclusive [89003,89019]
                METHOD_INVOCATION_ARGUMENTS [89021,89029]
                    SimpleName: NODE [89021,89025]
                    NumberLiteral: 1l [89027,89029]
        ExpressionStatement [89042,89079]
            MethodInvocation [89042,89078]
                METHOD_INVOCATION_RECEIVER [89042,89049]
                    SimpleName: clientA [89042,89049]
                SimpleName: acquireExclusive [89050,89066]
                METHOD_INVOCATION_ARGUMENTS [89068,89076]
                    SimpleName: NODE [89068,89072]
                    NumberLiteral: 1l [89074,89076]
        ExpressionStatement [89089,89126]
            MethodInvocation [89089,89125]
                METHOD_INVOCATION_RECEIVER [89089,89096]
                    SimpleName: clientA [89089,89096]
                SimpleName: acquireExclusive [89097,89113]
                METHOD_INVOCATION_ARGUMENTS [89115,89123]
                    SimpleName: NODE [89115,89119]
                    NumberLiteral: 2l [89121,89123]
        VariableDeclarationStatement [89180,89270]
            ParameterizedType [89180,89194]
                SimpleType [89180,89186]
                    SimpleName: Future [89180,89186]
                SimpleType [89187,89193]
                    SimpleName: Object [89187,89193]
            VariableDeclarationFragment [89195,89269]
                SimpleName: clientBLock [89195,89206]
                MethodInvocation [89209,89269]
                    METHOD_INVOCATION_RECEIVER [89209,89246]
                        MethodInvocation [89209,89246]
                            SimpleName: acquireExclusive [89209,89225]
                            METHOD_INVOCATION_ARGUMENTS [89227,89244]
                                SimpleName: clientB [89227,89234]
                                SimpleName: NODE [89236,89240]
                                NumberLiteral: 1l [89242,89244]
                    SimpleName: callAndAssertWaiting [89247,89267]
        ExpressionStatement [89303,89333]
            MethodInvocation [89303,89332]
                METHOD_INVOCATION_RECEIVER [89303,89310]
                    SimpleName: clientA [89303,89310]
                SimpleName: releaseAllExclusive [89311,89330]
        ExpressionStatement [89393,89431]
            MethodInvocation [89393,89430]
                SimpleName: assertWaiting [89393,89406]
                METHOD_INVOCATION_ARGUMENTS [89408,89428]
                    SimpleName: clientB [89408,89415]
                    SimpleName: clientBLock [89417,89428]
        ExpressionStatement [89464,89498]
            MethodInvocation [89464,89497]
                METHOD_INVOCATION_RECEIVER [89464,89471]
                    SimpleName: clientA [89464,89471]
                SimpleName: releaseShared [89472,89485]
                METHOD_INVOCATION_ARGUMENTS [89487,89495]
                    SimpleName: NODE [89487,89491]
                    NumberLiteral: 1l [89493,89495]
        ExpressionStatement [89527,89568]
            MethodInvocation [89527,89567]
                SimpleName: assertNotWaiting [89527,89543]
                METHOD_INVOCATION_ARGUMENTS [89545,89565]
                    SimpleName: clientB [89545,89552]
                    SimpleName: clientBLock [89554,89565]
===
delete-node
---
Modifier: public [92331,92337]
===
delete-node
---
TYPE_DECLARATION_KIND: class [92338,92343]
===
delete-node
---
SimpleName: MasterImpl [92344,92354]
===
delete-node
---
Dimension [108496,108498]
===
delete-node
---
ArrayType [108492,108498]
===
delete-node
---
Dimension [108862,108864]
===
delete-node
---
ArrayType [108858,108864]
===
delete-tree
---
METHOD_INVOCATION_RECEIVER [109160,109166]
    SimpleName: Arrays [109160,109166]
===
delete-node
---
SimpleName: toString [109167,109175]
===
delete-node
---
METHOD_INVOCATION_ARGUMENTS [109177,109188]
===
delete-node
---
MethodInvocation [109160,109190]
===
delete-node
---
TYPE_DECLARATION_KIND: class [111680,111685]
===
delete-node
---
SimpleName: SlaveLocksClient [111686,111702]
===
delete-node
---
SimpleName: i [114021,114022]
===
delete-node
---
ArrayAccess [114010,114023]
===
delete-node
---
SimpleName: i [114932,114933]
===
delete-node
---
ArrayAccess [114921,114934]
===
delete-tree
---
MarkerAnnotation [113396,113405]
    SimpleName: Override [113397,113405]
===
delete-node
---
Modifier: public [113411,113417]
===
delete-node
---
PrimitiveType: void [113418,113422]
===
delete-node
---
SimpleName: acquireShared [113423,113436]
===
delete-tree
---
SingleVariableDeclaration [113471,113490]
    SingleVariableDeclaration [113471,113490]
        VARARGS_TYPE [113471,113478]
            PrimitiveType: long [113471,113475]
        SimpleName: resourceIds [113479,113490]
===
delete-tree
---
VariableDeclarationStatement [113629,113709]
    ArrayType [113629,113635]
        PrimitiveType: long [113629,113633]
        Dimension [113633,113635]
    VariableDeclarationFragment [113636,113708]
        SimpleName: untakenIds [113636,113646]
        MethodInvocation [113649,113708]
            SimpleName: incrementAndRemoveAlreadyTakenLocks [113649,113684]
            METHOD_INVOCATION_ARGUMENTS [113686,113706]
                SimpleName: lockMap [113686,113693]
                SimpleName: resourceIds [113695,113706]
===
delete-tree
---
InfixExpression [113724,113796]
    InfixExpression [113724,113745]
        QualifiedName: untakenIds.length [113724,113741]
        INFIX_EXPRESSION_OPERATOR: > [113742,113743]
        NumberLiteral: 0 [113744,113745]
    INFIX_EXPRESSION_OPERATOR: && [113746,113748]
    MethodInvocation [113749,113796]
        SimpleName: getReadLockOnMaster [113749,113768]
        METHOD_INVOCATION_ARGUMENTS [113770,113794]
            SimpleName: resourceType [113770,113782]
            SimpleName: untakenIds [113784,113794]
===
delete-node
---
SimpleName: trySharedLock [113835,113848]
===
delete-tree
---
METHOD_INVOCATION_ARGUMENTS [113850,113874]
    SimpleName: resourceType [113850,113862]
    SimpleName: untakenIds [113864,113874]
===
delete-node
---
MethodInvocation [113828,113876]
===
delete-tree
---
VariableDeclarationExpression [113917,113926]
    PrimitiveType: int [113917,113920]
    VariableDeclarationFragment [113921,113926]
        SimpleName: i [113921,113922]
        NumberLiteral: 0 [113925,113926]
===
delete-tree
---
InfixExpression [113928,113949]
    SimpleName: i [113928,113929]
    INFIX_EXPRESSION_OPERATOR: < [113930,113931]
    QualifiedName: untakenIds.length [113932,113949]
===
delete-tree
---
PostfixExpression [113951,113954]
    SimpleName: i [113951,113952]
    POSTFIX_EXPRESSION_OPERATOR: ++ [113952,113954]
===
delete-node
---
ForStatement [113911,114069]
===
delete-node
---
Block [113892,114084]
===
delete-node
---
SimpleName: client [114177,114183]
===
delete-node
---
SimpleName: localLockManager [114185,114201]
===
delete-node
---
SimpleName: resourceType [114203,114215]
===
delete-node
---
SimpleName: resourceIds [114217,114228]
===
delete-node
---
SimpleName: READ [114230,114234]
===
delete-node
---
ClassInstanceCreation [114141,114236]
===
delete-node
---
ThrowStatement [114135,114237]
===
delete-node
---
Block [114116,114254]
===
delete-node
---
IfStatement [113823,114254]
===
delete-node
---
Block [113808,114265]
===
delete-node
---
IfStatement [113719,114265]
===
delete-node
---
Block [113533,114272]
===
delete-node
---
MethodDeclaration [113396,114272]
===
delete-node
---
Modifier: public [114295,114301]
===
delete-node
---
PrimitiveType: void [114302,114306]
===
delete-node
---
SimpleName: acquireExclusive [114307,114323]
===
delete-tree
---
SingleVariableDeclaration [114358,114377]
    SingleVariableDeclaration [114358,114377]
        VARARGS_TYPE [114358,114365]
            PrimitiveType: long [114358,114362]
        SimpleName: resourceIds [114366,114377]
===
delete-tree
---
VariableDeclarationStatement [114532,114612]
    ArrayType [114532,114538]
        PrimitiveType: long [114532,114536]
        Dimension [114536,114538]
    VariableDeclarationFragment [114539,114611]
        SimpleName: untakenIds [114539,114549]
        MethodInvocation [114552,114611]
            SimpleName: incrementAndRemoveAlreadyTakenLocks [114552,114587]
            METHOD_INVOCATION_ARGUMENTS [114589,114609]
                SimpleName: lockMap [114589,114596]
                SimpleName: resourceIds [114598,114609]
===
delete-tree
---
InfixExpression [114627,114704]
    InfixExpression [114627,114648]
        QualifiedName: untakenIds.length [114627,114644]
        INFIX_EXPRESSION_OPERATOR: > [114645,114646]
        NumberLiteral: 0 [114647,114648]
    INFIX_EXPRESSION_OPERATOR: && [114649,114651]
    MethodInvocation [114652,114704]
        SimpleName: acquireExclusiveOnMaster [114652,114676]
        METHOD_INVOCATION_ARGUMENTS [114678,114702]
            SimpleName: resourceType [114678,114690]
            SimpleName: untakenIds [114692,114702]
===
delete-node
---
SimpleName: tryExclusiveLock [114743,114759]
===
delete-tree
---
METHOD_INVOCATION_ARGUMENTS [114761,114785]
    SimpleName: resourceType [114761,114773]
    SimpleName: untakenIds [114775,114785]
===
delete-node
---
MethodInvocation [114736,114787]
===
delete-tree
---
VariableDeclarationExpression [114828,114837]
    PrimitiveType: int [114828,114831]
    VariableDeclarationFragment [114832,114837]
        SimpleName: i [114832,114833]
        NumberLiteral: 0 [114836,114837]
===
delete-tree
---
InfixExpression [114839,114860]
    SimpleName: i [114839,114840]
    INFIX_EXPRESSION_OPERATOR: < [114841,114842]
    QualifiedName: untakenIds.length [114843,114860]
===
delete-tree
---
PostfixExpression [114862,114865]
    SimpleName: i [114862,114863]
    POSTFIX_EXPRESSION_OPERATOR: ++ [114863,114865]
===
delete-node
---
ForStatement [114822,114980]
===
delete-node
---
Block [114803,114995]
===
delete-node
---
SimpleName: client [115088,115094]
===
delete-node
---
SimpleName: localLockManager [115096,115112]
===
delete-node
---
SimpleName: resourceType [115114,115126]
===
delete-node
---
SimpleName: resourceIds [115128,115139]
===
delete-node
---
SimpleName: WRITE [115141,115146]
===
delete-node
---
ClassInstanceCreation [115052,115148]
===
delete-node
---
ThrowStatement [115046,115149]
===
delete-node
---
Block [115027,115164]
===
delete-node
---
IfStatement [114731,115164]
===
delete-node
---
Block [114716,115175]
===
delete-node
---
IfStatement [114622,115175]
===
delete-node
---
Block [114433,115182]
===
delete-node
---
MethodDeclaration [114280,115182]
===
delete-node
---
Modifier: private [115190,115197]
===
delete-tree
---
ArrayType [115198,115204]
    PrimitiveType: long [115198,115202]
    Dimension [115202,115204]
===
delete-node
---
SimpleName: incrementAndRemoveAlreadyTakenLocks [115205,115240]
===
delete-tree
---
SimpleType [115255,115258]
    SimpleName: Map [115255,115258]
===
delete-tree
---
SimpleType [115259,115263]
    SimpleName: Long [115259,115263]
===
delete-node
---
ParameterizedType [115255,115279]
===
delete-node
---
SimpleName: takenLocks [115280,115290]
===
delete-node
---
SingleVariableDeclaration [115255,115290]
===
delete-tree
---
SingleVariableDeclaration [115305,115323]
    ArrayType [115305,115311]
        PrimitiveType: long [115305,115309]
        Dimension [115309,115311]
    SimpleName: resourceIds [115312,115323]
===
delete-tree
---
VariableDeclarationStatement [115342,115389]
    ParameterizedType [115342,115357]
        SimpleType [115342,115351]
            SimpleName: ArrayList [115342,115351]
        SimpleType [115352,115356]
            SimpleName: Long [115352,115356]
    VariableDeclarationFragment [115358,115388]
        SimpleName: untakenIds [115358,115368]
        ClassInstanceCreation [115371,115388]
            ParameterizedType [115375,115386]
                SimpleType [115375,115384]
                    SimpleName: ArrayList [115375,115384]
===
delete-tree
---
VariableDeclarationExpression [115405,115414]
    PrimitiveType: int [115405,115408]
    VariableDeclarationFragment [115409,115414]
        SimpleName: i [115409,115410]
        NumberLiteral: 0 [115413,115414]
===
delete-tree
---
InfixExpression [115416,115438]
    SimpleName: i [115416,115417]
    INFIX_EXPRESSION_OPERATOR: < [115418,115419]
    QualifiedName: resourceIds.length [115420,115438]
===
delete-tree
---
PostfixExpression [115440,115443]
    SimpleName: i [115440,115441]
    POSTFIX_EXPRESSION_OPERATOR: ++ [115441,115443]
===
delete-tree
---
VariableDeclarationStatement [115470,115495]
    PrimitiveType: long [115470,115474]
    VariableDeclarationFragment [115475,115494]
        SimpleName: id [115475,115477]
        ArrayAccess [115480,115494]
            SimpleName: resourceIds [115480,115491]
            SimpleName: i [115492,115493]
===
delete-tree
---
VariableDeclarationFragment [115523,115553]
    SimpleName: counter [115523,115530]
    MethodInvocation [115533,115553]
        METHOD_INVOCATION_RECEIVER [115533,115543]
            SimpleName: takenLocks [115533,115543]
        SimpleName: get [115544,115547]
        METHOD_INVOCATION_ARGUMENTS [115549,115551]
            SimpleName: id [115549,115551]
===
delete-node
---
VariableDeclarationStatement [115509,115554]
===
delete-tree
---
IfStatement [115568,115751]
    InfixExpression [115573,115588]
        SimpleName: counter [115573,115580]
        INFIX_EXPRESSION_OPERATOR: != [115581,115583]
        NullLiteral [115584,115588]
    Block [115604,115664]
        ExpressionStatement [115623,115649]
            MethodInvocation [115623,115648]
                METHOD_INVOCATION_RECEIVER [115623,115630]
                    SimpleName: counter [115623,115630]
                SimpleName: incrementAndGet [115631,115646]
    Block [115696,115751]
        ExpressionStatement [115715,115736]
            MethodInvocation [115715,115735]
                METHOD_INVOCATION_RECEIVER [115715,115725]
                    SimpleName: untakenIds [115715,115725]
                SimpleName: add [115726,115729]
                METHOD_INVOCATION_ARGUMENTS [115731,115733]
                    SimpleName: id [115731,115733]
===
delete-node
---
Block [115455,115762]
===
delete-node
---
ForStatement [115399,115762]
===
delete-tree
---
VariableDeclarationStatement [115772,115817]
    ArrayType [115772,115778]
        PrimitiveType: long [115772,115776]
        Dimension [115776,115778]
    VariableDeclarationFragment [115779,115816]
        SimpleName: untaken [115779,115786]
        ArrayCreation [115789,115816]
            ArrayType [115793,115816]
                PrimitiveType: long [115793,115797]
                Dimension [115797,115816]
                    MethodInvocation [115798,115815]
                        METHOD_INVOCATION_RECEIVER [115798,115808]
                            SimpleName: untakenIds [115798,115808]
                        SimpleName: size [115809,115813]
===
delete-tree
---
ForStatement [115827,115965]
    VariableDeclarationExpression [115833,115842]
        PrimitiveType: int [115833,115836]
        VariableDeclarationFragment [115837,115842]
            SimpleName: i [115837,115838]
            NumberLiteral: 0 [115841,115842]
    InfixExpression [115844,115862]
        SimpleName: i [115844,115845]
        INFIX_EXPRESSION_OPERATOR: < [115846,115847]
        QualifiedName: untaken.length [115848,115862]
    PostfixExpression [115864,115867]
        SimpleName: i [115864,115865]
        POSTFIX_EXPRESSION_OPERATOR: ++ [115865,115867]
    Block [115879,115965]
        VariableDeclarationStatement [115894,115924]
            PrimitiveType: long [115894,115898]
            VariableDeclarationFragment [115899,115923]
                SimpleName: id [115899,115901]
                MethodInvocation [115904,115923]
                    METHOD_INVOCATION_RECEIVER [115904,115914]
                        SimpleName: untakenIds [115904,115914]
                    SimpleName: get [115915,115918]
                    METHOD_INVOCATION_ARGUMENTS [115920,115921]
                        SimpleName: i [115920,115921]
        ExpressionStatement [115938,115954]
            Assignment [115938,115953]
                ArrayAccess [115938,115948]
                    SimpleName: untaken [115938,115945]
                    SimpleName: i [115946,115947]
                ASSIGNMENT_OPERATOR: = [115949,115950]
                SimpleName: id [115951,115953]
===
delete-tree
---
ReturnStatement [115975,115990]
    SimpleName: untaken [115982,115989]
===
delete-node
---
Block [115331,115997]
===
delete-node
---
MethodDeclaration [115190,115997]
===
delete-node
---
Modifier: public [116020,116026]
===
delete-node
---
PrimitiveType: boolean [116027,116034]
===
delete-node
---
SimpleName: tryExclusiveLock [116035,116051]
===
delete-tree
---
SingleVariableDeclaration [116086,116105]
    SingleVariableDeclaration [116086,116105]
        VARARGS_TYPE [116086,116093]
            PrimitiveType: long [116086,116090]
        SimpleName: resourceIds [116094,116105]
===
delete-node
---
MethodDeclaration [116005,116181]
===
delete-node
---
VARARGS_TYPE [116267,116274]
===
delete-node
---
SingleVariableDeclaration [116267,116286]
===
delete-tree
---
SingleVariableDeclaration [116445,116464]
    SingleVariableDeclaration [116445,116464]
        VARARGS_TYPE [116445,116452]
            PrimitiveType: long [116445,116449]
        SimpleName: resourceIds [116453,116464]
===
delete-node
---
SimpleName: resourceIds [116592,116603]
===
delete-node
---
EnhancedForStatement [116568,117123]
===
delete-node
---
Block [116472,117130]
===
delete-tree
---
SingleVariableDeclaration [117216,117235]
    SingleVariableDeclaration [117216,117235]
        VARARGS_TYPE [117216,117223]
            PrimitiveType: long [117216,117220]
        SimpleName: resourceIds [117224,117235]
===
delete-node
---
SimpleName: resourceIds [117366,117377]
===
delete-node
---
EnhancedForStatement [117342,117900]
===
delete-node
---
Block [117243,117907]
===
delete-tree
---
MethodDeclaration [117915,118040]
    MarkerAnnotation [117915,117924]
        SimpleName: Override [117916,117924]
    Modifier: public [117930,117936]
    PrimitiveType: void [117937,117941]
    SimpleName: releaseAllShared [117942,117958]
    Block [117966,118040]
        ExpressionStatement [117977,117997]
            MethodInvocation [117977,117996]
                METHOD_INVOCATION_RECEIVER [117977,117988]
                    SimpleName: sharedLocks [117977,117988]
                SimpleName: clear [117989,117994]
        ExpressionStatement [118007,118033]
            MethodInvocation [118007,118032]
                METHOD_INVOCATION_RECEIVER [118007,118013]
                    SimpleName: client [118007,118013]
                SimpleName: releaseAllShared [118014,118030]
===
delete-node
---
Modifier: public [118063,118069]
===
delete-node
---
PrimitiveType: void [118070,118074]
===
delete-node
---
SimpleName: releaseAllExclusive [118075,118094]
===
delete-tree
---
Block [118102,118182]
    ExpressionStatement [118113,118136]
        MethodInvocation [118113,118135]
            METHOD_INVOCATION_RECEIVER [118113,118127]
                SimpleName: exclusiveLocks [118113,118127]
            SimpleName: clear [118128,118133]
    ExpressionStatement [118146,118175]
        MethodInvocation [118146,118174]
            METHOD_INVOCATION_RECEIVER [118146,118152]
                SimpleName: client [118146,118152]
            SimpleName: releaseAllExclusive [118153,118172]
===
delete-node
---
MethodDeclaration [118048,118182]
===
delete-node
---
VARARGS_TYPE [119230,119238]
===
delete-node
---
SingleVariableDeclaration [119230,119249]
===
delete-node
---
VARARGS_TYPE [119990,119997]
===
delete-node
---
SingleVariableDeclaration [119990,120008]
===
delete-node
---
Modifier: public [124502,124508]
===
delete-node
---
TYPE_DECLARATION_KIND: class [124509,124514]
===
delete-node
---
SimpleName: ForsetiClient [124515,124528]
===
delete-tree
---
SingleVariableDeclaration [126821,126840]
    SingleVariableDeclaration [126821,126840]
        VARARGS_TYPE [126821,126828]
            PrimitiveType: long [126821,126825]
        SimpleName: resourceIds [126829,126840]
===
delete-node
---
ContinueStatement [127680,127689]
===
delete-node
---
ContinueStatement [128165,128174]
===
delete-node
---
SimpleName: resourceIds [127295,127306]
===
delete-node
---
EnhancedForStatement [127271,130554]
===
delete-node
---
Block [126883,130561]
===
delete-tree
---
SingleVariableDeclaration [130647,130666]
    SingleVariableDeclaration [130647,130666]
        VARARGS_TYPE [130647,130654]
            PrimitiveType: long [130647,130651]
        SimpleName: resourceIds [130655,130666]
===
delete-node
---
ContinueStatement [131346,131355]
===
delete-node
---
SimpleName: resourceIds [131041,131052]
===
delete-node
---
EnhancedForStatement [131017,132494]
===
delete-node
---
Block [130709,132501]
===
delete-node
---
ContinueStatement [133141,133150]
===
delete-tree
---
ExpressionStatement [133755,133798]
    MethodInvocation [133755,133797]
        METHOD_INVOCATION_RECEIVER [133755,133762]
            SimpleName: lockMap [133755,133762]
        SimpleName: put [133763,133766]
        METHOD_INVOCATION_ARGUMENTS [133768,133795]
            SimpleName: resourceId [133768,133778]
            SimpleName: myExclusiveLock [133780,133795]
===
delete-node
---
ContinueStatement [133889,133898]
===
delete-tree
---
SingleVariableDeclaration [132590,132609]
    SingleVariableDeclaration [132590,132609]
        VARARGS_TYPE [132590,132597]
            PrimitiveType: long [132590,132594]
        SimpleName: resourceIds [132598,132609]
===
delete-node
---
SimpleName: resourceIds [132836,132847]
===
delete-node
---
EnhancedForStatement [132812,134265]
===
delete-node
---
Block [132617,134294]
===
delete-node
---
ContinueStatement [135911,135920]
===
delete-node
---
ContinueStatement [136331,136340]
===
delete-tree
---
SingleVariableDeclaration [135250,135269]
    SingleVariableDeclaration [135250,135269]
        VARARGS_TYPE [135250,135257]
            PrimitiveType: long [135250,135254]
        SimpleName: resourceIds [135258,135269]
===
delete-node
---
SimpleName: resourceIds [135596,135607]
===
delete-node
---
EnhancedForStatement [135572,137938]
===
delete-node
---
Block [135277,137967]
===
delete-node
---
ContinueStatement [138275,138284]
===
delete-tree
---
SingleVariableDeclaration [138050,138069]
    SingleVariableDeclaration [138050,138069]
        VARARGS_TYPE [138050,138057]
            PrimitiveType: long [138050,138054]
        SimpleName: resourceIds [138058,138069]
===
delete-node
---
SimpleName: resourceIds [138112,138123]
===
delete-node
---
EnhancedForStatement [138088,138592]
===
delete-node
---
Block [138077,138599]
===
delete-node
---
ContinueStatement [138913,138922]
===
delete-tree
---
SingleVariableDeclaration [138685,138704]
    SingleVariableDeclaration [138685,138704]
        VARARGS_TYPE [138685,138692]
            PrimitiveType: long [138685,138689]
        SimpleName: resourceIds [138693,138704]
===
delete-node
---
SimpleName: resourceIds [138747,138758]
===
delete-node
---
EnhancedForStatement [138723,139380]
===
delete-node
---
Block [138712,139387]
===
delete-tree
---
MethodDeclaration [139395,140346]
    MarkerAnnotation [139395,139404]
        SimpleName: Override [139396,139404]
    Modifier: public [139410,139416]
    PrimitiveType: void [139417,139421]
    SimpleName: releaseAllShared [139422,139438]
    Block [139446,140346]
        ForStatement [139457,140339]
            VariableDeclarationExpression [139463,139472]
                PrimitiveType: int [139463,139466]
                VariableDeclarationFragment [139467,139472]
                    SimpleName: i [139467,139468]
                    NumberLiteral: 0 [139471,139472]
            InfixExpression [139474,139501]
                SimpleName: i [139474,139475]
                INFIX_EXPRESSION_OPERATOR: < [139476,139477]
                QualifiedName: sharedLockCounts.length [139478,139501]
            PostfixExpression [139503,139506]
                SimpleName: i [139503,139504]
                POSTFIX_EXPRESSION_OPERATOR: ++ [139504,139506]
            Block [139518,140339]
                VariableDeclarationStatement [139533,139586]
                    SimpleType [139533,139552]
                        SimpleName: PrimitiveLongIntMap [139533,139552]
                    VariableDeclarationFragment [139553,139585]
                        SimpleName: localLocks [139553,139563]
                        ArrayAccess [139566,139585]
                            SimpleName: sharedLockCounts [139566,139582]
                            SimpleName: i [139583,139584]
                IfStatement [139600,140328]
                    InfixExpression [139603,139621]
                        SimpleName: localLocks [139603,139613]
                        INFIX_EXPRESSION_OPERATOR: != [139614,139616]
                        NullLiteral [139617,139621]
                    Block [139636,140328]
                        VariableDeclarationStatement [139655,139684]
                            PrimitiveType: int [139655,139658]
                            VariableDeclarationFragment [139659,139683]
                                SimpleName: size [139659,139663]
                                MethodInvocation [139666,139683]
                                    METHOD_INVOCATION_RECEIVER [139666,139676]
                                        SimpleName: localLocks [139666,139676]
                                    SimpleName: size [139677,139681]
                        ExpressionStatement [139702,139801]
                            MethodInvocation [139702,139800]
                                METHOD_INVOCATION_RECEIVER [139702,139712]
                                    SimpleName: localLocks [139702,139712]
                                SimpleName: visitKeys [139713,139722]
                                METHOD_INVOCATION_ARGUMENTS [139724,139798]
                                    MethodInvocation [139724,139798]
                                        METHOD_INVOCATION_RECEIVER [139724,139748]
                                            SimpleName: releaseSharedLockVisitor [139724,139748]
                                        SimpleName: initialize [139749,139759]
                                        METHOD_INVOCATION_ARGUMENTS [139761,139796]
                                            ArrayAccess [139761,139783]
                                                SimpleName: exclusiveLockCounts [139761,139780]
                                                SimpleName: i [139781,139782]
                                            ArrayAccess [139785,139796]
                                                SimpleName: lockMaps [139785,139793]
                                                SimpleName: i [139794,139795]
                        IfStatement [139819,140313]
                            InfixExpression [139822,139832]
                                SimpleName: size [139822,139826]
                                INFIX_EXPRESSION_OPERATOR: <= [139827,139829]
                                NumberLiteral: 32 [139830,139832]
                            Block [139851,140186]
                                ExpressionStatement [140148,140167]
                                    MethodInvocation [140148,140166]
                                        METHOD_INVOCATION_RECEIVER [140148,140158]
                                            SimpleName: localLocks [140148,140158]
                                        SimpleName: clear [140159,140164]
                            Block [140226,140313]
                                ExpressionStatement [140249,140294]
                                    Assignment [140249,140293]
                                        ArrayAccess [140249,140268]
                                            SimpleName: sharedLockCounts [140249,140265]
                                            SimpleName: i [140266,140267]
                                        ASSIGNMENT_OPERATOR: = [140269,140270]
                                        MethodInvocation [140271,140293]
                                            METHOD_INVOCATION_RECEIVER [140271,140280]
                                                SimpleName: Primitive [140271,140280]
                                            SimpleName: longIntMap [140281,140291]
===
delete-tree
---
MethodDeclaration [140354,141317]
    MarkerAnnotation [140354,140363]
        SimpleName: Override [140355,140363]
    Modifier: public [140369,140375]
    PrimitiveType: void [140376,140380]
    SimpleName: releaseAllExclusive [140381,140400]
    Block [140408,141317]
        ForStatement [140419,141310]
            VariableDeclarationExpression [140425,140434]
                PrimitiveType: int [140425,140428]
                VariableDeclarationFragment [140429,140434]
                    SimpleName: i [140429,140430]
                    NumberLiteral: 0 [140433,140434]
            InfixExpression [140436,140466]
                SimpleName: i [140436,140437]
                INFIX_EXPRESSION_OPERATOR: < [140438,140439]
                QualifiedName: exclusiveLockCounts.length [140440,140466]
            PostfixExpression [140468,140471]
                SimpleName: i [140468,140469]
                POSTFIX_EXPRESSION_OPERATOR: ++ [140469,140471]
            Block [140483,141310]
                VariableDeclarationStatement [140498,140554]
                    SimpleType [140498,140517]
                        SimpleName: PrimitiveLongIntMap [140498,140517]
                    VariableDeclarationFragment [140518,140553]
                        SimpleName: localLocks [140518,140528]
                        ArrayAccess [140531,140553]
                            SimpleName: exclusiveLockCounts [140531,140550]
                            SimpleName: i [140551,140552]
                IfStatement [140568,141299]
                    InfixExpression [140571,140589]
                        SimpleName: localLocks [140571,140581]
                        INFIX_EXPRESSION_OPERATOR: != [140582,140584]
                        NullLiteral [140585,140589]
                    Block [140604,141299]
                        VariableDeclarationStatement [140623,140652]
                            PrimitiveType: int [140623,140626]
                            VariableDeclarationFragment [140627,140651]
                                SimpleName: size [140627,140631]
                                MethodInvocation [140634,140651]
                                    METHOD_INVOCATION_RECEIVER [140634,140644]
                                        SimpleName: localLocks [140634,140644]
                                    SimpleName: size [140645,140649]
                        ExpressionStatement [140670,140769]
                            MethodInvocation [140670,140768]
                                METHOD_INVOCATION_RECEIVER [140670,140680]
                                    SimpleName: localLocks [140670,140680]
                                SimpleName: visitKeys [140681,140690]
                                METHOD_INVOCATION_ARGUMENTS [140692,140766]
                                    MethodInvocation [140692,140766]
                                        METHOD_INVOCATION_RECEIVER [140692,140719]
                                            SimpleName: releaseExclusiveLockVisitor [140692,140719]
                                        SimpleName: initialize [140720,140730]
                                        METHOD_INVOCATION_ARGUMENTS [140732,140764]
                                            ArrayAccess [140732,140751]
                                                SimpleName: sharedLockCounts [140732,140748]
                                                SimpleName: i [140749,140750]
                                            ArrayAccess [140753,140764]
                                                SimpleName: lockMaps [140753,140761]
                                                SimpleName: i [140762,140763]
                        IfStatement [140787,141284]
                            InfixExpression [140790,140800]
                                SimpleName: size [140790,140794]
                                INFIX_EXPRESSION_OPERATOR: <= [140795,140797]
                                NumberLiteral: 32 [140798,140800]
                            Block [140819,141154]
                                ExpressionStatement [141116,141135]
                                    MethodInvocation [141116,141134]
                                        METHOD_INVOCATION_RECEIVER [141116,141126]
                                            SimpleName: localLocks [141116,141126]
                                        SimpleName: clear [141127,141132]
                            Block [141194,141284]
                                ExpressionStatement [141217,141265]
                                    Assignment [141217,141264]
                                        ArrayAccess [141217,141239]
                                            SimpleName: exclusiveLockCounts [141217,141236]
                                            SimpleName: i [141237,141238]
                                        ASSIGNMENT_OPERATOR: = [141240,141241]
                                        MethodInvocation [141242,141264]
                                            METHOD_INVOCATION_RECEIVER [141242,141251]
                                                SimpleName: Primitive [141242,141251]
                                            SimpleName: longIntMap [141252,141262]
===
delete-node
---
SimpleName: lockMap [146881,146888]
===
delete-node
---
SimpleName: lockMap [147529,147536]
===
delete-tree
---
SingleVariableDeclaration [147790,147842]
    ParameterizedType [147790,147834]
        SimpleType [147790,147803]
            SimpleName: ConcurrentMap [147790,147803]
        SimpleType [147804,147808]
            SimpleName: Long [147804,147808]
        SimpleType [147810,147833]
            QualifiedName: ForsetiLockManager.Lock [147810,147833]
    SimpleName: lockMap [147835,147842]
===
delete-node
---
SimpleName: put [148827,148830]
===
delete-tree
---
METHOD_INVOCATION_ARGUMENTS [148832,148859]
    SimpleName: resourceId [148832,148842]
    SimpleName: myExclusiveLock [148844,148859]
===
delete-node
---
MethodInvocation [148819,148861]
===
delete-node
---
ExpressionStatement [148819,148862]
===
delete-node
---
ClassInstanceCreation [149766,149992]
===
delete-node
---
ThrowStatement [149760,149993]
===
delete-node
---
NumberLiteral: 0 [150233,150234]
===
delete-node
---
INFIX_EXPRESSION_OPERATOR: > [150295,150296]
===
delete-node
---
NumberLiteral: 0 [150297,150298]
===
delete-node
---
InfixExpression [150293,150298]
===
delete-tree
---
PostfixExpression [150252,150255]
    SimpleName: i [150252,150253]
    POSTFIX_EXPRESSION_OPERATOR: ++ [150253,150255]
===
delete-node
---
Block [150267,150345]
===
delete-node
---
Modifier: private [150561,150568]
===
delete-node
---
TYPE_DECLARATION_KIND: class [150569,150574]
===
delete-node
---
SimpleName: ReleaseSharedLocksVisitor [150575,150600]
===
delete-tree
---
ParameterizedType [150612,150650]
    SimpleType [150612,150632]
        SimpleName: PrimitiveLongVisitor [150612,150632]
    SimpleType [150633,150649]
        SimpleName: RuntimeException [150633,150649]
===
delete-tree
---
FieldDeclaration [150667,150715]
    Modifier: private [150667,150674]
    SimpleType [150675,150694]
        SimpleName: PrimitiveLongIntMap [150675,150694]
    VariableDeclarationFragment [150695,150714]
        SimpleName: exclusiveLockCounts [150695,150714]
===
delete-tree
---
FieldDeclaration [150725,150786]
    Modifier: private [150725,150732]
    ParameterizedType [150733,150777]
        SimpleType [150733,150746]
            SimpleName: ConcurrentMap [150733,150746]
        SimpleType [150747,150751]
            SimpleName: Long [150747,150751]
        SimpleType [150753,150776]
            QualifiedName: ForsetiLockManager.Lock [150753,150776]
    VariableDeclarationFragment [150778,150785]
        SimpleName: lockMap [150778,150785]
===
delete-tree
---
MethodDeclaration [150798,151148]
    Modifier: private [150798,150805]
    ParameterizedType [150806,150844]
        SimpleType [150806,150826]
            SimpleName: PrimitiveLongVisitor [150806,150826]
        SimpleType [150827,150843]
            SimpleName: RuntimeException [150827,150843]
    SimpleName: initialize [150845,150855]
    SingleVariableDeclaration [150857,150896]
        SimpleType [150857,150876]
            SimpleName: PrimitiveLongIntMap [150857,150876]
        SimpleName: exclusiveLockCounts [150877,150896]
    SingleVariableDeclaration [150948,151000]
        ParameterizedType [150948,150992]
            SimpleType [150948,150961]
                SimpleName: ConcurrentMap [150948,150961]
            SimpleType [150962,150966]
                SimpleName: Long [150962,150966]
            SimpleType [150968,150991]
                QualifiedName: ForsetiLockManager.Lock [150968,150991]
        SimpleName: lockMap [150993,151000]
    Block [151012,151148]
        ExpressionStatement [151027,151074]
            Assignment [151027,151073]
                FieldAccess [151027,151051]
                    ThisExpression [151027,151031]
                    SimpleName: exclusiveLockCounts [151032,151051]
                ASSIGNMENT_OPERATOR: = [151052,151053]
                SimpleName: exclusiveLockCounts [151054,151073]
        ExpressionStatement [151088,151111]
            Assignment [151088,151110]
                FieldAccess [151088,151100]
                    ThisExpression [151088,151092]
                    SimpleName: lockMap [151093,151100]
                ASSIGNMENT_OPERATOR: = [151101,151102]
                SimpleName: lockMap [151103,151110]
        ReturnStatement [151125,151137]
            ThisExpression [151132,151136]
===
delete-tree
---
MarkerAnnotation [151160,151169]
    SimpleName: Override [151161,151169]
===
delete-node
---
Modifier: public [151179,151185]
===
delete-node
---
PrimitiveType: boolean [151186,151193]
===
delete-node
---
SimpleName: visited [151194,151201]
===
delete-node
---
PREFIX_EXPRESSION_OPERATOR: ! [151248,151249]
===
delete-tree
---
METHOD_INVOCATION_RECEIVER [151249,151268]
    SimpleName: exclusiveLockCounts [151249,151268]
===
delete-node
---
SimpleName: containsKey [151269,151280]
===
delete-node
---
MethodInvocation [151249,151294]
===
delete-node
---
PrefixExpression [151248,151294]
===
delete-tree
---
Block [151309,151384]
    ExpressionStatement [151328,151369]
        MethodInvocation [151328,151368]
            SimpleName: releaseGlobalLock [151328,151345]
            METHOD_INVOCATION_ARGUMENTS [151347,151366]
                SimpleName: lockMap [151347,151354]
                SimpleName: resourceId [151356,151366]
===
delete-node
---
IfStatement [151245,151384]
===
delete-tree
---
ReturnStatement [151398,151411]
    BooleanLiteral: false [151405,151410]
===
delete-node
---
Block [151230,151422]
===
delete-node
---
MethodDeclaration [151160,151422]
===
delete-node
---
TypeDeclaration [150561,151429]
===
delete-node
---
TextElement: This differs from  [151449,151467]
===
delete-tree
---
TagElement [151467,151547]
    QualifiedName: org.neo4j.kernel.ha.lock.forseti.ForsetiClient.ReleaseSharedLocksVisitor [151474,151546]
===
delete-node
---
TextElement:  in that [151547,151555]
===
delete-node
---
Modifier: private [152344,152351]
===
delete-node
---
TYPE_DECLARATION_KIND: class [152352,152357]
===
delete-node
---
SimpleName: ReleaseExclusiveLocksVisitor [152358,152386]
===
delete-tree
---
ParameterizedType [152398,152436]
    SimpleType [152398,152418]
        SimpleName: PrimitiveLongVisitor [152398,152418]
    SimpleType [152419,152435]
        SimpleName: RuntimeException [152419,152435]
===
delete-tree
---
FieldDeclaration [152453,152498]
    Modifier: private [152453,152460]
    SimpleType [152461,152480]
        SimpleName: PrimitiveLongIntMap [152461,152480]
    VariableDeclarationFragment [152481,152497]
        SimpleName: sharedLockCounts [152481,152497]
===
delete-tree
---
FieldDeclaration [152508,152569]
    Modifier: private [152508,152515]
    ParameterizedType [152516,152560]
        SimpleType [152516,152529]
            SimpleName: ConcurrentMap [152516,152529]
        SimpleType [152530,152534]
            SimpleName: Long [152530,152534]
        SimpleType [152536,152559]
            QualifiedName: ForsetiLockManager.Lock [152536,152559]
    VariableDeclarationFragment [152561,152568]
        SimpleName: lockMap [152561,152568]
===
delete-tree
---
MethodDeclaration [152581,152922]
    Modifier: private [152581,152588]
    ParameterizedType [152589,152627]
        SimpleType [152589,152609]
            SimpleName: PrimitiveLongVisitor [152589,152609]
        SimpleType [152610,152626]
            SimpleName: RuntimeException [152610,152626]
    SimpleName: initialize [152628,152638]
    SingleVariableDeclaration [152640,152676]
        SimpleType [152640,152659]
            SimpleName: PrimitiveLongIntMap [152640,152659]
        SimpleName: sharedLockCounts [152660,152676]
    SingleVariableDeclaration [152728,152780]
        ParameterizedType [152728,152772]
            SimpleType [152728,152741]
                SimpleName: ConcurrentMap [152728,152741]
            SimpleType [152742,152746]
                SimpleName: Long [152742,152746]
            SimpleType [152748,152771]
                QualifiedName: ForsetiLockManager.Lock [152748,152771]
        SimpleName: lockMap [152773,152780]
    Block [152792,152922]
        ExpressionStatement [152807,152848]
            Assignment [152807,152847]
                FieldAccess [152807,152828]
                    ThisExpression [152807,152811]
                    SimpleName: sharedLockCounts [152812,152828]
                ASSIGNMENT_OPERATOR: = [152829,152830]
                SimpleName: sharedLockCounts [152831,152847]
        ExpressionStatement [152862,152885]
            Assignment [152862,152884]
                FieldAccess [152862,152874]
                    ThisExpression [152862,152866]
                    SimpleName: lockMap [152867,152874]
                ASSIGNMENT_OPERATOR: = [152875,152876]
                SimpleName: lockMap [152877,152884]
        ReturnStatement [152899,152911]
            ThisExpression [152906,152910]
===
delete-tree
---
MarkerAnnotation [152934,152943]
    SimpleName: Override [152935,152943]
===
delete-node
---
Modifier: public [152953,152959]
===
delete-node
---
PrimitiveType: boolean [152960,152967]
===
delete-node
---
SimpleName: visited [152968,152975]
===
delete-tree
---
METHOD_INVOCATION_RECEIVER [153022,153038]
    SimpleName: sharedLockCounts [153022,153038]
===
delete-node
---
SimpleName: containsKey [153039,153050]
===
delete-node
---
MethodInvocation [153022,153064]
===
delete-node
---
SimpleName: put [153106,153109]
===
delete-tree
---
METHOD_INVOCATION_ARGUMENTS [153111,153159]
    SimpleName: resourceId [153111,153121]
    ClassInstanceCreation [153123,153159]
        SimpleType [153127,153137]
            SimpleName: SharedLock [153127,153137]
        ThisExpression [153139,153157]
            SimpleName: ForsetiClient [153139,153152]
===
delete-node
---
MethodInvocation [153098,153161]
===
delete-node
---
ExpressionStatement [153098,153162]
===
delete-node
---
Block [153079,153177]
===
delete-tree
---
Block [153209,153284]
    ExpressionStatement [153228,153269]
        MethodInvocation [153228,153268]
            SimpleName: releaseGlobalLock [153228,153245]
            METHOD_INVOCATION_ARGUMENTS [153247,153266]
                SimpleName: lockMap [153247,153254]
                SimpleName: resourceId [153256,153266]
===
delete-node
---
IfStatement [153019,153284]
===
delete-tree
---
ReturnStatement [153298,153311]
    BooleanLiteral: false [153305,153310]
===
delete-node
---
Block [153004,153322]
===
delete-node
---
MethodDeclaration [152934,153322]
===
delete-node
---
TypeDeclaration [152344,153329]
===
delete-node
---
TextElement: This differs from  [153349,153367]
===
delete-tree
---
TagElement [153367,153450]
    QualifiedName: org.neo4j.kernel.ha.lock.forseti.ForsetiClient.ReleaseExclusiveLocksVisitor [153374,153449]
===
delete-node
---
TextElement:  in that [153450,153458]
===
delete-tree
---
FieldDeclaration [154804,154903]
    Modifier: private [154804,154811]
    Modifier: final [154812,154817]
    SimpleType [154818,154843]
        SimpleName: ReleaseSharedLocksVisitor [154818,154843]
    VariableDeclarationFragment [154844,154902]
        SimpleName: releaseSharedLockVisitor [154844,154868]
        ClassInstanceCreation [154871,154902]
            SimpleType [154875,154900]
                SimpleName: ReleaseSharedLocksVisitor [154875,154900]
===
delete-tree
---
FieldDeclaration [154909,155017]
    Modifier: private [154909,154916]
    Modifier: final [154917,154922]
    SimpleType [154923,154951]
        SimpleName: ReleaseExclusiveLocksVisitor [154923,154951]
    VariableDeclarationFragment [154952,155016]
        SimpleName: releaseExclusiveLockVisitor [154952,154979]
        ClassInstanceCreation [154982,155016]
            SimpleType [154986,155014]
                SimpleName: ReleaseExclusiveLocksVisitor [154986,155014]
===
delete-node
---
Modifier: public [167203,167209]
===
delete-node
---
TYPE_DECLARATION_KIND: class [167210,167215]
===
delete-node
---
SimpleName: MasterImplTest [167216,167230]
===
delete-tree
---
METHOD_INVOCATION_RECEIVER [171056,171064]
    SimpleName: Matchers [171056,171064]
===
delete-tree
---
MethodDeclaration [179772,180425]
    MarkerAnnotation [179772,179777]
        SimpleName: Test [179773,179777]
    Modifier: public [179783,179789]
    PrimitiveType: void [179790,179794]
    SimpleName: shouldNotTakeSharedLockOnMasterIfWeAreAlreadyHoldingSaidLock_OverlappingBatch [179795,179872]
    Block [179880,180425]
        ExpressionStatement [179957,180018]
            MethodInvocation [179957,180017]
                METHOD_INVOCATION_RECEIVER [179957,179998]
                    MethodInvocation [179957,179998]
                        SimpleName: when [179957,179961]
                        METHOD_INVOCATION_ARGUMENTS [179963,179996]
                            MethodInvocation [179963,179996]
                                METHOD_INVOCATION_RECEIVER [179963,179968]
                                    SimpleName: local [179963,179968]
                                SimpleName: trySharedLock [179969,179982]
                                METHOD_INVOCATION_ARGUMENTS [179984,179994]
                                    SimpleName: NODE [179984,179988]
                                    NumberLiteral: 1 [179990,179991]
                                    NumberLiteral: 2 [179993,179994]
                SimpleName: thenReturn [179999,180009]
                METHOD_INVOCATION_ARGUMENTS [180011,180015]
                    BooleanLiteral: true [180011,180015]
        ExpressionStatement [180028,180089]
            MethodInvocation [180028,180088]
                METHOD_INVOCATION_RECEIVER [180028,180069]
                    MethodInvocation [180028,180069]
                        SimpleName: when [180028,180032]
                        METHOD_INVOCATION_ARGUMENTS [180034,180067]
                            MethodInvocation [180034,180067]
                                METHOD_INVOCATION_RECEIVER [180034,180039]
                                    SimpleName: local [180034,180039]
                                SimpleName: trySharedLock [180040,180053]
                                METHOD_INVOCATION_ARGUMENTS [180055,180065]
                                    SimpleName: NODE [180055,180059]
                                    NumberLiteral: 2 [180061,180062]
                                    NumberLiteral: 3 [180064,180065]
                SimpleName: thenReturn [180070,180080]
                METHOD_INVOCATION_ARGUMENTS [180082,180086]
                    BooleanLiteral: true [180082,180086]
        ExpressionStatement [180137,180172]
            MethodInvocation [180137,180171]
                METHOD_INVOCATION_RECEIVER [180137,180143]
                    SimpleName: client [180137,180143]
                SimpleName: acquireShared [180144,180157]
                METHOD_INVOCATION_ARGUMENTS [180159,180169]
                    SimpleName: NODE [180159,180163]
                    NumberLiteral: 1 [180165,180166]
                    NumberLiteral: 2 [180168,180169]
        ExpressionStatement [180182,180217]
            MethodInvocation [180182,180216]
                METHOD_INVOCATION_RECEIVER [180182,180188]
                    SimpleName: client [180182,180188]
                SimpleName: acquireShared [180189,180202]
                METHOD_INVOCATION_ARGUMENTS [180204,180214]
                    SimpleName: NODE [180204,180208]
                    NumberLiteral: 2 [180210,180211]
                    NumberLiteral: 3 [180213,180214]
        ExpressionStatement [180301,180356]
            MethodInvocation [180301,180355]
                METHOD_INVOCATION_RECEIVER [180301,180317]
                    MethodInvocation [180301,180317]
                        SimpleName: verify [180301,180307]
                        METHOD_INVOCATION_ARGUMENTS [180309,180315]
                            SimpleName: master [180309,180315]
                SimpleName: acquireSharedLock [180318,180335]
                METHOD_INVOCATION_ARGUMENTS [180337,180353]
                    NullLiteral [180337,180341]
                    SimpleName: NODE [180343,180347]
                    NumberLiteral: 1 [180349,180350]
                    NumberLiteral: 2 [180352,180353]
        ExpressionStatement [180366,180418]
            MethodInvocation [180366,180417]
                METHOD_INVOCATION_RECEIVER [180366,180382]
                    MethodInvocation [180366,180382]
                        SimpleName: verify [180366,180372]
                        METHOD_INVOCATION_ARGUMENTS [180374,180380]
                            SimpleName: master [180374,180380]
                SimpleName: acquireSharedLock [180383,180400]
                METHOD_INVOCATION_ARGUMENTS [180402,180415]
                    NullLiteral [180402,180406]
                    SimpleName: NODE [180408,180412]
                    NumberLiteral: 3 [180414,180415]
